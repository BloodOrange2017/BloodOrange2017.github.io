<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;n">
<meta property="og:type" content="article">
<meta property="og:title" content="转载:jsf入门">
<meta property="og:url" content="https://bloodorange2017.github.io/archives/2017/05/08/jsf-01/index.html">
<meta property="og:site_name" content="XueCheng Notes">
<meta property="og:description" content="&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;n">
<meta property="og:updated_time" content="2017-05-08T11:26:31.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="转载:jsf入门">
<meta name="twitter:description" content="&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;n">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://bloodorange2017.github.io/archives/2017/05/08/jsf-01/"/>





  <title>转载:jsf入门 | XueCheng Notes</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  














  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">XueCheng Notes</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Where there is a will, there is a way.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://bloodorange2017.github.io/archives/2017/05/08/jsf-01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XueCheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://bloodorange2017.github.io/images/img_head_001.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XueCheng Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">转载:jsf入门</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-08T19:25:16+08:00">
                2017-05-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <div id="article_content" class="article_content"><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; JSF入门教程 <br><br><br><br><br><br>1.入门 <br><br>1.1 简介JSF <br><br>1.2 第一个JSF程序 <br><br>1.3 简单的导航 Navigation <br><br>1.4 导航规则设置 <br><br>1.5 JSF Expression Language <br><br>1.6 国际化信息 <br><br>2. Managed Beans <br><br>2.1 Backing Beans <br><br>2.2 Beans的配置与设定 <br><br>2.3 Beans上的List, Map <br><br>3.&nbsp; 数据转换与验证 <br><br>3.1 标准转换器 <br><br>3.2 自定义转换器 <br><br>3.3 标准验证器 <br><br>3.4 自定义验证器 <br><br>3.5 错误信息处理 <br><br>3.6 自定义转换, 验证标签 <br><br>4.&nbsp; 事件处理 <br><br>4.1 动作事件 <br><br>4.2 即时事件 <br><br>4.3 &#20540;变事件 <br><br>4.4 Phase事件 <br><br>JSF 入门 <br><br>如果您是从使用的角度来看JSF，则您不用理会HTTP、数据转换等细节，JSF <br><br>将细节都隐藏起来了，无论您是网页设计人员或是应用程序设计人员，都可以使用 <br><br>自己熟悉的方式来看JSF。&nbsp; <br><br>1.&nbsp; 入门&nbsp; <br><br>借由以下的几个主题，可以大致了解JSF的轮廓与特性，我们来看看网页设计 <br><br>人员与应用程序设计人员各负责什么。&nbsp; <br><br>1.1&nbsp; 简介JSF&nbsp; <br><br>Web应用程序的开发与传统的单机程序开发在本质上存在着太多的差异，Web <br><br>应用程序开发人员至今不可避免的必须处理HTTP的细节，而HTTP无状态的 <br><br>（stateless）本质，与传统应用程序必须维持程序运行过程中的信息有明显的违背， <br><br>再则Web应用程序面对网站上不同的使用者同时的存取，其执行线程安全问题以及 <br><br>数据验证、转换处理等问题，又是复杂且难以解决的。&nbsp; <br><br>另一方面，本质上是静态的HTML与本质上是动态的应用程序又是一项违背， <br><br>这造成不可避免的，处理网页设计的美术人员与程序设计人员，必须被彼此加入至 <br><br>视图组件中的逻辑互相干扰，即便一些视图呈现逻辑以标签的方式呈现，试图展现 <br><br>对网页设计美术人员的亲切，但它终究必须牵涉到相关的流程逻辑。&nbsp; <br><br>有很多方案试着解决种种的困境，而各自的着&#30524;点各不相同，有的从程序设计 <br><br>人员的角度来解决，有的从网页设计人员的角度来解决，各种的框架被提出，所造 <br><br>成的是各种不统一的标签与框架，为了促进产能的集成开发环境（IDE）难以整合 <br><br>这些标签与框架，另一方面，开发人员的学习负担也不断的加重，他们必须一人了 <br><br>解多个角色的工作。&nbsp; <br><br>JavaServer Faces的提出在试图解决这个问题，它试图在不同的角度上提供网页 <br><br>设计人员、应用程序设计人员、组件开发人员解决方案，让不同技术的人员可以彼 <br><br>此合作又不互相干扰，它综合了各家厂商现有的技术特点，由Java Community <br><br>Process （JCP） 团队研拟出来的一套标准， 并在2004年三月发表了JavaServer Faces 1.0 <br><br>实现成果。&nbsp; <br><br>从网页设计人员的角度来看，JavaServer Faces提供了一套像是新版本的HTML <br><br>标签，但它不是静态的，而是动态的，可以与后端的动态程序结合，但网页设计人 <br><br>员不需要理会后端的动态部份，网页设计人员甚至不太需要接触JSTL这类的标签， <br><br>也可以动态的展现数据（像是动态的查询表&#26684;内容），JavaServer Faces提供标准的 <br><br>标签，这可以与网页编辑程序结合在一起，另一方面，JavaServer Faces也允许您自 <br><br>定义标签。&nbsp; <br><br>从应用程序设计人员的角度来看，JavaServer Faces提供一个与传统应用程序开 <br><br>发相类&#20284;的模型（当然因某些本质上的差异，模型还是稍有不同），他们可以基于 <br><br>事件驱动来开发程序，不必关切HTTP的处理细节，如果必须处理一些视觉组件的属 <br><br>性的话，他们也可以直接在整合开发环境上拖拉这些组件，点选设定组件的属性， <br><br>JavaServer Faces甚至还为应用程序设计人员处理了对象与字符串 （HTTP传送本质上 <br><br>就是字符串）间不匹配的转换问题。 从UI组件开发人员的角度来看，他们可以设计通用的UI组件，让应用程序的开 <br><br>发产能提高，就如同在设计Swing组件等，UI开发人员可以独立开发，只要定义好 <br><br>相关的属性选项来调整细节， 而不用受到网页设计人员或应用程序设计人员的干扰。&nbsp;&nbsp; <br><br>三个角色的知识领域原则上可以互不干扰，根据您的角色，您只要了解其中一 <br><br>个知识领域，就可以运用JavaServer Faces，其它角色的知识领域您可以不用了解太 <br><br>多细节。&nbsp; <br><br>当然，就其中一个角色单独来看，JavaServer Faces隐藏了许多细节，若要全盘 <br><br>了解，其实JavaServer Faces是复杂的，每一个处理的环境都&#20540;得深入探讨，所以学 <br><br>习JavaServer Faces时，您要选择的是通盘了解，还是从使用的角度来了解，这就决 <br><br>定了您学习时所要花费的心力。&nbsp; <br><br>要使用JSF，首先您要先取得JavaServer Faces参考实现（JavaServer Faces <br><br>Reference Implementation），在将来，JSF会与Container整合在一起，到时您只要下 <br><br>载支持的Container，就可以使用JSF的功能。&nbsp; <br><br>请至 JSF 官方网站下载参考实现， 在下载压缩文件并解压缩之后， 将其 lib 目 <br><br>录下的 jar 文件复制至您的Web应用程序的/WEB-INF/lib目录下，另外您还需要 <br><br>jstl.jar 与 standard.jar 文件，这些文件您可以在 sample 目录下，解压缩当中的一 <br><br>个范例，在它的/WEB-INF/lib目录下找到，将之一并复制至您的Web应用程序的 <br><br>/WEB-INF/lib目录下，您总共需要以下的文件：&nbsp; <br><br><em> jsf-impl.jar&nbsp; <br>
</em> jsf-api.jar&nbsp; <br><br><em> commons-digester.jar&nbsp; <br>
</em> commons-collections.jar&nbsp; <br><br><em> commons-beanutils.jar&nbsp; <br>
</em> jstl.jar&nbsp; <br><br><em> standard.jar&nbsp; <br><br>接下来配置Web应用程序的web.xml， 使用JSF时， 所有的请求都通过FacesServlet <br><br>来处理，您可以如下定义：&nbsp; <br><br>• web.xml&nbsp; <br><br>&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;&nbsp; <br><br>&lt;web-app xmlns=&quot;<a href="http://java.sun.com/xml/ns/j2ee&quot;&amp;nbsp" target="_blank" rel="external">http://java.sun.com/xml/ns/j2ee&quot;&amp;nbsp</a>; <br><br>xmlns:xsi=&quot;<a href="http://www.w3.org/2001/XMLSchema-instance&quot;&amp;nbsp" target="_blank" rel="external">http://www.w3.org/2001/XMLSchema-instance&quot;&amp;nbsp</a>; <br><br>xsi:schemaLocation=&quot;<a href="http://java.sun.com/xml/ns/j2ee&amp;nbsp" target="_blank" rel="external">http://java.sun.com/xml/ns/j2ee&amp;nbsp</a>; <br><br><a href="http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;&amp;nbsp" target="_blank" rel="external">http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;&amp;nbsp</a>; <br><br>version=&quot;2.4&quot;&gt;&nbsp; <br><br>&lt;description&gt;&nbsp; <br><br>JSF Demo&nbsp; <br><br>&lt;/description&gt;&nbsp; <br><br>&lt;display-name&gt;JSF Demo&lt;/display-name&gt;&nbsp; <br><br>&lt;servlet&gt;&nbsp; <br><br>&lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;&nbsp; <br><br>&lt;servlet-class&gt;javax.faces.webapp.FacesServlet &lt;/servlet-class&gt;&nbsp; <br><br>&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;&nbsp; <br><br>&lt;/servlet&gt;&nbsp; <br><br>&lt;servlet-mapping&gt;&nbsp; &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;&nbsp; <br><br>&lt;url-pattern&gt;</em>.faces&lt;/url-pattern&gt;&nbsp; <br><br>&lt;/servlet-mapping&gt;&nbsp; <br><br>&lt;welcome-file-list&gt;&nbsp; <br><br>&lt;welcome-file&gt;index.html&lt;/welcome-file&gt;&nbsp; <br><br>&lt;/welcome-file-list&gt;&nbsp; <br><br>&lt;/web-app&gt;&nbsp; <br><br>在上面的定义中，我们将所有.faces的请求交由FaceServlet来处理，FaceServlet <br><br>会唤起相对的.jsp网页， 例如请求是/index.faces的话， 则实际上会唤起/index.jsp网页， <br><br>完成以上的配置，您就可以开始使用JSF了。&nbsp; <br><br>1.2&nbsp; 第一个JSF程序&nbsp; <br><br>现在可以开发一个简单的程序了，我们将设计一个简单的登入程序，使用者提 <br><br>交名称，之后由程序显示使用者名称及欢迎信息。&nbsp; <br><br>程序开发人员&nbsp; <br><br>先看看应用程序开发人员要作些什么事，我们编写一个简单的JavaBean：&nbsp; <br><br>• UserBean.java&nbsp; <br><br>package onlyfun.caterpillar;&nbsp; <br><br>public class UserBean {&nbsp; <br><br>private String name;&nbsp; <br><br>public void setName(String name) {&nbsp; <br><br>this.name = name;&nbsp; <br><br>}&nbsp; <br><br>public String getName() {&nbsp; <br><br>return name;&nbsp; <br><br>}&nbsp; <br><br>}&nbsp; <br><br>这个Bean将存贮使用者的名称，编译好之后放置在/WEB-INF/classes下。&nbsp; <br><br>接下来设计页面流程，我们将先显示一个登入网页/pages/index.jsp，使用者填入 <br><br>名称并提交表单， 之后在/pages/welcome.jsp中显示Bean中的使用者名称与欢迎信息。&nbsp;&nbsp; <br><br>为了让JSF知道我们所设计的Bean以及页面流程，我们定义一个 <br><br>/WEB-INF/faces-config.xml：&nbsp; <br><br>• faces-config.xml&nbsp; <br><br>&lt;?xml version=&quot;1.0&quot;?&gt;&nbsp; <br><br>&lt;!DOCTYPE faces-config PUBLIC&nbsp; <br><br>&quot;-//Sun Microsystems, Inc.//DTD JavaServer Faces Config 1.0//EN&quot;&nbsp; <br><br>&quot;<a href="http://java.sun.com/dtd/web-facesconfig_1_0.dtd&quot;&gt;&amp;nbsp" target="_blank" rel="external">http://java.sun.com/dtd/web-facesconfig_1_0.dtd&quot;&gt;&amp;nbsp</a>; <br><br>&lt;faces-config&gt;&nbsp; <br><br>&lt;navigation-rule&gt;&nbsp; <br><br>&lt;from-view-id&gt;/pages/index.jsp&lt;/from-view-id&gt;&nbsp; <br><br>&lt;navigation-case&gt;&nbsp; <br><br>&lt;from-outcome&gt;login&lt;/from-outcome&gt;&nbsp; <br><br>&lt;to-view-id&gt;/pages/welcome.jsp&lt;/to-view-id&gt;&nbsp; <br><br>&lt;/navigation-case&gt;&nbsp; <br><br>&lt;/navigation-rule&gt;&nbsp; &lt;managed-bean&gt;&nbsp; <br><br>&lt;managed-bean-name&gt;user&lt;/managed-bean-name&gt;&nbsp; <br><br>&lt;managed-bean-class&gt;&nbsp; <br><br>onlyfun.caterpillar.UserBean&nbsp; <br><br>&lt;/managed-bean-class&gt;&nbsp; <br><br>&lt;managed-bean-scope&gt;session&lt;/managed-bean-scope&gt;&nbsp; <br><br>&lt;/managed-bean&gt;&nbsp; <br><br>&lt;/faces-config&gt;&nbsp; <br><br>在&lt;navigation-rule&gt;中，我们定义了页面流程，当请求来自&lt;from-view- id&gt;中指 <br><br>定的页面，并且指定了&lt;navigation-case&gt;中的&lt;from-outcome&gt;为login时，则会将请求 <br><br>导向至&lt;to-view-id&gt;所指定的页面。&nbsp; <br><br>在&lt;managed-bean&gt;中我们可以统一管理我们的Bean，我们设定Bean对象的存活 <br><br>范围是session，也就是使用者开启浏览器与程序互动过程中都存活。&nbsp; <br><br>接下来要告诉网页设计人员的信息是，他们可以使用的Bean名称，即 <br><br>&lt;managed-bean-name&gt;中设定的名称，以及上面所定义的页面流程。&nbsp; <br><br>网页设计人员&nbsp; <br><br>首先网页设计人员编写index.jsp网页：&nbsp; <br><br>• index.jsp&nbsp; <br><br>&lt;%@taglib uri=&quot;<a href="http://java.sun.com/jsf/core&amp;quot" target="_blank" rel="external">http://java.sun.com/jsf/core&amp;quot</a>; prefix=&quot;f&quot; %&gt;&nbsp; <br><br>&lt;%@taglib uri=&quot;<a href="http://java.sun.com/jsf/html&amp;quot" target="_blank" rel="external">http://java.sun.com/jsf/html&amp;quot</a>; prefix=&quot;h&quot; %&gt;&nbsp; <br><br>&lt;%@page contentType=&quot;text/html;charset=GB2312&quot;%&gt;&nbsp; <br><br>&lt;html&gt;&nbsp; <br><br>&lt;head&gt;&nbsp; <br><br>&lt;title&gt;第一个JSF程序&lt;/title&gt;&nbsp; <br><br>&lt;/head&gt;&nbsp; <br><br>&lt;body&gt;&nbsp; <br><br>&lt;f:view&gt;&nbsp; <br><br>&lt;h:form&gt;&nbsp; <br><br>&lt;h3&gt;请输入您的名称&lt;/h3&gt;&nbsp; <br><br>名称: &lt;h:inputText value=&quot;#{user.name}&quot;/&gt;&lt;p&gt;&nbsp; <br><br>&lt;h:commandButton value=&quot;送出&quot; action=&quot;login&quot;/&gt;&nbsp; <br><br>&lt;/h:form&gt;&nbsp; <br><br>&lt;/f:view&gt;&nbsp; <br><br>&lt;/body&gt;&nbsp; <br><br>&lt;/html&gt;&nbsp; <br><br>我们使用了JSF的core与html标签库，core是有关于UI组件的处理，而html则是 <br><br>有关于HTML的进阶标签。&nbsp; <br><br>&lt;f:view&gt;与&lt;html&gt;有类&#20284;的作用，当您要开始使用JSF组件时，这些组件一定要 <br><br>在&lt;f: view&gt;与&lt;/f:view&gt;之间，就如同使用HTML时，所有的标签一定要在&lt;html&gt;与 <br><br>&lt;/html&gt;之间。&nbsp; <br><br>html标签库中几乎都是与HTML标签相关的进阶标签，&lt;h:form&gt;会产生一个表 <br><br>单，我们使用&lt;h: inputText&gt;来显示user这个Bean对象的name属性，而 <br><br>&lt;h:commandButton&gt;会产生一个提交按钮，我们在action属性中指定将根据之前定义 <br><br>的login页面流程中前往welcome.jsp页面。&nbsp; 网页设计人员不必理会表单传送之后要作些什么，他只要设计好欢迎页面就好 <br><br>了：&nbsp; <br><br>• welcome.jsp&nbsp; <br><br>&lt;%@ taglib uri=&quot;<a href="http://java.sun.com/jsf/core&amp;quot" target="_blank" rel="external">http://java.sun.com/jsf/core&amp;quot</a>; prefix=&quot;f&quot; %&gt;&nbsp; <br><br>&lt;%@ taglib uri=&quot;<a href="http://java.sun.com/jsf/html&amp;quot" target="_blank" rel="external">http://java.sun.com/jsf/html&amp;quot</a>; prefix=&quot;h&quot; %&gt;&nbsp; <br><br>&lt;%@page contentType=&quot;text/html;charset=GB2312&quot;%&gt;&nbsp; <br><br>&lt;html&gt;&nbsp; <br><br>&lt;head&gt;&nbsp; <br><br>&lt;title&gt;第一个JSF程序&lt;/title&gt;&nbsp; <br><br>&lt;/head&gt;&nbsp; <br><br>&lt;body&gt;&nbsp; <br><br>&lt;f:view&gt;&nbsp; <br><br>&lt;h:outputText value=&quot;#{user.name}&quot;/&gt; 您好！&nbsp; <br><br>&lt;h3&gt;欢迎使用 JavaServer Faces！&lt;/h3&gt;&nbsp; <br><br>&lt;/f:view&gt;&nbsp; <br><br>&lt;/body&gt;&nbsp; <br><br>&lt;/html&gt;&nbsp; <br><br>这个页面没什么需要解释的了，如您所看到的，在网页上没有程序逻辑，网页 <br><br>设计人员所作的就是遵照页面流程，使用相关名称取出数据，而不用担心实际上程 <br><br>序是如何运行的。&nbsp; <br><br>接下来启动 Container ，连接上您的应用程序网址，例如： <br><br><a href="http://localhost:8080/jsfDemo/pages/index.faces，填入名称并提交表单，您的欢迎页面" target="_blank" rel="external">http://localhost:8080/jsfDemo/pages/index.faces，填入名称并提交表单，您的欢迎页面</a> <br><br>就会显示了。&nbsp; <br><br>1.3简单的导航 Navigation&nbsp; <br><br>在第一个JSF程序中，我们简单的定义了页面的流程由index.jsp到welcome.jsp， <br><br>接下来我们扩充程序，让它可以根据使用者输入的名称与密码是否正确，决定要显 <br><br>示欢迎信息或是将使用者送回原页面进行重新登入。&nbsp; <br><br>首先我们修改一下UserBean：&nbsp; <br><br>• UserBean.java&nbsp; <br><br>package onlyfun.caterpillar;&nbsp; <br><br>public class UserBean {&nbsp; <br><br>private String name;&nbsp; <br><br>private String password;&nbsp; <br><br>private String errMessage;&nbsp; <br><br>public void setName(String name) {&nbsp; <br><br>this.name = name;&nbsp; <br><br>}&nbsp; <br><br>public String getName() {&nbsp; <br><br>return name;&nbsp; <br><br>}&nbsp; <br><br>public void setPassword(String password) {&nbsp; <br><br>this.password = password;&nbsp; <br><br>}&nbsp; <br><br>public String getPassword() {&nbsp; return password;&nbsp; <br><br>}&nbsp; <br><br>public void setErrMessage(String errMessage) {&nbsp; <br><br>this.errMessage = errMessage;&nbsp; <br><br>}&nbsp; <br><br>public String getErrMessage() {&nbsp; <br><br>return errMessage;&nbsp; <br><br>}&nbsp; <br><br>public String verify() {&nbsp; <br><br>if(!name.equals(&quot;justin&quot;) || !password.equals(&quot;123456&quot;)) {&nbsp; <br><br>errMessage = &quot;名称或密码错误&quot;;&nbsp; <br><br>return &quot;failure&quot;;&nbsp; <br><br>} else {&nbsp; <br><br>return &quot;success&quot;;&nbsp; <br><br>}&nbsp; <br><br>}&nbsp; <br><br>}&nbsp; <br><br>在UserBean中，我们增加了密码与错误信息属性，在verify()方法中，我们检查 <br><br>使用者名称与密码， 它传回一个字符串， &quot;failure&quot;表示登入错误， 并会设定错误信息， <br><br>而&quot;success&quot;表示登入正确，这个传回的字符串将决定页面的流程。&nbsp; <br><br>接下来我们修改一下 faces-config.xml&nbsp; 中的页面流程定义：&nbsp; <br><br>• faces-config.xml&nbsp; <br><br>&lt;?xml version=&quot;1.0&quot;?&gt;&nbsp; <br><br>&lt;!DOCTYPE faces-config PUBLIC&nbsp; <br><br>&quot;-//Sun Microsystems, Inc.//DTD JavaServer Faces Config 1.0//EN&quot;&nbsp; <br><br>&quot;<a href="http://java.sun.com/dtd/web-facesconfig_1_0.dtd&quot;&gt;&amp;nbsp" target="_blank" rel="external">http://java.sun.com/dtd/web-facesconfig_1_0.dtd&quot;&gt;&amp;nbsp</a>; <br><br>&lt;faces-config&gt;&nbsp; <br><br>&lt;navigation-rule&gt;&nbsp; <br><br>&lt;from-view-id&gt;/pages/index.jsp&lt;/from-view-id&gt;&nbsp; <br><br>&lt;navigation-case&gt;&nbsp; <br><br>&lt;from-outcome&gt;success&lt;/from-outcome&gt;&nbsp; <br><br>&lt;to-view-id&gt;/pages/welcome.jsp&lt;/to-view-id&gt;&nbsp; <br><br>&lt;/navigation-case&gt;&nbsp; <br><br>&lt;navigation-case&gt;&nbsp; <br><br>&lt;from-outcome&gt;failure&lt;/from-outcome&gt;&nbsp; <br><br>&lt;to-view-id&gt;/pages/index.jsp&lt;/to-view-id&gt;&nbsp; <br><br>&lt;/navigation-case&gt;&nbsp; <br><br>&lt;/navigation-rule&gt;&nbsp; <br><br>&lt;managed-bean&gt;&nbsp; <br><br>&lt;managed-bean-name&gt;user&lt;/managed-bean-name&gt;&nbsp; <br><br>&lt;managed-bean-class&gt;&nbsp; <br><br>onlyfun.caterpillar.UserBean&nbsp; <br><br>&lt;/managed-bean-class&gt;&nbsp; <br><br>&lt;managed-bean-scope&gt;session&lt;/managed-bean-scope&gt;&nbsp; <br><br>&lt;/managed-bean&gt;&nbsp; <br><br>&lt;/faces-config&gt;&nbsp; 根据上面的定义，当传回的字符串是&quot;success&quot;时，将前往 welcome.jsp，如果是 <br><br>&quot;failure&quot;的话，将送回 index.jsp。&nbsp; <br><br>接下来告诉网页设计人员Bean名称与相关属性，以及决定页面流程的verify名 <br><br>称，我们修改 index.jsp 如下：&nbsp; <br><br>• index.jsp&nbsp; <br><br>&lt;%@ taglib uri=&quot;<a href="http://java.sun.com/jsf/core&amp;quot" target="_blank" rel="external">http://java.sun.com/jsf/core&amp;quot</a>; prefix=&quot;f&quot; %&gt;&nbsp; <br><br>&lt;%@ taglib uri=&quot;<a href="http://java.sun.com/jsf/html&amp;quot" target="_blank" rel="external">http://java.sun.com/jsf/html&amp;quot</a>; prefix=&quot;h&quot; %&gt;&nbsp; <br><br>&lt;%@page contentType=&quot;text/html;charset=GB2312&quot;%&gt;&nbsp; <br><br>&lt;html&gt;&nbsp; <br><br>&lt;head&gt;&nbsp; <br><br>&lt;title&gt;第一个JSF程序&lt;/title&gt;&nbsp; <br><br>&lt;/head&gt;&nbsp; <br><br>&lt;body&gt;&nbsp; <br><br>&lt;f:view&gt;&nbsp; <br><br>&lt;h:form&gt;&nbsp; <br><br>&lt;h3&gt;请输入您的名称&lt;/h3&gt;&nbsp; <br><br>&lt;h:outputText value=&quot;#{user.errMessage}&quot;/&gt;&lt;p&gt;&nbsp; <br><br>名称: &lt;h:inputText value=&quot;#{user.name}&quot;/&gt;&lt;p&gt;&nbsp; <br><br>密码: &lt;h:inputSecret value=&quot;#{user.password}&quot;/&gt;&lt;p&gt;&nbsp; <br><br>&lt;h:commandButton value=&quot;送出&quot; action=&quot;#{user.verify}&quot;/&gt;&nbsp; <br><br>&lt;/h:form&gt;&nbsp; <br><br>&lt;/f:view&gt;&nbsp; <br><br>&lt;/body&gt;&nbsp; <br><br>&lt;/html&gt;&nbsp; <br><br>当要根据verify运行结果来决定页面流程时，action属性中使用 JSF Expression <br><br>Language &quot;#{user.verify}&quot;，如此JSF就知道必须根据verify传回的结果来导航页面。&nbsp; <br><br>&lt;h:outputText&gt;可以取出指定的Bean之属性&#20540;， 当使用者因验证错误而被送回原页面 <br><br>时，这个错误信息就可以显示在页面上。&nbsp; <br><br>1.4导航规则设置&nbsp; <br><br>在JSF中是根据faces-config.xml中&lt;navigation-rule&gt;设定， 以决定在符合的条件成 <br><br>立时，该连结至哪一个页面，一个基本的设定如下：&nbsp; <br><br>….&nbsp; <br><br>&lt;navigation-rule&gt;&nbsp; <br><br>&lt;from-view-id&gt;/pages/index.jsp&lt;/from-view-id&gt;&nbsp; <br><br>&lt;navigation-case&gt;&nbsp; <br><br>&lt;from-outcome&gt;success&lt;/from-outcome&gt;&nbsp; <br><br>&lt;to-view-id&gt;/pages/welcome.jsp&lt;/to-view-id&gt;&nbsp; <br><br>&lt;/navigation-case&gt;&nbsp; <br><br>&lt;navigation-case&gt;&nbsp; <br><br>&lt;from-outcome&gt;failure&lt;/from-outcome&gt;&nbsp; <br><br>&lt;to-view-id&gt;/pages/index.jsp&lt;/to-view-id&gt;&nbsp; <br><br>&lt;/navigation-case&gt;&nbsp; <br><br>&lt;/navigation-rule&gt;&nbsp; <br><br>….&nbsp; 对于JSF，每一个视图（View）都有一个独特的标识（identifier），称之为View <br><br>ID，在JSF中的View ID是从Web应用程序的环境相对路径开始计算，设定时都是以/ <br><br>作为开头，如果您请求时的路径是/pages/index.faces，则JSF会将文件名改为 <br><br>/pages/index.jsp，以此作为view-id。&nbsp; <br><br>在&lt;navigation-rule&gt;中的&lt;from-view-id&gt;是个选择性的定义，它规定了来源页面 <br><br>的条件，&lt;navigation-case&gt;中定义各种导览条件，&lt;from-outcome&gt;定义当表单结果符 <br><br>合条件时，各自该导向哪一个目的页面，目的页面是在&lt;to-view-id&gt;中定义。&nbsp; <br><br>您还可以在&lt;navigation-case&gt;中加入&lt;from-action&gt;，进一步规范表单结果必须根 <br><br>据哪一个动作方法（action method），当中是使用 JSF Expression Language 来设定， <br><br>例如：&nbsp; <br><br>….&nbsp; <br><br>&lt;navigation-rule&gt;&nbsp; <br><br>&lt;from-view-id&gt;/pages/index.jsp&lt;/from-view-id&gt;&nbsp; <br><br>&lt;navigation-case&gt;&nbsp; <br><br>&lt;from-action&gt;#{user.verify}&lt;/from-action&gt;&nbsp; <br><br>&lt;from-outcome&gt;success&lt;/from-outcome&gt;&nbsp; <br><br>&lt;to-view-id&gt;/pages/welcome.jsp&lt;/to-view-id&gt;&nbsp; <br><br>&lt;/navigation-case&gt;&nbsp; <br><br>….&nbsp; <br><br>&lt;/navigation-rule&gt;&nbsp; <br><br>….&nbsp; <br><br>在导航时，预定义都是使用forward的方式，您可以在&lt;navigation-case&gt;中加入 <br><br>一个&lt;redirect/&gt;，让JSF发出让浏览器重新导向（redirect）的header，让浏览器主动 <br><br>要求新网页，例如：&nbsp; <br><br>….&nbsp; <br><br>&lt;navigation-rule&gt;&nbsp; <br><br>&lt;from-view-id&gt;/pages/index.jsp&lt;/from-view-id&gt;&nbsp; <br><br>&lt;navigation-case&gt;&nbsp; <br><br>&lt;from-outcome&gt;success&lt;/from-outcome&gt;&nbsp; <br><br>&lt;to-view-id&gt;/pages/welcome.jsp&lt;/to-view-id&gt;&nbsp; <br><br>&lt;redirect/&gt;&nbsp; <br><br>&lt;/navigation-case&gt;&nbsp; <br><br>….&nbsp; <br><br>&lt;/navigation-rule&gt;&nbsp; <br><br>….&nbsp; <br><br>您的来源网页可能是某个特定模组，例如在/admin/下的页面，您可以在 <br><br>&lt;from-view-id&gt;中使用wildcards（通配符），也就是使用 <em> 字符，例如：&nbsp; <br><br>….&nbsp; <br><br>&lt;navigation-rule&gt;&nbspnbsp; <br><br>&lt;from-view-id&gt;/admin/</em>&lt;/from-view-id&gt;&nbsp; <br><br>&lt;navigation-case&gt;&nbsp; <br><br>&lt;from-action&gt;#{user.verify}&lt;/from-action&gt;&nbsp; <br><br>&lt;from-outcome&gt;success&lt;/from-outcome&gt;&nbsp; <br><br>&lt;to-view-id&gt;/pages/welcome.jsp&lt;/to-view-id&gt;&nbsp; <br><br>&lt;/navigation-case&gt;&nbsp; ….&nbsp; <br><br>&lt;/navigation-rule&gt;&nbsp; <br><br>….&nbsp; <br><br>在上面的设定中，只要来源网页是从/admin来的，都可以开始测试接下来的 <br><br>&lt;navigation-case&gt;。&nbsp; <br><br>&lt;from-view-id&gt;如果没有设定，表示来源网页不作限制，您也可以使用 <em> 显式 <br><br>的在定义文件中表明，例如：&nbsp; <br><br>….&nbsp; <br><br>&lt;navigation-rule&gt;&nbsp; <br><br>&lt;from-view-id&gt;/</em>&lt;/from-view-id&gt;&nbsp; <br><br>&lt;navigation-case&gt;&nbsp; <br><br>….&nbsp; <br><br>&lt;/navigation-rule&gt;&nbsp; <br><br>….&nbsp; <br><br>或者是这样：&nbsp; <br><br>….&nbsp; <br><br>&lt;navigation-rule&gt;&nbsp; <br><br>&lt;from-view-id&gt;<em>&lt;/from-view-id&gt;&nbsp; <br><br>&lt;navigation-case&gt;&nbsp; <br><br>….&nbsp; <br><br>&lt;/navigation-rule&gt;&nbsp; <br><br>….&nbsp; <br><br>1.5 JSF Expression Language&nbsp; <br><br>JSF Expression Language 搭配 JSF 标签来使用， 是用来存取数据对象的一个简 <br><br>易语言。&nbsp; <br><br>JSF EL是以#开始， 将变量或运算式放置在{…}之间， 例如：&nbsp; #{someBeanName}&nbsp; <br><br>变量名称可以是faces-config.xml中定义的名称，如果是Bean的话，可以通过使 <br><br>用 ‘.’ 运算符来存取它的属性，例如：&nbsp; <br><br>…&nbsp; <br><br>&lt;f:view&gt;&nbsp; <br><br>&lt;h:outputText value=&quot;#{userBean.name}&quot;/&gt;&nbsp; <br><br>&lt;/f:view&gt;&nbsp; <br><br>…&nbsp; <br><br>在JSF标签的属性上，&quot; … &quot;（或’…’）之间如果含有EL，则会加以运算，您也可 <br><br>以这么使用它：&nbsp; <br><br>…&nbsp; <br><br>&lt;f:view&gt;&nbsp; <br><br>名称, 年龄：&lt;h:outputText value=&quot;#{userBean.name}, #{userBean.age}&quot;/&gt;&nbsp; <br><br>&lt;/f:view&gt;&nbsp; <br><br>…&nbsp; <br><br>一个执行的结果可能是这样显示的：&nbsp; <br><br>名称, 年龄：Justin, 29&nbsp; <br><br>EL的变量名也可以是程序执行过程中所声明的名称，或是JSF EL预定义的隐含 <br><br>对象，例如下面的程序使用param隐含对象来取得使用者输入的参数：&nbsp; &lt;%@ taglib uri=&quot;<a href="http://java.sun.com/jsf/core&amp;quot" target="_blank" rel="external">http://java.sun.com/jsf/core&amp;quot</a>; prefix=&quot;f&quot; %&gt;&nbsp;<br><br><br>&lt;%@ taglib uri=&quot;<a href="http://java.sun.com/jsf/html&amp;quot" target="_blank" rel="external">http://java.sun.com/jsf/html&amp;quot</a>; prefix=&quot;h&quot; %&gt;&nbsp; <br><br>&lt;%@page contentType=&quot;text/html; charset=GB2312&quot;%&gt;&nbsp; <br><br>&lt;html&gt;&nbsp; <br><br>&lt;head&gt;&nbsp; <br><br>&lt;title&gt;&lt;/title&gt;&nbsp; <br><br>&lt;/head&gt;&nbsp; <br><br>&lt;body&gt;&nbsp; <br><br>&lt;f:view&gt;&nbsp; <br><br>&lt;b&gt; 您好, &lt;h:outputText value=&quot;#{param.name}&quot;/&gt; &lt;/b&gt;&nbsp; <br><br>&lt;/f:view&gt;&nbsp; <br><br>&lt;/body&gt;&nbsp; <br><br>&lt;/html&gt;&nbsp; <br><br>param是JSF EL预定义的隐含对象变量，它代表request所有参数的集合，实际是 <br><br>一个java.util.Map类型对象，JSF所提供的隐含对象，大致上对应于JSP隐含对象，不 <br><br>过JSF隐含对象移除了pageScope与pageContext，而增加了facesContext与view，它们 <br><br>分别对应于 javax.faces.context.FacesContext与javax.faces.component.UIViewRoot。&nbsp; <br><br>对于Map类型对象，我们可以使用 ‘.’ 运算符指定key&#20540;来取出对应的value，也 <br><br>可以使用 [ … ] 来指定，例如：&nbsp; <br><br>…&nbsp; <br><br>&lt;f:view&gt;&nbsp; <br><br>&lt;b&gt; 您好, &lt;h:outputText value=&quot;#{param[‘name’]}&quot;/&gt; &lt;/b&gt;&nbsp; <br><br>&lt;/f:view&gt;&nbsp; <br><br>…&nbsp; <br><br>在 [ … ] 之间，也可以放置其它的变量&#20540;，例如：&nbsp; <br><br>…&nbsp; <br><br>&lt;f:view&gt;&nbsp; <br><br>&lt;h:outputText value=&quot;#{someBean.someMap[user.name]}&quot;/&gt;&nbsp; <br><br>&lt;/f:view&gt;&nbsp; <br><br>…&nbsp; <br><br>如果变量是List类型或阵列的话，则可以在 […] 中指定索引，例如：&nbsp; <br><br>….&nbsp; <br><br>&lt;f:view&gt;&nbsp; <br><br>&lt;h:outputText value=&quot;#{someBean.someList[0]}&quot;/&gt;&nbsp; <br><br>&lt;h:outputText value=&quot;#{someBean.someArray[1]}&quot;/&gt;&nbsp; <br><br>&lt;h:outputText&nbsp; <br><br>value=&quot;#{someBean.someListOrArray[user.age]}&quot;/&gt;&nbsp; <br><br>&lt;/f:view&gt;&nbsp; <br><br>….&nbsp; <br><br>您也可以指定字面常数，对于true、false、字符串、数字，JSF EL会尝试进行转 <br><br>换，例如：&nbsp; <br><br>….&nbsp; <br><br>&lt;h:outputText value=&quot;#{true}&quot;/&gt;&nbsp; <br><br>….&nbsp; <br><br>&lt;h:outputText value=&quot;#{‘This is a test’}&quot;/&gt;&nbsp; ….&nbsp; <br><br>如果要输出字符串，必须以单引号 ‘ 或双引号 &quot; 括住，如此才不会被认为是 <br><br>变量名称。&nbsp; <br><br>在声明变量名称时，要留意不可与JSF的保留字或关键字同名，例如不可取以 <br><br>下这些名称：&nbsp; <br><br>true false null div mod and or not eq ne lt gt le ge instanceof empty&nbsp; <br><br>使用EL，您可以直接实行一些算术运算、逻辑运算与关系运算，其使用就如同 <br><br>在一般常见的程序语言中的运算。&nbsp; <br><br>算术运算符有：加法 (&#43;), 减法 (-), 乘法 (</em>), 除法 (/ or div) 与余除 (% or <br><br>mod) 。下面是算术运算的一些例子：&nbsp; <br><br>运算式&nbsp;&nbsp; 结果&nbsp; <br><br>#{1}&nbsp; 1&nbsp; <br><br>#{1 &#43; 2}&nbsp; 3&nbsp; <br><br>#{1.2 &#43; 2.3}&nbsp; 3.5&nbsp; <br><br>#{1.2E4 &#43; 1.4}&nbsp; 12001.4&nbsp; <br><br>#{-4 - 2}&nbsp; -6&nbsp; <br><br>#{21 <em> 2}&nbsp; 42&nbsp; <br><br>#{3/4}&nbsp; 0.75&nbsp; <br><br>#{3 div 4}&nbsp;&nbsp; 0.75，除法 <br><br>#{3/0}&nbsp; Infinity&nbsp; <br><br>#{10%4}&nbsp; 2&nbsp; <br><br>#{10 mod 4}&nbsp;&nbsp; 2，也是余除 <br><br>#{(1= =2) ? 3 : 4} 4&nbsp; <br><br>如同Java语法一样 ( expression ? result1 : result2）是个三元运算，expression为 <br><br>true显示result1，false显示result2。&nbsp; <br><br>逻辑运算有：and(或&amp;&amp;)、or(或!!)、not(或!)。一些例子为：&nbsp; <br><br>运算式&nbsp;&nbsp; 结果 <br><br>#{true and false} false <br><br>#{true or false} true <br><br>#{not true}&nbsp; false <br><br>关系运算有：小于Less-than (&lt; or lt)、大于Greater-than (&gt; or gt)、小于或等于 <br><br>Less-than-or-equal (&lt;= or le)、大于或等于Greater-than-or-equal (&gt;= or ge)、等于Equal <br><br>(= = or eq)、不等于Not Equal (!= or ne)，由英文名称可以得到lt、gt等运算符之缩写 <br><br>词，以下是Tomcat的一些例子：&nbsp; <br><br>运算式&nbsp;&nbsp; 结果 <br><br>#{1 &lt; 2}&nbsp; true <br><br>#{1 lt 2}&nbsp; true <br><br>#{1 &gt; (4/2)}&nbsp; false <br><br>#{1 &gt; (4/2)}&nbsp; false <br><br>#{4.0 &gt;= 3}&nbsp; true <br><br>#{4.0 ge 3}&nbsp; true <br><br>#{4 &lt;= 3}&nbsp; false <br><br>#{4 le 3}&nbsp; false #{100.0 == 100} true <br><br>#{100.0 eq 100}&nbsp; true <br><br>#{(10</em>10) != 100} false <br><br>#{(10<em>10) ne 100} false <br><br>左边是运算符的使用方式，右边的是运算结果，关系运算也可以用来比较字符 <br><br>或字符串，按字典顺序来决定比较结果，例如：&nbsp; <br><br>运算式&nbsp;&nbsp; 结果 <br><br>#{‘a’ &lt; ‘b’}&nbsp; true <br><br>#{‘hip’ &gt; ‘hit’} false <br><br>#{‘4’ &gt; 3}&nbsp; true <br><br>EL运算符的执行优先顺序与Java运算符对应，如果有疑虑的话，也可以使用括 <br><br>号( )来自行决定先后顺序。&nbsp; <br><br>1.6国际化信息&nbsp; <br><br>JSF的国际化（Internnationalization）信息处理是基于Java对国际化的支持，您 <br><br>可以在一个信息资源文件中统一管理信息资源，资源文件的名称是.properties，而内 <br><br>容是名称与&#20540;的配对，例如：&nbsp; <br><br>• messages.properties&nbsp; <br><br>titleText=JSF Demo&nbsp; <br><br>hintText=Please input your name and password&nbsp; <br><br>nameText=name&nbsp; <br><br>passText=password&nbsp; <br><br>commandText=Submit&nbsp; <br><br>资源文件名称由basename加上语言与地区来组成，例如：&nbsp; <br>
</em> basename.properties&nbsp; <br><br><em> basename_en.properties&nbsp; <br>
</em> basename_zh_CN.properties&nbsp; <br><br>没有指定语言与地区的basename是预定义的资源文件名称， JSF会根据浏览器送 <br><br>来的Accept-Language header中的内容来决定该使用哪一个资源文件名称，例如：&nbsp; <br><br>Accept-Language: zh_CN, en-US, en&nbsp; <br><br>如果浏览器送来这些header，则预定义会使用简体中文，接着是美式英文，再 <br><br>来是英文语系，如果找不到对应的信息资源文件，则会使用预定义的信息资源文件。&nbsp; <br><br>由于信息资源文件必须是ISO-8859-1编码，所以对于非西方语系的处理，必须 <br><br>先将之转换为Java Unicode Escape&#26684;式， 例如您可以先在信息资源文件中写下以下的 <br><br>内容：&nbsp; <br><br>• messages_zh_CN.txt&nbsp; <br><br>titleText=JSF示范&nbsp; <br><br>hintText=请输入名称与密码&nbsp; <br><br>nameText=名称&nbsp; <br><br>passText=密码&nbsp; <br><br>commandText=送出&nbsp; <br><br>然后使用JDK的工具程序native2ascii来转换，例如：&nbsp; <br><br>native2ascii -encoding GB2312 messages_zh_CN.txt messages_zh_CN.properties&nbsp; 转换后的内容会如下：&nbsp;<br><br><br>titleText=JSF\u793a\u8303&nbsp; <br><br>hintText=\u8bf7\u8f93\u5165\u540d\u79f0\u4e0e\u5bc6\u7801&nbsp; <br><br>nameText=\u540d\u79f0&nbsp; <br><br>passText=\u5bc6\u7801&nbsp; <br><br>commandText=\u9001\u51fa&nbsp; <br><br>接下来您可以使用&lt;f:loadBundle&gt;标签来指定载入信息资源，一个例子如下：&nbsp; <br><br>• index.jsp&nbsp; <br><br>&lt;%@ taglib uri=&quot;<a href="http://java.sun.com/jsf/core&amp;quot" target="_blank" rel="external">http://java.sun.com/jsf/core&amp;quot</a>; prefix=&quot;f&quot; %&gt;&nbsp; <br><br>&lt;%@ taglib uri=&quot;<a href="http://java.sun.com/jsf/html&amp;quot" target="_blank" rel="external">http://java.sun.com/jsf/html&amp;quot</a>; prefix=&quot;h&quot; %&gt;&nbsp; <br><br>&lt;%@page contentType=&quot;text/html;charset=UTF8&quot;%&gt;&nbsp; <br><br>&lt;f:view&gt;&nbsp; <br><br>&lt;f:loadBundle basename=&quot;messages&quot; var=&quot;msgs&quot;/&gt;&nbsp; <br><br>&lt;html&gt;&nbsp; <br><br>&lt;head&gt;&nbsp; <br><br>&lt;title&gt;&lt;h:outputText value=&quot;#{msgs.titleText}&quot;/&gt;&lt;/title&gt;&nbsp; <br><br>&lt;/head&gt;&nbsp; <br><br>&lt;body&gt;&nbsp; <br><br>&lt;h:form&gt;&nbsp; <br><br>&lt;h3&gt;&lt;h:outputText value=&quot;#{msgs.hintText}&quot;/&gt;&lt;/h3&gt;&nbsp; <br><br>&lt;h:outputText value=&quot;#{msgs.nameText}&quot;/&gt;:&nbsp; <br><br>&lt;h:inputText value=&quot;#{user.name}&quot;/&gt;&lt;p&gt;&nbsp; <br><br>&lt;h:outputText value=&quot;#{msgs.passText}&quot;/&gt;:&nbsp; <br><br>&lt;h:inputSecret value=&quot;#{user.password}&quot;/&gt;&lt;p&gt;&nbsp; <br><br>&lt;h:commandButton&nbsp; value=&quot;#{msgs.commandText}&quot;&nbsp; <br><br>actionListener=&quot;#{user.verify}&quot;&nbsp; <br><br>action=&quot;#{user.outcome}&quot;/&gt;&nbsp; <br><br>&lt;/h:form&gt;&nbsp; <br><br>&lt;/body&gt;&nbsp; <br><br>&lt;/html&gt;&nbsp; <br><br>&lt;/f:view&gt;&nbsp; <br><br>如此一来，如果您的浏览器预定义接受zh_CN语系的话，则页面上就可以显示 <br><br>中文，否则预定义将以英文显示，也就是messages.properties的内容，为了能显示多 <br><br>普通话系，我们设定网页编码为UTF8。&nbsp; <br><br>&lt;f:view&gt;可以设定locale属性，直接指定所要使用的语系，例如：&nbsp; <br><br>&lt;f:view locale=&quot;zh_CN&quot;&gt;&nbsp; <br><br>&lt;f:loadBundle basename=&quot;messages&quot; var=&quot;msgs&quot;/&gt;&nbsp; <br><br>直接指定以上的话，则会使用简体中文来显示，JSF会根据&lt;f:loadBundle&gt;的 <br><br>basename属性加上&lt;f:view&gt;的locale属性来决定要使用哪一个信息资源文件，就上例 <br><br>而言，就是使用 messages_zh_CN.properties，如果设定为以下的话，就会使用 <br><br>messages_en.properties：&nbsp; <br><br>&lt;f:view locale=&quot;en&quot;&gt;&nbsp; <br><br>&lt;f:loadBundle basename=&quot;messages&quot; var=&quot;msgs&quot;/&gt;&nbsp; <br><br>您也可以在faces-config.xml中设定语系，例如：&nbsp; <br><br>&lt;faces-config&gt;&nbsp; &lt;application&gt;&nbsp; <br><br>&lt;local-config&gt;&nbsp; <br><br>&lt;default-locale&gt;en&lt;/default-locale&gt;&nbsp; <br><br>&lt;supported-locale&gt;zh_CN&lt;/supported-locale&gt;&nbsp; <br><br>&lt;/local-config&gt;&nbsp; <br><br>&lt;/application&gt;&nbsp; <br><br>…..&nbsp; <br><br>&lt;/faces-config&gt;&nbsp; <br><br>在&lt;local-config&gt;一定有一个&lt;default-locale&gt;，而&lt;supported-locale&gt;可以有好几 <br><br>个，这告诉JSF您的应用程序支持哪些语系。&nbsp; <br><br>当然，如果您可以提供一个选项让使用者选择自己的语系会是更好的方式，例 <br><br>如根据user这个Bean的locale属性来决定页面语系：&nbsp; <br><br>&lt;f:view locale=&quot;#{user.locale}&quot;&gt;&nbsp; <br><br>&lt;f:loadBundle basename=&quot;messages&quot; var=&quot;msgs&quot;/&gt;&nbsp; <br><br>在页面中设定一个表单，可以让使用者选择语系，例如设定单选钮：&nbsp; <br><br>&lt;h:selectOneRadio value=&quot;#{user.locale}&quot;&gt;&nbsp; <br><br>&lt;f:selectItem itemValue=&quot;zh_CN&quot;&nbsp; <br><br>itemLabel=&quot;#{msgs.zh_CNText}&quot;/&gt;&nbsp; <br><br>&lt;f:selectItem itemValue=&quot;en&quot;&nbsp; <br><br>itemLabel=&quot;#{msgs.enText}&quot;/&gt;&nbsp; <br><br>&lt;/h:selectOneRadio&gt;&nbsp; <br><br><br><br>Managed Beans <br><br><br><br>2. Managed Beans&nbsp; <br><br>JSF 使用 Bean 来达到逻辑层与表现层分离的目的，Bean 的管理集中在配置 <br><br>文件中，您只要修改配置文件，就可以修改 Bean 之间的相依关系。&nbsp; <br><br>2.1 Backing Beans&nbsp; <br><br>JSF使用 JavaBean 来达到程序逻辑与视图分离的目的，在JSF中的Bean其角色 <br><br>是属于Backing Bean，又称之为Glue Bean，其作用是在真正的业务逻辑Bean及UI组 <br><br>件之间搭起桥梁，在Backing Bean中会呼叫业务逻辑Bean处理使用者的请求，或者 <br><br>是将业务处理结果放置其中，等待UI组件取出当中的&#20540;并显示结果给使用者。&nbsp; <br><br>JSF将Bean的管理集中在faces-config.xml中，一个例子如下：&nbsp; <br><br>….&nbsp; <br><br>&lt;managed-bean&gt;&nbsp; <br><br>&lt;managed-bean-name&gt;user&lt;/managed-bean-name&gt;&nbsp; <br><br>&lt;managed-bean-class&gt;&nbsp; <br><br>onlyfun.caterpillar.UserBean&nbsp; <br><br>&lt;/managed-bean-class&gt;&nbsp; <br><br>&lt;managed-bean-scope&gt;session&lt;/managed-bean-scope&gt;&nbsp; <br><br>&lt;/managed-bean&gt;&nbsp; <br><br>….&nbsp; <br><br>这个例子我们在第一个JSF程序看过，&lt;managed-bean-class&gt;设定所要使用的 <br><br>Bean类，&lt;managed-bean-name&gt;设定名称，可供我们在JSF页面上使用Expression <br><br>Language来取得或设定Bean的属性，例如： &lt;h:inputText value=&quot;#{user.name}&quot;/&gt;&nbsp; <br><br>&lt;managed-bean-scope&gt;设定Bean的存活范围，您可以设定为request、session 与 <br><br>application，设定为request时，Bean的存活时间为请求阶段，设定为session则在使用 <br><br>者与应用程序交互开始，直到关闭浏览器或显式的结束会话为止（例如登出程序）， <br><br>设定为application的话，则Bean会一直存活，直到应用程序关闭为止。&nbsp; <br><br>您还可以将存活范围设定为none，当设定为none时会在需要的时候生成一个新 <br><br>的Bean， 例如您在一个method中想要生成一个临时的Bean， 就可以将之设定为none。&nbsp; <br><br>在JSF页面上要取得Bean的属性，是使用 JSF表示语言 (Expression Language)， <br><br>要注意到的事，JSF表示语言是写成#{expression}，而 JSP表示语言是写成 <br><br>${expression}，因为表示层可能是使用JSP，所以必须特别区分，另外要注意的是， <br><br>JSF的标签上的属性设定时，只接受JSF表示语言。&nbsp; <br><br>2.2 Beans的配置与设定&nbsp; <br><br>JSF预定义会读取faces-config.xml中关于Bean的定义， 如果想要自行设置定义文 <br><br>件的名称，我们是在web.xml中提供javax.faces.CONFIG_FILES参数，例如：&nbsp; <br><br>&lt;web-app&gt;&nbsp; <br><br>&lt;context-param&gt;&nbsp; <br><br>&lt;param-name&gt;javax.faces.CONFIG_FILES&lt;/param-name&gt;&nbsp; <br><br>&lt;param-value&gt;/WEB-INF/beans.xml&lt;/param-value&gt;&nbsp; &lt;/context-param&gt;&nbsp; <br><br>…&nbsp; <br><br>&lt;/web-app&gt;&nbsp; <br><br>定义文件可以有多个，中间以 &quot;,&quot; 区隔，例如：&nbsp; <br><br>/WEB-INF/navigation.xml,/WEB-INF/beans.xml&nbsp; <br><br>一个Bean最基本要定义Bean的名称、类与存活范围，例如：&nbsp; <br><br>….&nbsp; <br><br>&lt;managed-bean&gt;&nbsp; <br><br>&lt;managed-bean-name&gt;user&lt;/managed-bean-name&gt;&nbsp; <br><br>&lt;managed-bean-class&gt;&nbsp; <br><br>onlyfun.caterpillar.UserBean&nbsp; <br><br>&lt;/managed-bean-class&gt;&nbsp; <br><br>&lt;managed-bean-scope&gt;session&lt;/managed-bean-scope&gt;&nbsp; <br><br>&lt;/managed-bean&gt;&nbsp; <br><br>….&nbsp; <br><br>如果要在其它类中取得Bean对象，则可以先取得javax.faces.context.FacesContext，它 <br><br>代表了JSF目前的执行环境对象，接着尝试取得javax.faces.el.ValueBinding对象，从 <br><br>中取得指定的Bean对象，例如：&nbsp; <br><br>FacesContext context = FacesContext.getCurrentInstance();&nbsp; <br><br>ValueBinding binding = context.getApplication().createValueBinding(&quot;#{user}&quot;);&nbsp; <br><br>UserBean user = (UserBean) binding.getValue(context);&nbsp; <br><br>如果只是要尝试取得Bean的某个属性，则可以如下：&nbsp; <br><br>FacesContext context = FacesContext.getCurrentInstance();&nbsp; <br><br>ValueBinding binding=context.getApplication().createValueBinding(&quot;#{user.name}&quot;);<br><br><br>String name = (String) binding.getValue(context);&nbsp; <br><br>如果有必要在启始Bean时，自动设置属性的初始&#20540;，则可以如下设定：&nbsp; <br><br>….&nbsp; <br><br>&lt;managed-bean&gt;&nbsp; <br><br>&lt;managed-bean-name&gt;user&lt;/managed-bean-name&gt;&nbsp; <br><br>&lt;managed-bean-class&gt;&nbsp; <br><br>onlyfun.caterpillar.UserBean&nbsp; <br><br>&lt;/managed-bean-class&gt;&nbsp; <br><br>&lt;managed-bean-scope&gt;session&lt;/managed-bean-scope&gt;&nbsp; <br><br>&lt;managed-property&gt;&nbsp; <br><br>&lt;property-name&gt;name&lt;/property-name&gt;&nbsp; <br><br>&lt;value&gt;caterpillar&lt;/value&gt;&nbsp; <br><br>&lt;/managed-property&gt;&nbsp; <br><br>&lt;managed-property&gt;&nbsp; <br><br>&lt;property-name&gt;password&lt;/property-name&gt;&nbsp; <br><br>&lt;value&gt;123456&lt;/value&gt;&nbsp; &lt;/managed-property&gt;&nbsp; <br><br>&lt;/managed-bean&gt;&nbsp; <br><br>….&nbsp; <br><br>如果要设定属性为 null &#20540;，则可以使用&lt;null-value/&gt;标签，例如：&nbsp; <br><br>….&nbsp; <br><br>&lt;managed-property&gt;&nbsp; <br><br>&lt;property-name&gt;name&lt;/property-name&gt;&nbsp; <br><br>&lt;null-value/&gt;&nbsp; <br><br>&lt;/managed-property&gt;&nbsp; <br><br>&lt;managed-property&gt;&nbsp; <br><br>&lt;property-name&gt;password&lt;/property-name&gt;&nbsp; <br><br>&lt;null-value/&gt;&nbsp; <br><br>&lt;/managed-property&gt;&nbsp; <br><br>….&nbsp; <br><br>当然，您的属性不一定是字符串&#20540;，也许会是int、float、boolean等等类型，您 <br><br>可以设定&lt;value&gt; &#20540;时指定这些&#20540;的字符串名称，JSF会尝试进行转换，例如设定为 <br><br>true时，会尝试使用Boolean.valueOf()方法转换为boolean的 true，以下是一些可能进 <br><br>行的转换：&nbsp; <br><br>类型&nbsp;&nbsp; 转换&nbsp; <br><br>short、int、long、float、double、byte， <br><br>或相应的Wrapper类&nbsp; <br><br>尝试使用Wrapper的valueOf()进行转换， 如果 <br><br>没有设置，则设为0&nbsp; <br><br>boolean 或 Boolean&nbsp; <br><br>尝试使用Boolean.valueOf()进行转换， 如果没 <br><br>有设置，则设为false&nbsp; <br><br>char 或 Character&nbsp; <br><br>取设置的第一个字符，如果没有设置，则设 <br><br>为0&nbsp; <br><br>String 或 Object&nbsp; <br><br>即设定的字符串&#20540;，如果没有设定，则为空 <br><br>字符串new String(&quot;&quot;)&nbsp; <br><br>您也可以将其它产生的Bean设定给另一个Bean的属性，例如：&nbsp; <br><br>….&nbsp; <br><br>&lt;managed-bean&gt;&nbsp; <br><br>&lt;managed-bean-name&gt;user&lt;/managed-bean-name&gt;&nbsp; <br><br>&lt;managed-bean-class&gt;&nbsp; <br><br>onlyfun.caterpillar.UserBean&nbsp; <br><br>&lt;/managed-bean-class&gt;&nbsp; <br><br>&lt;managed-bean-scope&gt;session&lt;/managed-bean-scope&gt;&nbsp; <br><br>&lt;/managed-bean&gt;&nbsp; <br><br>&lt;managed-bean&gt;&nbsp; <br><br>&lt;managed-bean-name&gt;other&lt;/managed-bean-name&gt;&nbsp; <br><br>&lt;managed-bean-class&gt;&nbsp; <br><br>onlyfun.caterpillar.OtherBean&nbsp; &lt;/managed-bean-class&gt;&nbsp; <br><br>&lt;managed-bean-scope&gt;session&lt;/managed-bean-scope&gt;&nbsp; <br><br>&lt;managed-property&gt;&nbsp; <br><br>&lt;property-name&gt;user&lt;/property-name&gt;&nbsp; <br><br>&lt;value&gt;#{user}&lt;/value&gt;&nbsp; <br><br>&lt;/managed-property&gt;&nbsp; <br><br>&lt;/managed-bean&gt;&nbsp; <br><br>….&nbsp; <br><br>在上面的设定中，在OtherBean中的user属性，接受一个UserBean类型的对象， <br><br>我们设定为前一个名称为user的UserBean对象。&nbsp; <br><br>2.3 Beans上的List, Map&nbsp; <br><br>如果您的Bean上有接受List或Map类型的属性， 则您也可以在配置文件中直接设 <br><br>定这些属性的&#20540;，一个例子如下：&nbsp; <br><br>….&nbsp; <br><br>&lt;managed-bean&gt;&nbsp; <br><br>&lt;managed-bean-name&gt;someBean&lt;/managed-bean-name&gt;&nbsp; <br><br>&lt;managed-bean-class&gt;&nbsp; <br><br>onlyfun.caterpillar.SomeBean&nbsp; <br><br>&lt;/managed-bean-class&gt;&nbsp; <br><br>&lt;managed-bean-scope&gt;session&lt;/managed-bean-scope&gt;&nbsp; <br><br>&lt;managed-property&gt;&nbsp; <br><br>&lt;property-name&gt;someProperty&lt;/property-name&gt;&nbsp; <br><br>&lt;list-entries&gt;&nbsp; <br><br>&lt;value-class&gt;java.lang.Integer&lt;/value-class&gt;&nbsp; <br><br>&lt;value&gt;1&lt;/value&gt;&nbsp; <br><br>&lt;value&gt;2&lt;/value&gt;&nbsp; <br><br>&lt;value&gt;3&lt;/value&gt;&nbsp; <br><br>&lt;/list-entries&gt;&nbsp; <br><br>&lt;/managed-property&gt;&nbsp; <br><br>&lt;/managed-bean&gt;&nbsp; <br><br>….&nbsp; <br><br>这是一个设定接受List类型的属性，我们使用&lt;list-entries&gt;标签指定将设定一个 <br><br>List对象，其中&lt;value-class&gt;指定将存入List的类型，而&lt;value&gt;指定其&#20540;，如果是基 <br><br>本类型，则会尝试使用指定的 &lt;value-class&gt;来作Wrapper类。&nbsp; <br><br>设定Map的话，则是使用&lt;map-entries&gt;标签，例如：&nbsp; <br><br>….&nbsp; <br><br>&lt;managed-bean&gt;&nbsp; <br><br>&lt;managed-bean-name&gt;someBean&lt;/managed-bean-name&gt;&nbsp; <br><br>&lt;managed-bean-class&gt;&nbsp; <br><br>onlyfun.caterpillar.SomeBean&nbsp; <br><br>&lt;/managed-bean-class&gt;&nbsp; &lt;managed-bean-scope&gt;session&lt;/managed-bean-scope&gt;&nbsp; <br><br>&lt;managed-property&gt;&nbsp; <br><br>&lt;property-name&gt;someProperty&lt;/property-name&gt;&nbsp; <br><br>&lt;map-entries&gt;&nbsp; <br><br>&lt;value-class&gt;java.lang.Integer&lt;/value-class&gt;&nbsp; <br><br>&lt;map-entry&gt;&nbsp; <br><br>&lt;key&gt;someKey1&lt;/key&gt;&nbsp; <br><br>&lt;value&gt;100&lt;/value&gt;&nbsp; <br><br>&lt;/map-entry&gt;&nbsp; <br><br>&lt;map-entry&gt;&nbsp; <br><br>&lt;key&gt;someKey2&lt;/key&gt;&nbsp; <br><br>&lt;value&gt;200&lt;/value&gt;&nbsp; <br><br>&lt;/map-entry&gt;&nbsp; <br><br>&lt;/map-entries&gt;&nbsp; <br><br>&lt;/managed-property&gt;&nbsp; <br><br>&lt;/managed-bean&gt;&nbsp; <br><br>….&nbsp; <br><br>由于Map对象是以key-value对的方式来存入，所以我们在每一个&lt;map-entry&gt;中 <br><br>使用&lt;key&gt;与&lt;value&gt;标签来分别指定。&nbsp; <br><br>您也可以直接像设定Bean一样，设定一个List或Map对象，例如在JSF的范例中， <br><br>有这样的设定：&nbsp; <br><br>….&nbsp; <br><br>&lt;managed-bean&gt;&nbsp; <br><br>&lt;description&gt;&nbsp; <br><br>Special expense item types&nbsp; <br><br>&lt;/description&gt;&nbsp; <br><br>&lt;managed-bean-name&gt;specialTypes&lt;/managed-bean-name&gt;&nbsp; <br><br>&lt;managed-bean-class&gt;&nbsp; <br><br>java.util.TreeMap&nbsp; <br><br>&lt;/managed-bean-class&gt;&nbsp; <br><br>&lt;managed-bean-scope&gt;application&lt;/managed-bean-scope&gt;&nbsp; <br><br>&lt;map-entries&gt;&nbsp; <br><br>&lt;value-class&gt;java.lang.Integer&lt;/value-class&gt;&nbsp; <br><br>&lt;map-entry&gt;&nbsp; <br><br>&lt;key&gt;Presentation Material&lt;/key&gt;&nbsp; <br><br>&lt;value&gt;100&lt;/value&gt;&nbsp; <br><br>&lt;/map-entry&gt;&nbsp; <br><br>&lt;map-entry&gt;&nbsp; <br><br>&lt;key&gt;Software&lt;/key&gt;&nbsp; <br><br>&lt;value&gt;101&lt;/value&gt;&nbsp; <br><br>&lt;/map-entry&gt;&nbsp; <br><br>&lt;map-entry&gt;&nbsp; <br><br>&lt;key&gt;Balloons&lt;/key&gt;&nbsp; &lt;value&gt;102&lt;/value&gt;&nbsp; <br><br>&lt;/map-entry&gt;&nbsp; <br><br>&lt;/map-entries&gt;&nbsp; <br><br>&lt;/managed-bean&gt;&nbsp; <br><br>….&nbsp; <br><br>而范例中另一个设定List的例子如下：&nbsp; <br><br>….&nbsp; <br><br>&lt;managed-bean&gt;&nbsp; <br><br>&lt;managed-bean-name&gt;statusStrings&lt;/managed-bean-name&gt;&nbsp; <br><br>&lt;managed-bean-class&gt;&nbsp; <br><br>java.util.ArrayList&nbsp; <br><br>&lt;/managed-bean-class&gt;&nbsp; <br><br>&lt;managed-bean-scope&gt;request&lt;/managed-bean-scope&gt;&nbsp; <br><br>&lt;list-entries&gt;&nbsp; <br><br>&lt;null-value/&gt;&nbsp; <br><br>&lt;value&gt;Open&lt;/value&gt;&nbsp; <br><br>&lt;value&gt;Submitted&lt;/value&gt;&nbsp; <br><br>&lt;value&gt;Accepted&lt;/value&gt;&nbsp; <br><br>&lt;value&gt;Rejected&lt;/value&gt;&nbsp; <br><br>&lt;/list-entries&gt;&nbsp; <br><br>&lt;/managed-bean&gt;&nbsp; <br><br>….&nbsp; <br><br>数据转换与验证 <br><br><br><br>3.&nbsp; 数据转换与验证&nbsp; <br><br>转换器（Converter）协助模型与视图之间的数据转换，验证器（Validator） <br><br>协助进行语意检验（Semantic Validation）。&nbsp; <br><br>3.1&nbsp; 标准转换器&nbsp; <br><br>Web应用程序与浏览器之间是使用HTTP进行沟通，所有传送的数据基本上 <br><br>都是字符串文字，而Java应用程序本身基本上则是对象，所以对象数据必须经由 <br><br>转换传送给浏览器，而浏览器送来的数据也必须转换为对象才能使用。&nbsp; <br><br>JSF定义了一系列标准的转换器（Converter），对于基本数据类型（primitive <br><br>type）或是其Wrapper类，JSF会使用javax.faces.Boolean、javax.faces.Byte、 <br><br>javax.faces.Character、javax.faces.Double、javax.faces.Float、 javax.faces.Integer、 <br><br>javax.faces.Long、 javax.faces.Short等自动进行转换， 对于 BigDecimal、 BigInteger， <br><br>则会使用javax.faces.BigDecimal、javax.faces.BigInteger自动进行转换。&nbsp; <br><br>至于DateTime、Number，我们可以使用&lt;f:convertDateTime&gt;、 <br><br>&lt;f:convertNumber&gt;标签进行转换，它们各自提供有一些简单的属性，可以让我们 <br><br>在转换时指定一些转换的&#26684;式细节。&nbsp; <br><br>来看个简单的例子，首先我们定义一个简单的Bean：&nbsp; <br><br>• UserBean.java&nbsp; <br><br>package onlyfun.caterpillar;&nbsp; <br><br>import java.util.Date;&nbsp; <br><br>public class UserBean {&nbsp; <br><br>private Date date = new Date();&nbsp; <br><br>public Date getDate() {&nbsp; <br><br>return date;&nbsp; <br><br>}&nbsp; <br><br>public void setDate(Date date) {&nbsp; <br><br>this.date = date;&nbsp; <br><br>}&nbsp; <br><br>}&nbsp; <br><br>这个Bean的属性接受Date类型的参数，按理来说，接收到HTTP传来的数据 <br><br>中若有相关的日期信息，我们必须剖析这个信息，再转换为Date对象，然而我们 <br><br>可以使用JSF的标准转换器来协助这项工作，例如：&nbsp; <br><br>• index.jsp&nbsp; <br><br>&lt;%@ taglib uri=&quot;<a href="http://java.sun.com/jsf/core&amp;quot" target="_blank" rel="external">http://java.sun.com/jsf/core&amp;quot</a>; prefix=&quot;f&quot; %&gt;&nbsp; <br><br>&lt;%@ taglib uri=&quot;<a href="http://java.sun.com/jsf/html&amp;quot" target="_blank" rel="external">http://java.sun.com/jsf/html&amp;quot</a>; prefix=&quot;h&quot; %&gt;&nbsp; <br><br>&lt;%@page contentType=&quot;text/html;charset=GB2312&quot;%&gt;&nbsp; <br><br>&lt;f:view&gt;&nbsp; <br><br>&lt;html&gt;&nbsp; <br><br>&lt;head&gt;&nbsp; &lt;title&gt;转换器示范&lt;/title&gt;&nbsp; <br><br>&lt;/head&gt;&nbsp; <br><br>&lt;body&gt;&nbsp; <br><br>设定的日期是：&nbsp; <br><br>&lt;b&gt;&nbsp; <br><br>&lt;h:outputText value=&quot;#{user.date}&quot;&gt;&nbsp; <br><br>&lt;f:convertDateTime pattern=&quot;dd/MM/yyyy&quot;/&gt;&nbsp; <br><br>&lt;/h:outputText&gt;&nbsp; <br><br>&lt;/b&gt;&nbsp; <br><br>&lt;h:form&gt;&nbsp; <br><br>&lt;h:inputText id=&quot;dateField&quot; value=&quot;#{user.date}&quot;&gt;&nbsp; <br><br>&lt;f:convertDateTime pattern=&quot;dd/MM/yyyy&quot;/&gt;&nbsp; <br><br>&lt;/h:inputText&gt;&nbsp; <br><br>&lt;h:message for=&quot;dateField&quot; style=&quot;color:red&quot;/&gt;&nbsp; <br><br>&lt;br&gt;&nbsp; <br><br>&lt;h:commandButton value=&quot;送出&quot; action=&quot;show&quot;/&gt;&nbsp; <br><br>&lt;/h:form&gt;&nbsp; <br><br>&lt;/body&gt;&nbsp; <br><br>&lt;/html&gt;&nbsp; <br><br>&lt;/f:view&gt;&nbsp; <br><br>在&lt;f:convertDateTime&gt;中，我们使用pattern指定日期的样式为dd/MM/yyyy， <br><br>即「日/月/公元」&#26684;式，如果转换错误，则&lt;h:message&gt;可以显示错误信息，for <br><br>属性参考至&lt;h:inputText&gt; 的id属性，表示将有关dateField的错误信息显示出来。&nbsp; <br><br>假设faces-config.xml是这样定义的：&nbsp; <br><br>• faces-config.xml&nbsp; <br><br>&lt;?xml version=&quot;1.0&quot;?&gt;&nbsp; <br><br>&lt;!DOCTYPE faces-config PUBLIC&nbsp; <br><br>&quot;-//Sun Microsystems, Inc.//DTD JavaServer Faces Config 1.0//EN&quot;&nbsp; <br><br>&quot;<a href="http://java.sun.com/dtd/web-facesconfig_1_0.dtd&quot;&gt;&amp;nbsp" target="_blank" rel="external">http://java.sun.com/dtd/web-facesconfig_1_0.dtd&quot;&gt;&amp;nbsp</a>; <br><br>&lt;faces-config&gt;&nbsp; <br><br>&lt;navigation-rule&gt;&nbsp; <br><br>&lt;from-view-id&gt;/<em>&lt;/from-view-id&gt;&nbsp; <br><br>&lt;navigation-case&gt;&nbsp; <br><br>&lt;from-outcome&gt;show&lt;/from-outcome&gt;&nbsp; <br><br>&lt;to-view-id&gt;/pages/index.jsp&lt;/to-view-id&gt;&nbsp; <br><br>&lt;/navigation-case&gt;&nbsp; <br><br>&lt;/navigation-rule&gt;&nbsp; <br><br>&lt;managed-bean&gt;&nbsp; <br><br>&lt;managed-bean-name&gt;user&lt;/managed-bean-name&gt;&nbsp; <br><br>&lt;managed-bean-class&gt;&nbsp; <br><br>onlyfun.caterpillar.UserBean&nbsp; <br><br>&lt;/managed-bean-class&gt;&nbsp; <br><br>&lt;managed-bean-scope&gt;session&lt;/managed-bean-scope&gt;&nbsp; <br><br>&lt;/managed-bean&gt;&nbsp; &lt;/faces-config&gt;&nbsp; <br><br>首次连上页面时显示的画面如下：&nbsp; <br><br><br><br>如您所看到的，转换器自动依pattern设定的样式将Date对象&#26684;式化了，当您 <br><br>依&#26684;式输入数据并提交后，转换器也会自动将您输入的数据转换为Date对象，如 <br><br>果转换时发生错误，则会出现以下的信息：&nbsp; <br><br><br><br>&lt;f:convertDateTime&gt;标签还有几个可用的属性，您可以参考 Tag Library <br><br>Documentation 的说明，而依照类&#20284;的方式，您也可以使用&lt;f:convertNumber&gt;来 <br><br>转换数&#20540;。&nbsp; <br><br>您还可以参考 Using the Standard Converters 这篇文章中有关于标准转换器 <br><br>的说明。&nbsp; <br><br>3.2自定义转换器&nbsp; <br><br>除了使用标准的转换器之外，您还可以自行定制您的转换器，您可以实现 <br><br>javax.faces.convert.Converter接口，这个接口有两个要实现的方法：&nbsp; <br><br>public Object getAsObject(FacesContext context, UIComponent component, String <br><br>str);&nbsp; <br><br>public String getAsString(FacesContext context, UIComponent component, Object <br><br>obj);&nbsp; <br><br>简单的说，第一个方法会接收从客户端经由HTTP传来的字符串数据，您在 <br><br>第一个方法中将之转换为您的自定义对象， 这个自定义对象将会自动设定给您指 <br><br>定的Bean对象；第二个方法就是将从您的Bean对象得到的对象转换为字符串， <br><br>如此才能由HTTP传回给客户端。&nbsp; <br><br>直接以一个简单的例子来作说明，假设您有一个User类：&nbsp; <br><br>• User.java&nbsp; <br><br>package onlyfun.caterpillar;&nbsp; <br><br>public class User {&nbsp; <br><br>private String firstName;&nbsp; <br><br>private String lastName;&nbsp; <br><br>public String getFirstName() {&nbsp; <br><br>return firstName;&nbsp; <br><br>}&nbsp; <br><br>public void setFirstName(String firstName) {&nbsp; <br><br>this.firstName = firstName;&nbsp; <br><br>}&nbsp; public String getLastName() {&nbsp; <br><br>return lastName;&nbsp; <br><br>}&nbsp; <br><br>public void setLastName(String lastName) {&nbsp; <br><br>this.lastName = lastName;&nbsp; <br><br>}&nbsp; <br><br>}&nbsp; <br><br>这个User类是我们转换器的目标对象，而您有一个GuestBean类：&nbsp; <br><br>• GuestBean.java&nbsp; <br><br>package onlyfun.caterpillar;&nbsp; <br><br>public class GuestBean {&nbsp; <br><br>private User user;&nbsp; <br><br>public void setUser(User user) {&nbsp; <br><br>this.user = user;&nbsp; <br><br>}&nbsp; <br><br>public User getUser() {&nbsp; <br><br>return user;&nbsp; <br><br>}&nbsp; <br><br>}&nbsp; <br><br>这个Bean上的属性直接传回或接受User类型的参数， 我们来实现一个简单的 <br><br>转换器，为HTTP字符串与User对象进行转换：&nbsp; <br><br>• UserConverter.java&nbsp; <br><br>package onlyfun.caterpillar;&nbsp; <br><br>import javax.faces.component.UIComponent;&nbsp; <br><br>import javax.faces.context.FacesContext;&nbsp; <br><br>import javax.faces.convert.Converter;&nbsp; <br><br>import javax.faces.convert.ConverterException;&nbsp; <br><br>public class UserConverter implements Converter {&nbsp; <br><br>public Object getAsObject(FacesContext context, UIComponent component,&nbsp; <br><br>String str) throws ConverterException {&nbsp; <br><br>String[] strs = str.split(&quot;,&quot;);&nbsp; <br><br>User user = new User();&nbsp; <br><br>try {&nbsp; <br><br>user.setFirstName(strs[0]);&nbsp; <br><br>user.setLastName(strs[1]);&nbsp; <br><br>} catch(Exception e) {&nbsp; <br><br>// 转换错误，简单的丢出例外&nbsp; <br><br>throw new ConverterException();&nbsp; <br><br>}&nbsp; <br><br>return user;&nbsp; <br><br>}&nbsp; <br><br>public String getAsString(FacesContext context, UIComponent component,&nbsp; <br><br>Object obj) throws ConverterException {&nbsp; <br><br>String firstName = ((User) obj).getFirstName();&nbsp; String lastName = ((User) obj).getLastName();&nbsp;<br><br><br>return firstName &#43; &quot;,&quot; &#43; lastName;&nbsp; <br><br>}&nbsp; <br><br>}&nbsp; <br><br>实现完成这个转换器，我们要告诉JSF这件事，这是在faces-config.xml中完成注 <br><br>册：&nbsp; <br><br>• faces-config.xml&nbsp; <br><br>&lt;?xml version=&quot;1.0&quot;?&gt;&nbsp; <br><br>&lt;!DOCTYPE faces-config PUBLIC&nbsp; <br><br>&quot;-//Sun Microsystems, Inc.//DTD JavaServer Faces Config 1.0//EN&quot;&nbsp; <br><br>&quot;<a href="http://java.sun.com/dtd/web-facesconfig_1_0.dtd&quot;&gt;&amp;nbsp" target="_blank" rel="external">http://java.sun.com/dtd/web-facesconfig_1_0.dtd&quot;&gt;&amp;nbsp</a>; <br><br>&lt;faces-config&gt;&nbsp; <br><br>&lt;navigation-rule&gt;&nbsp; <br><br>&lt;from-view-id&gt;/</em>&lt;/from-view-id&gt;&nbsp; <br><br>&lt;navigation-case&gt;&nbsp; <br><br>&lt;from-outcome&gt;show&lt;/from-outcome&gt;&nbsp; <br><br>&lt;to-view-id&gt;/pages/index.jsp&lt;/to-view-id&gt;&nbsp; <br><br>&lt;/navigation-case&gt;&nbsp; <br><br>&lt;/navigation-rule&gt;&nbsp; <br><br>&lt;converter&gt;&nbsp; <br><br>&lt;converter-id&gt;onlyfun.caterpillar.User&lt;/converter-id&gt;&nbsp; <br><br>&lt;converter-class&gt;&nbsp; <br><br>onlyfun.caterpillar.UserConverter&nbsp; <br><br>&lt;/converter-class&gt;&nbsp; <br><br>&lt;/converter&gt;&nbsp; <br><br>&lt;managed-bean&gt;&nbsp; <br><br>&lt;managed-bean-name&gt;guest&lt;/managed-bean-name&gt;&nbsp; <br><br>&lt;managed-bean-class&gt;&nbsp; <br><br>onlyfun.caterpillar.GuestBean&nbsp; <br><br>&lt;/managed-bean-class&gt;&nbsp; <br><br>&lt;managed-bean-scope&gt;session&lt;/managed-bean-scope&gt;&nbsp; <br><br>&lt;/managed-bean&gt;&nbsp; <br><br>&lt;/faces-config&gt;&nbsp; <br><br>注册转换器时，需提供转换器标识（Converter ID）与转换器类，接下来要 <br><br>在JSF页面中使用转换器的话，就是指定所要使用的转换器标识，例如：&nbsp; <br><br>• index.jsp&nbsp; <br><br>&lt;%@ taglib uri=&quot;<a href="http://java.sun.com/jsf/core&amp;quot" target="_blank" rel="external">http://java.sun.com/jsf/core&amp;quot</a>; prefix=&quot;f&quot; %&gt;&nbsp; <br><br>&lt;%@ taglib uri=&quot;<a href="http://java.sun.com/jsf/html&amp;quot" target="_blank" rel="external">http://java.sun.com/jsf/html&amp;quot</a>; prefix=&quot;h&quot; %&gt;&nbsp; <br><br>&lt;%@page contentType=&quot;text/html;charset=GB2312&quot;%&gt;&nbsp; <br><br>&lt;f:view&gt;&nbsp; <br><br>&lt;html&gt;&nbsp; <br><br>&lt;head&gt;&nbsp; <br><br>&lt;title&gt;自定义转换器&lt;/title&gt;&nbsp; <br><br>&lt;/head&gt;&nbsp; &lt;body&gt;&nbsp; <br><br>Guest名称是：&lt;b&gt;&nbsp; <br><br>&lt;h:outputText value=&quot;#{guest.user}&quot; converter=&quot;onlyfun.caterpillar.User&quot;/&gt;&nbsp; <br><br>&lt;/b&gt;&nbsp; <br><br>&lt;h:form&gt;&nbsp; <br><br>&lt;h:inputText id=&quot;userField&quot; value=&quot;#{guest.user}&quot;&nbsp; <br><br>converter=&quot;onlyfun.caterpillar.User&quot;/&gt;&nbsp; <br><br>&lt;h:message for=&quot;userField&quot; style=&quot;color:red&quot;/&gt;&nbsp; <br><br>&lt;br&gt;&nbsp; <br><br>&lt;h:commandButton value=&quot;送出&quot; action=&quot;show&quot;/&gt;&nbsp; <br><br>&lt;/h:form&gt;&nbsp; <br><br>&lt;/body&gt;&nbsp; <br><br>&lt;/html&gt;&nbsp; <br><br>&lt;/f:view&gt;&nbsp; <br><br>您也可以用&lt;f:converter&gt;标签并使用converterId属性来指定转换器，例如：&nbsp; <br><br>&lt;h:inputText id=&quot;userField&quot; value=&quot;#{guest.user}&quot;&gt;&nbsp; <br><br>&lt;f:converter converterId=&quot;onlyfun.caterpillar.User&quot;/&gt;&nbsp; <br><br>&lt;/h:inputText&gt;&nbsp; <br><br>除了向JSF注册转换器之外，还有一个方式可以不用注册，就是直接在Bean <br><br>上提供一个取得转换器的方法，例如：&nbsp; <br><br>• GuestBean.java&nbsp; <br><br>package onlyfun.caterpillar;&nbsp; <br><br>import javax.faces.convert.Converter;&nbsp; <br><br>public class GuestBean {&nbsp; <br><br>private User user;&nbsp; <br><br>private Converter converter = new UserConverter();&nbsp; <br><br>public void setUser(User user) {&nbsp; <br><br>this.user = user;&nbsp; <br><br>}&nbsp; <br><br>public User getUser() {&nbsp; <br><br>return user;&nbsp; <br><br>}&nbsp; <br><br>public Converter getConverter() {&nbsp; <br><br>return converter;&nbsp; <br><br>}&nbsp; <br><br>}&nbsp; <br><br>之后可以直接结合 JSF Expression Language 来指定转换器：&nbsp; <br><br>&lt;h:inputText id=&quot;userField&quot; value=&quot;#{guest.user}&quot; <br><br>converter=&quot;#{guest.converter}&quot;/&gt;&nbsp; <br><br>3.3标准验证器&nbsp; <br><br>当应用程序要求使用者输入数据时，必然考虑到使用者输入数据的正确性， <br><br>对于使用者的输入必须进行检验，检验必要的两种验证是语法检验（Synatic <br><br>Validation）与语意检验（Semantic Validation）。&nbsp; 语法检验是要检查使用者输入的数据是否合乎我们所要求的&#26684;式， 最基本的 <br><br>就是检查使用者是否填入了栏目&#20540;，或是栏目&#20540;的长度、大小&#20540;等等是否符合要 <br><br>求。语意检验是在语法检验之后，在&#26684;式符合需求之后，我们进一步验证使用者 <br><br>输入的数据语意上是否正确，例如检查使用者的名称与密码是否匹配。&nbsp; <br><br>在1.3简单的导航 (Navigation) 中，我们对使用者名称与密码检查是否匹配， <br><br>这是语意检验，我们可以使用JSF所提供的标准验证器，为其加入语法检验，例 <br><br>如：&nbsp; <br><br>• index.jsp&nbsp; <br><br>&lt;%@ taglib uri=&quot;<a href="http://java.sun.com/jsf/core&amp;quot" target="_blank" rel="external">http://java.sun.com/jsf/core&amp;quot</a>; prefix=&quot;f&quot; %&gt;&nbsp; <br><br>&lt;%@ taglib uri=&quot;<a href="http://java.sun.com/jsf/html&amp;quot" target="_blank" rel="external">http://java.sun.com/jsf/html&amp;quot</a>; prefix=&quot;h&quot; %&gt;&nbsp; <br><br>&lt;%@page contentType=&quot;text/html;charset=GB2312&quot;%&gt;&nbsp; <br><br>&lt;html&gt;&nbsp; <br><br>&lt;head&gt;&nbsp; <br><br>&lt;title&gt;验证器示范&lt;/title&gt;&nbsp; <br><br>&lt;/head&gt;&nbsp; <br><br>&lt;body&gt;&nbsp; <br><br>&lt;f:view&gt;&nbsp; <br><br>&lt;h:messages layout=&quot;table&quot; style=&quot;color:red&quot;/&gt;&nbsp; <br><br>&lt;h:form&gt;&nbsp; <br><br>&lt;h3&gt;请输入您的名称&lt;/h3&gt;&nbsp; <br><br>&lt;h:outputText value=&quot;#{user.errMessage}&quot;/&gt;&lt;p&gt;&nbsp; <br><br>名称: &lt;h:inputText value=&quot;#{user.name}&quot; required=&quot;true&quot;/&gt;&lt;p&gt;&nbsp; <br><br>密码: &lt;h:inputSecret value=&quot;#{user.password}&quot; required=&quot;true&quot;&gt;&nbsp; <br><br>&lt;f:validateLength minimum=&quot;6&quot;/&gt;&nbsp; <br><br>&lt;/h:inputSecret&gt;&lt;p&gt;&nbsp; <br><br>&lt;h:commandButton value=&quot;送出&quot; action=&quot;#{user.verify}&quot;/&gt;&nbsp; <br><br>&lt;/h:form&gt;&nbsp; <br><br>&lt;/f:view&gt;&nbsp; <br><br>&lt;/body&gt;&nbsp; <br><br>&lt;/html&gt;&nbsp; <br><br>在&lt;h:inputText&gt;、&lt;/h:inputSecret&gt;中，我们设定了required属性为true，这表 <br><br>示这个栏目一定要输入&#20540;，我们也在&lt;/h:inputSecret&gt;设定了&lt;f: validateLength&gt;， <br><br>并设定其minimum属性为6，这表示这个栏目最少需要6个字符。&nbsp; <br><br>这一次在错误信息的显示上，我们使用&lt;h:messages&gt;标签，当有验证错误发 <br><br>生时，相关的错误信息会收集起来，使用&lt;h:messages&gt;标签可以一次将所有的错 <br><br>误信息显示出来。&nbsp; <br><br>下面是一个验证错误的信息显示：&nbsp;&nbsp; <br><br>JSF提供了三种标准验证器：&lt;f:validateDoubleRange&gt;、&lt;f:validateLongRange&gt;、 <br><br>&lt;f:validateLength&gt;，您可以分别查询它们的 Tag Library Documentation，了解他 <br><br>们有哪些属性可以使用， 或者是参考 Using the Standard Validators 这篇文章中有 <br><br>关于标准验证器的说明。&nbsp; <br><br>3.4自定义验证器&nbsp; <br><br>您可以自定义自己的验证器，所需要的是实现javax.faces.validator.Validator <br><br>接口，例如我们实现一个简单的密码验证器，检查字符长度，以及密码中是否包 <br><br>括字符与数字：&nbsp; <br><br>• PasswordValidator.java&nbsp; <br><br>package onlyfun.caterpillar;&nbsp; <br><br>import javax.faces.application.FacesMessage;&nbsp; <br><br>import javax.faces.component.UIComponent;&nbsp; <br><br>import javax.faces.context.FacesContext;&nbsp; <br><br>import javax.faces.validator.Validator;&nbsp; <br><br>import javax.faces.validator.ValidatorException;&nbsp; <br><br>public class PasswordValidator implements Validator {&nbsp; <br><br>public void validate(FacesContext context, UIComponent component,&nbsp; <br><br>Object obj) throws ValidatorException {&nbsp; <br><br>String password = (String) obj;&nbsp; <br><br>if(password.length() &lt; 6) {&nbsp; <br><br>FacesMessage message = new FacesMessage(&nbsp; <br><br>FacesMessage.SEVERITY_ERROR,&nbsp; <br><br>&quot;字符长度小于6&quot;, <br><br>&quot;字符长度不得小于6&quot;);&nbsp; <br><br>throw new ValidatorException(message);&nbsp; <br><br>}&nbsp; <br><br>if(!password.matches(&quot;.&#43;[0-9]&#43;&quot;)) {&nbsp; <br><br>FacesMessage message = new FacesMessage( <br><br>FacesMessage.SEVERITY_ERROR,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;密码必须包括字符与数字&quot;,&nbsp; <br><br>&quot;密码必须是字符加数字所组成&quot;);&nbsp; <br><br>throw new ValidatorException(message);&nbsp; <br><br>}&nbsp; <br><br>}&nbsp; <br><br>}&nbsp; <br><br>您要实现javax.faces.validator.Validator接口中的validate()方法，如果验证错 <br><br>误，则丢出一个ValidatorException，它接受一个FacesMessage对象，这个对象接 <br><br>受三个参数，分别表示信息的严重程度（INFO、 WARN、ERROR、FATAL）、 <br><br>信息概述与详细信息内容，这些信息将可以使用&lt;h:messages&gt;或&lt;h: message&gt;标 <br><br>签显示在页面上。&nbsp; <br><br>接下来要在faces-config.xml中注册验证器的标识（Validater ID），要加入以 <br><br>下的内容：&nbsp; <br><br>• faces-config.xml&nbsp; <br><br>&lt;?xml version=&quot;1.0&quot;?&gt;&nbsp; <br><br>&lt;!DOCTYPE faces-config PUBLIC&nbsp; <br><br>&quot;-//Sun Microsystems, Inc.//DTD JavaServer Faces Config 1.0//EN&quot;&nbsp; <br><br>&quot;<a href="http://java.sun.com/dtd/web-facesconfig_1_0.dtd&quot;&gt;&amp;nbsp" target="_blank" rel="external">http://java.sun.com/dtd/web-facesconfig_1_0.dtd&quot;&gt;&amp;nbsp</a>; <br><br>&lt;faces-config&gt;&nbsp; <br><br>….&nbsp; <br><br>&lt;validator&gt;&nbsp; <br><br>&lt;validator-id&gt;&nbsp; <br><br>onlyfun.caterpillar.Password&nbsp; <br><br>&lt;/validator-id&gt;&nbsp; <br><br>&lt;validator-class&gt;&nbsp; <br><br>onlyfun.caterpillar.PasswordValidator&nbsp; <br><br>&lt;/validator-class&gt;&nbsp; <br><br>&lt;/validator&gt;&nbsp; <br><br>….&nbsp; <br><br>&lt;/faces-config&gt;&nbsp; <br><br>要使用自定义的验证器，我们可以使用&lt;f:validator&gt;标签并设定validatorId属 <br><br>性，例如：&nbsp; <br><br>….&nbsp; <br><br>&lt;h:inputSecret value=&quot;#{user.password}&quot; required=&quot;true&quot;&gt;&nbsp; <br><br>&lt;f:validator validatorId=&quot;onlyfun.caterpillar.Password&quot;/&gt;&nbsp; <br><br>&lt;/h:inputSecret&gt;&lt;p&gt;&nbsp; <br><br>….&nbsp; <br><br>您也可以让Bean自行负责验证的工作，可以在Bean上提供一个验证方法， <br><br>这个方法没有传回&#20540;，并可以接收FacesContext、UIComponent、Object三个参数， <br><br>例如：&nbsp; <br><br>• UserBean.java&nbsp; <br><br>package onlyfun.caterpillar;&nbsp; <br><br>import javax.faces.application.FacesMessage;&nbsp; <br><br>import javax.faces.component.UIComponent;&nbsp; import javax.faces.context.FacesContext;&nbsp;<br><br><br>import javax.faces.validator.ValidatorException;&nbsp; <br><br>public class UserBean {&nbsp; <br><br>….&nbsp; <br><br>public void validate(FacesContext context, UIComponent component,&nbsp; <br><br>Object obj) throws ValidatorException {&nbsp; <br><br>String password = (String) obj;&nbsp; <br><br>if(password.length() &lt; 6) {&nbsp; <br><br>FacesMessage message = new FacesMessage(&nbsp; <br><br>FacesMessage.SEVERITY_ERROR, <br><br>&nbsp;&nbsp;&nbsp;&nbsp; &quot;字符长度小于6&quot;,&nbsp; <br><br>&quot;字符长度不得小于6&quot;);&nbsp; <br><br>throw new ValidatorException(message);&nbsp; <br><br>}&nbsp; <br><br>if(!password.matches(&quot;.&#43;[0-9]&#43;&quot;)) {&nbsp; <br><br>FacesMessage message = new FacesMessage(&nbsp; <br><br>FacesMessage.SEVERITY_ERROR,&nbsp; <br><br>&quot;密码必须包括字符与数字&quot;,&nbsp; <br><br>&quot;密码必须是字符加数字所组成&quot;);&nbsp; <br><br>throw new ValidatorException(message);&nbsp; <br><br>}&nbsp; <br><br>}&nbsp; <br><br>}&nbsp; <br><br>接着可以在页面下如下使用验证器：&nbsp; <br><br>…..&nbsp; <br><br>&lt;h:inputSecret value=&quot;#{user.password}&quot;&nbsp; <br><br>required=&quot;true&quot;&nbsp; <br><br>validator=&quot;#{user.validate}&quot;/&gt;&nbsp; <br><br>….&nbsp; <br><br>3.5错误信息处理&nbsp; <br><br>在使用标准转换器或验证器时，当发生错误时，会有一些预定义的错误信息 <br><br>显示，这些信息可以使用&lt;h:messages&gt;或&lt;h:message&gt;标签来显示出来，而这些预 <br><br>定义的错误信息也是可以修改的，您所要作的是提供一个信息资源文件，例如：&nbsp;&nbsp; <br><br>• messages.properties&nbsp; <br><br>javax.faces.component.UIInput.CONVERSION=Format Error.&nbsp; <br><br>javax.faces.component.UIInput.REQUIRED=Please input your data.&nbsp; <br><br>….&nbsp; <br><br>javax.faces.component.UIInput.CONVERSION是用来设定当转换器发现错误 <br><br>时显示的信息，而javax.faces.component.UIInput.REQUIRED是在标签设定了 <br><br>required为true，而使用者没有在栏目输入时显示的错误信息。&nbsp; <br><br>您要在faces-config.xml中告诉JSF您使用的信息文件名称，例如：&nbsp; <br><br>• faces-config.xml&nbsp; <br><br>&lt;?xml version=&quot;1.0&quot;?&gt;&nbsp; &lt;!DOCTYPE faces-config PUBLIC&nbsp; <br><br>&quot;-//Sun Microsystems, Inc.//DTD JavaServer Faces Config 1.0//EN&quot;&nbsp; <br><br>&quot;<a href="http://java.sun.com/dtd/web-facesconfig_1_0.dtd&quot;&gt;&amp;nbsp" target="_blank" rel="external">http://java.sun.com/dtd/web-facesconfig_1_0.dtd&quot;&gt;&amp;nbsp</a>; <br><br>&lt;faces-config&gt;&nbsp; <br><br>&lt;application&gt;&nbsp; <br><br>&lt;local-config&gt;&nbsp; <br><br>&lt;default-locale&gt;en&lt;/default-locale&gt;&nbsp; <br><br>&lt;supported-locale&gt;zh_TW&lt;/supported-locale&gt;&nbsp; <br><br>&lt;/local-config&gt;&nbsp; <br><br>&lt;message-bundle&gt;messages&lt;/message-bundle&gt;&nbsp; <br><br>&lt;/application&gt;&nbsp; <br><br>…..&nbsp; <br><br>&lt;/faces-config&gt;&nbsp; <br><br>在这边我们设定了信息文件的名称为messages_xx_YY.properties，其中 <br><br>xx_YY是根据您的Locale来决定，转换器或验证器的错误信息如果有设定的话， <br><br>就使用设定&#20540;，如果没有设定的话，就使用预定义&#20540;。&nbsp; <br><br>验证器错误信息，除了上面的javax.faces.component.UIInput.REQUIRED之 <br><br>外，还有以下的几个：&nbsp; <br><br>信息标识&nbsp;&nbsp; 预定义信息&nbsp;&nbsp; 用于&nbsp; <br><br>javax.faces.validator. <br><br>NOT_IN_RANGE&nbsp; <br><br>Validation Error: <br><br>Specified attribute is not <br><br>between the expected <br><br>values of {0} and {1}.&nbsp; <br><br>DoubleRangeValidator与 <br><br>LongRangeValidator，{0} <br><br>与{1}分別代表minimum与 <br><br>maximum所设定的属性 <br><br>javax.faces.validator. <br><br>DoubleRangeValidator. <br><br>MAXIMUM、 <br><br>javax.faces.validator. <br><br>LongRangeValidator. <br><br>MAXIMUM&nbsp; <br><br>Validation Error: Value is <br><br>greater than allowable <br><br>maximum of ‘{0}’.&nbsp; <br><br>DoubleRangeValidator或 <br><br>LongRangeValidator，{0} <br><br>表示maximum属性&nbsp; <br><br>javax.faces.validator. <br><br>DoubleRangeValidator. <br><br>MINIMUM、 <br><br>javax.faces.validator. <br><br>LongRangeValidator. <br><br>MINIMUM&nbsp; <br><br>Validation Error: Value is <br><br>less than allowable <br><br>minimum of ‘{0}’.&nbsp; <br><br>DoubleRangeValidator或 <br><br>LongRangeValidator，{0} <br><br>代表minimum属性&nbsp; <br><br>javax.faces.validator. <br><br>DoubleRangeValidator. <br><br>TYPE、 <br><br>javax.faces.validator. <br><br>LongRangeValidator. <br><br>TYPE&nbsp; <br><br>Validation Error: Value is <br><br>not of the correct type. <br><br>DoubleRangeValidator或 <br><br>LongRangeValidator&nbsp; <br><br>javax.faces.validator. <br><br>LengthValidator. <br><br>MAXIMUM&nbsp; <br><br>Validation Error: Value is <br><br>greater than allowable <br><br>maximum of ‘’{0}’’.&nbsp; <br><br>LengthValidator，{0}代表 <br><br>maximum属性 javax.faces.validator. <br><br>LengthValidator. <br><br>MINIMUM&nbsp; <br><br>Validation Error: Value is <br><br>less than allowable <br><br>minimum of ‘’{0}’’.&nbsp; <br><br>LengthValidator，{0}代表 <br><br>minimum属性&nbsp; <br><br>在您提供自定义信息的时候，也可以提供{0}或{1}来设定显示相对的属性 <br><br>&#20540;，以提供详细正确的错误提示信息。&nbsp; <br><br>信息的显示有概述信息与详述信息，如果是详述信息，则在标识上加上 <br><br>&quot;_detail&quot;，例如：&nbsp; <br><br>javax.faces.component.UIInput.CONVERSION=Error.&nbsp; <br><br>javax.faces.component.UIInput.CONVERSION_detail= Detail Error.&nbsp; <br><br>….&nbsp; <br><br>除了在信息资源文件中提供信息，您也可以在程序中使用FacesMessage来提 <br><br>供信息，例如在3.4自定义验证器中我们就这么用过：&nbsp; <br><br>….&nbsp; <br><br>if(password.length() &lt; 6) {&nbsp; <br><br>FacesMessage message = new FacesMessage(&nbsp; <br><br>FacesMessage.SEVERITY_ERROR,&nbsp; <br><br>&quot;字符长度小于6&quot;,&nbsp; <br><br>&quot;字符长度不得小于6&quot;);&nbsp; <br><br>throw new ValidatorException(message);&nbsp; <br><br>}&nbsp; <br><br>….&nbsp; <br><br>最好的方法是在信息资源文件中提供信息，这么一来如果我们要修改信息， <br><br>就只要修改信息资源文件的内容，而不用修改程序，来看一个简单的例子，假设 <br><br>我们的信息资源文件中有以下的内容：&nbsp; <br><br>onlyfun.caterpillar.message1=This is message1.&nbsp; <br><br>onlyfun.caterpillar.message2=This is message2 with {0} and {1}.&nbsp; <br><br>则我们可以在程序中取得信息资源文件的内容，例如：&nbsp; <br><br>package onlyfun.caterpillar;&nbsp; <br><br>import java.util.Locale;&nbsp; <br><br>import java.util.ResourceBundle;&nbsp; <br><br>import javax.faces.context.FacesContext;&nbsp; <br><br>improt javax.faces.component.UIComponent;&nbsp; <br><br>import javax.faces.application.Application;&nbsp; <br><br>import javax.faces.application.FacesMessage;&nbsp; <br><br>….&nbsp; <br><br>public void xxxMethod(FacesContext context,&nbsp; <br><br>UIComponent component,&nbsp; <br><br>Object obj) {&nbsp; <br><br>// 取得应用程序代表对象&nbsp; <br><br>Application application = context.getApplication();&nbsp; <br><br>// 取得信息文件主名称&nbsp; <br><br>String messageFileName = application.getMessageBundle();&nbsp; <br><br>// 取得当前 Locale 对象&nbsp; <br><br>Locale locale = context.getViewRoot().getLocale();&nbsp; // 取得信息绑定 ResourceBundle 对象&nbsp; <br><br>ResourceBundle rsBundle = ResourceBundle. <br><br>getBundle(messageFileName, locale);&nbsp; <br><br>String message = rsBundle.getString( &quot;onlyfun.caterpillar.message1&quot;);&nbsp; <br><br>FacesMessage facesMessage = new FacesMessage(&nbsp; <br><br>FacesMessage.SEVERITY_FATAL,&nbsp; <br><br>message,&nbsp; <br><br>message);&nbsp; <br><br>….&nbsp; <br><br>}&nbsp; <br><br>….&nbsp; <br><br>….&nbsp; <br><br>接下来您可以将FacesMessage对象填入ValidatorException或 <br><br>ConverterException后再丢出，FacesMessage建构时所使用的三个参数是严重程 <br><br>度、 概述信息与详述信息， 严重程度有SEVERITY_FATAL、 SEVERITY_ERROR、 <br><br>SEVERITY_WARN与SEVERITY_INFO四种。&nbsp; <br><br>如果需要在信息资源文件中设定{0}、{1}等参数，则可以如下：&nbsp; <br><br>….&nbsp; <br><br>String message = rsBundle.getString( &quot;onlyfun.caterpillar.message2&quot;);&nbsp; <br><br>Object[] params = {&quot;param1&quot;, &quot;param2&quot;};&nbsp; <br><br>message = java.text.MessageFormat.format(message, params);&nbsp; <br><br>FacesMessage facesMessage = new FacesMessage(&nbsp; <br><br>FacesMessage.SEVERITY_FATAL,&nbsp; <br><br>message, message);&nbsp; <br><br>….&nbsp; <br><br>如此一来，在显示信息时，onlyfun.caterpillar.message2的{0}与{1}的位置就 <br><br>会被&quot;param1&quot;与&quot;param2&quot;所取代。&nbsp; <br><br>3.6&nbsp; 自定义转换,&nbsp; 验证标签&nbsp; <br><br>在自定义验证器中，我们的验证器只能验证一种pattern（.&#43;[0-9]&#43;），我们 <br><br>希望可以在JSF页面上自定义匹配的pattern，然而由于我们使用&lt;f: validator&gt;这个 <br><br>通用的验证器标签，为了要能提供pattern属性，我们可以使用&lt;f:attribute&gt;标签来 <br><br>设置，例如：&nbsp; <br><br>….&nbsp; <br><br>&lt;h:inputSecret value=&quot;#{user.password}&quot; required=&quot;true&quot;&gt;&nbsp; <br><br>&lt;f:validator validatorId=&quot;onlyfun.caterpillar.Password&quot;/&gt;&nbsp; <br><br>&lt;f:attribute name=&quot;pattern&quot; value=&quot;.&#43;[0-9]&#43;&quot;/&gt;&nbsp; <br><br>&lt;/h:inputSecret&gt;&lt;p&gt;&nbsp; <br><br>….&nbsp; <br><br>使用&lt;f:attribute&gt;标签来设定属性，接着我们可以如下取得所设定的属性：&nbsp; <br><br>….&nbsp; <br><br>public void validate(FacesContext context,&nbsp; <br><br>UIComponent component,&nbsp; <br><br>Object obj) throws ValidatorException {&nbsp; ….&nbsp; <br><br>String pattern = (String)&nbsp; <br><br>component.getAttributes().get(&quot;pattern&quot;);&nbsp; <br><br>….&nbsp; <br><br>}&nbsp; <br><br>….&nbsp; <br><br>您也可以开发自己的一组验证标签，并提供相关属性设定，这需要了解JSP <br><br>Tag Library的编写，所以请您先参考 JSP/Servlet 中有关于JSP Tag Library的介 <br><br>绍。&nbsp; <br><br>要开发验证器转用标签，您可以直接继承javax.faces.webapp.ValidatorTag， <br><br>这个类可以帮您处理大部份的细节，您所需要的，就是重新定义它的 <br><br>createValidator()方法，我们以改写自定义验证器中的PasswordValidator为例：&nbsp; <br><br>• PasswordValidator.java&nbsp; <br><br>package onlyfun.caterpillar;&nbsp; <br><br>import javax.faces.application.FacesMessage;&nbsp; <br><br>import javax.faces.component.UIComponent;&nbsp; <br><br>import javax.faces.context.FacesContext;&nbsp; <br><br>import javax.faces.validator.Validator;&nbsp; <br><br>import javax.faces.validator.ValidatorException;&nbsp; <br><br>public class PasswordValidator implements Validator {&nbsp; <br><br>private String pattern;&nbsp; <br><br>public void setPattern(String pattern) {&nbsp; <br><br>this.pattern = pattern;&nbsp; <br><br>}&nbsp; <br><br>public void validate(FacesContext context,&nbsp; <br><br>UIComponent component,&nbsp; <br><br>Object obj) throws ValidatorException {&nbsp; <br><br>String password = (String) obj;&nbsp; <br><br>if(password.length() &lt; 6) {&nbsp; <br><br>FacesMessage message = new FacesMessage(&nbsp; <br><br>FacesMessage.SEVERITY_ERROR,&nbsp; <br><br>&quot;字符长度小于6&quot;, <br><br>&quot;字符长度不得小于6&quot;);&nbsp; <br><br>throw new ValidatorException(message);&nbsp; <br><br>}&nbsp; <br><br>if(pattern != null &amp;&amp; !password.matches(pattern)) {&nbsp; <br><br>FacesMessage message = new FacesMessage(&nbsp; <br><br>FacesMessage.SEVERITY_ERROR,&nbsp; <br><br>&quot;密码必须包括字符与数字&quot;,&nbsp; <br><br>&quot;密码必须是字符加数字所组成&quot;);&nbsp; <br><br>throw new ValidatorException(message);&nbsp; <br><br>}&nbsp; <br><br>}&nbsp; <br><br>}&nbsp; 主要的差别是我们提供了pattern属性，在validate()方法中进行验证时，是根 <br><br>据我们所设定的pattern属性，接着我们继承javax.faces.webapp.ValidatorTag来编 <br><br>写自己的验证标签：&nbsp; <br><br>• PasswordValidatorTag.java&nbsp; <br><br>package onlyfun.caterpillar;&nbsp; <br><br>import javax.faces.application.Application;&nbsp; <br><br>import javax.faces.context.FacesContext;&nbsp; <br><br>import javax.faces.validator.Validator;&nbsp; <br><br>import javax.faces.webapp.ValidatorTag;&nbsp; <br><br>public class PasswordValidatorTag extends ValidatorTag {&nbsp; <br><br>private String pattern;&nbsp; <br><br>public void setPattern(String pattern) {&nbsp; <br><br>this.pattern = pattern;&nbsp; <br><br>}&nbsp; <br><br>protected Validator createValidator() {&nbsp; <br><br>Application application = FacesContext.getCurrentInstance(). getApplication();&nbsp; <br><br>PasswordValidator validator = (PasswordValidator) application.createValidator(&nbsp; <br><br>&quot;onlyfun.caterpillar.Password&quot;);&nbsp; <br><br>validator.setPattern(pattern);&nbsp; <br><br>return validator;&nbsp; <br><br>}&nbsp; <br><br>}&nbsp; <br><br>application.createValidator()方法建立验证器对象时，是根据在faces-config.xml中 <br><br>注册验证器的标识（Validater ID）：&nbsp; <br><br>• faces-config.xml&nbsp; <br><br>&lt;?xml version=&quot;1.0&quot;?&gt;&nbsp; <br><br>&lt;!DOCTYPE faces-config PUBLIC&nbsp; <br><br>&quot;-//Sun Microsystems, Inc.//DTD JavaServer Faces Config 1.0//EN&quot;&nbsp; <br><br>&quot;<a href="http://java.sun.com/dtd/web-facesconfig_1_0.dtd&quot;&gt;&amp;nbsp" target="_blank" rel="external">http://java.sun.com/dtd/web-facesconfig_1_0.dtd&quot;&gt;&amp;nbsp</a>; <br><br>&lt;faces-config&gt;&nbsp; <br><br>….&nbsp; <br><br>&lt;validator&gt;&nbsp; <br><br>&lt;validator-id&gt;&nbsp; <br><br>onlyfun.caterpillar.Password&nbsp; <br><br>&lt;/validator-id&gt;&nbsp; <br><br>&lt;validator-class&gt;&nbsp; <br><br>onlyfun.caterpillar.PasswordValidator&nbsp; <br><br>&lt;/validator-class&gt;&nbsp; <br><br>&lt;/validator&gt;&nbsp; <br><br>….&nbsp; <br><br>&lt;/faces-config&gt;&nbsp; <br><br>剩下来的工作，就是布署tld描述文件了，我们简单的定义一下：&nbsp; <br><br>• taglib.tld&nbsp; <br><br>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&nbsp; &lt;taglib xmlns=&quot;<a href="http://java.sun.com/xml/ns/j2ee&quot;&amp;nbsp" target="_blank" rel="external">http://java.sun.com/xml/ns/j2ee&quot;&amp;nbsp</a>;<br><br><br>xmlns:xsi=&quot;<a href="http://www.w3.org/2001/XMLSchema-instance&quot;&amp;nbsp" target="_blank" rel="external">http://www.w3.org/2001/XMLSchema-instance&quot;&amp;nbsp</a>; <br><br>xsi:schemaLocation=&quot;<a href="http://java.sun.com/xml/ns/j2ee&amp;nbsp" target="_blank" rel="external">http://java.sun.com/xml/ns/j2ee&amp;nbsp</a>; <br><br>web-jsptaglibrary_2_0.xsd&quot;&nbsp; <br><br>version=&quot;2.0&quot;&gt;&nbsp; <br><br>&lt;description&gt;PasswordValidator Tag&lt;/description&gt;&nbsp; <br><br>&lt;tlib-version&gt;1.0&lt;/tlib-version&gt;&nbsp; <br><br>&lt;jsp-version&gt;2.0&lt;/jsp-version&gt;&nbsp; <br><br>&lt;short-name&gt;co&lt;/short-name&gt;&nbsp; <br><br>&lt;uri&gt;<a href="http://caterpillar.onlyfun.net&lt;/uri&gt;&amp;nbsp" target="_blank" rel="external">http://caterpillar.onlyfun.net&lt;/uri&gt;&amp;nbsp</a>; <br><br>&lt;tag&gt;&nbsp; <br><br>&lt;description&gt;PasswordValidator&lt;/description&gt;&nbsp; <br><br>&lt;name&gt;passwordValidator&lt;/name&gt;&nbsp; <br><br>&lt;tag-class&gt;&nbsp; <br><br>onlyfun.caterpillar.PasswordValidatorTag&nbsp; <br><br>&lt;/tag-class&gt;&nbsp; <br><br>&lt;body-content&gt;empty&lt;/body-content&gt;&nbsp; <br><br>&lt;attribute&gt;&nbsp; <br><br>&lt;name&gt;pattern&lt;/name&gt;&nbsp; <br><br>&lt;required&gt;true&lt;/required&gt;&nbsp; <br><br>&lt;rtexprvalue&gt;false&lt;/rtexprvalue&gt;&nbsp; <br><br>&lt;/attribute&gt;&nbsp; <br><br>&lt;/tag&gt;&nbsp; <br><br>&lt;/taglib&gt;&nbsp; <br><br>而我们的index.jsp改写如下：&nbsp; <br><br>• index.jsp&nbsp; <br><br>&lt;%@ taglib uri=&quot;<a href="http://java.sun.com/jsf/core&amp;quot" target="_blank" rel="external">http://java.sun.com/jsf/core&amp;quot</a>; prefix=&quot;f&quot; %&gt;&nbsp; <br><br>&lt;%@ taglib uri=&quot;<a href="http://java.sun.com/jsf/html&amp;quot" target="_blank" rel="external">http://java.sun.com/jsf/html&amp;quot</a>; prefix=&quot;h&quot; %&gt;&nbsp; <br><br>&lt;%@ taglib uri=&quot;/WEB-INF/taglib.tld&quot; prefix=&quot;co&quot; %&gt;&nbsp; <br><br>&lt;%@page contentType=&quot;text/html;charset=GB2312&quot;%&gt;&nbsp; <br><br>&lt;html&gt;&nbsp; <br><br>&lt;head&gt;&nbsp; <br><br>&lt;title&gt;验证器示范&lt;/title&gt;&nbsp; <br><br>&lt;/head&gt;&nbsp; <br><br>&lt;body&gt;&nbsp; <br><br>&lt;f:view&gt;&nbsp; <br><br>&lt;h:messages layout=&quot;table&quot; style=&quot;color:red&quot;/&gt;&nbsp; <br><br>&lt;h:form&gt;&nbsp; <br><br>&lt;h3&gt;请输入您的名称&lt;/h3&gt;&nbsp; <br><br>&lt;h:outputText value=&quot;#{user.errMessage}&quot;/&gt; <br><br>&lt;p&gt;名称: &lt;h:inputText value=&quot;#{user.name}&quot; required=&quot;true&quot;/&gt; <br><br>&lt;p&gt;密码: &lt;h:inputSecret value=&quot;#{user.password}&quot; required=&quot;true&quot;&gt;&nbsp; <br><br>&lt;co:passwordValidator pattern=&quot;.&#43;[0-9]&#43;&quot;/&gt;&nbsp; <br><br>&lt;/h:inputSecret&gt; &lt;p&gt;&nbsp; &lt;h:commandButton value=&quot;送出&quot; action=&quot;#{user.verify}&quot;/&gt;&nbsp; <br><br>&lt;/h:form&gt;&nbsp; <br><br>&lt;/f:view&gt;&nbsp; <br><br>&lt;/body&gt;&nbsp; <br><br>&lt;/html&gt;&nbsp; <br><br>主要的差别是，我们使用了自己的验证器标签：&nbsp; <br><br>&lt;co:passwordValidator pattern=&quot;.&#43;[0-9]&#43;&quot;/&gt;&nbsp; <br><br>如果要自定义转换器标签，方法也是类&#20284;，您要作的是继承 <br><br>javax.faces.webapp.ConverterTag，并重新定义其createConverter()方法。&nbsp; <br><br>事件处理 <br><br><br><br>4.&nbsp; 事件处理&nbsp; <br><br>JSF的事件模型提供一个近&#20284;的桌面GUI事件方式， 让熟悉GUI设计的人员也 <br><br>能快速上手Web程序设计。&nbsp; <br><br>4.1&nbsp; 动作事件&nbsp; <br><br>JSF支持事件处理模型，虽然由于HTTP本身无状态（stateless）的特性，使 <br><br>得这个模型多少有些地方仍不太相同，但JSF所提供的事件处理模型已足以让一 <br><br>些传统GUI程序的设计人员，可以用类&#20284;的模型来开发程序。&nbsp; <br><br>在1.2简单的导航中，我们根据动作方法（action method）的结果来决定要导 <br><br>向的网页，一个按钮绑定一个方法，这样的作法实际上是JSF所提供的简化的事 <br><br>件处理程序， 在按钮上使用action绑定一个动作方法 （action method） ， 实际上JSF <br><br>会为其自动产生一个「预定义的ActionListener」来处理事件，并根据其传回&#20540;来 <br><br>决定导向的页面。&nbsp; <br><br>如果您需要使用同一个方法来应付多种事件来源， 并想要取得事件来源的相 <br><br>关信息，您可以让处理事件的方法接收一个javax.faces.event.ActionEvent事件参 <br><br>数，例如：&nbsp; <br><br>• UserBean.java&nbsp; <br><br>package onlyfun.caterpillar;&nbsp; <br><br>import javax.faces.event.ActionEvent;&nbsp; <br><br>public class UserBean {&nbsp; <br><br>private String name;&nbsp; <br><br>private String password;&nbsp; <br><br>private String errMessage;&nbsp; <br><br>private String outcome;&nbsp; <br><br>public void setName(String name) {&nbsp; <br><br>this.name = na<br><br></div>


      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/05/08/ConcurrentHashMap-02/" rel="next" title="转载:深入分析ConcurrentHashMap">
                <i class="fa fa-chevron-left"></i> 转载:深入分析ConcurrentHashMap
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/05/09/jsf-02/" rel="prev" title="转载：服务化框架技术选型与京东JSF解密">
                转载：服务化框架技术选型与京东JSF解密 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://bloodorange2017.github.io/images/img_head_001.jpg"
               alt="XueCheng" />
          <p class="site-author-name" itemprop="name">XueCheng</p>
           
              <p class="site-description motion-element" itemprop="description">Do one thing at a time, and do well.</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">XueCheng</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

</body>
</html>
