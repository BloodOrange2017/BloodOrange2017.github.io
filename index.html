<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="Do one thing at a time, and do well.">
<meta property="og:type" content="website">
<meta property="og:title" content="XueCheng Notes">
<meta property="og:url" content="https://bloodorange2017.github.io/archives/index.html">
<meta property="og:site_name" content="XueCheng Notes">
<meta property="og:description" content="Do one thing at a time, and do well.">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="XueCheng Notes">
<meta name="twitter:description" content="Do one thing at a time, and do well.">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://bloodorange2017.github.io/archives/"/>





  <title>XueCheng Notes</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  














  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">XueCheng Notes</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Where there is a will, there is a way.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Startseite
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archiv
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://bloodorange2017.github.io/archives/2099/09/09/img-01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XueCheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://bloodorange2017.github.io/images/img_head_001.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XueCheng Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2099/09/09/img-01/" itemprop="url">欢迎来到薛成的博客</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2099-09-09T12:00:00+08:00">
                2099-09-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://dtbfiles.oss-cn-shenzhen.aliyuncs.com/img/2017/05/05/asong.jpg"></p>
<div class="collection-title"><br>          <h2>博客中文章仅本人学习使用，如有侵权请尽快通知博主删除</h2><br>        </div>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://bloodorange2017.github.io/archives/2019/06/15/pptCatalog-01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XueCheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://bloodorange2017.github.io/images/img_head_001.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XueCheng Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/15/pptCatalog-01/" itemprop="url">JAVAEE 学习资料</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-06-15T15:56:57+08:00">
                2019-06-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p></p><h2>JAVAEE PPT目录</h2><br><br><p></p>
<p><b>1.</b><a href="/stutyData/架构第一代码和ppt/ActiveMQ快速上手.pdf">ActiveMQ快速上手.pdf</a></p><p><b>2.</b><a href="/stutyData/架构第一代码和ppt/Git快速上手.pdf">Git快速上手.pdf</a></p><p><b>3.</b><a href="/stutyData/架构第一代码和ppt/Maven补充.pdf">Maven补充.pdf</a></p><p><b>4.</b><a href="/stutyData/架构第一代码和ppt/Memcached快速上手.pdf">Memcached快速上手.pdf</a></p><p><b>5.</b><a href="/stutyData/架构第一代码和ppt/MogileFS快速上手.pdf">MogileFS快速上手.pdf</a></p><p><b>6.</b><a href="/stutyData/架构第一代码和ppt/MongoDB快速上手.pdf">MongoDB快速上手.pdf</a></p><p><b>7.</b><a href="/stutyData/架构第一代码和ppt/Nginx快速上手.pdf">Nginx快速上手.pdf</a></p><p><b>8.</b><a href="/stutyData/架构第一代码和ppt/Varnish快速上手.pdf">Varnish快速上手.pdf</a></p><p><b>9.</b><a href="/stutyData/架构第一代码和ppt/基本业务功能.pdf">基本业务功能.pdf</a></p>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://bloodorange2017.github.io/archives/2017/06/15/thread-01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XueCheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://bloodorange2017.github.io/images/img_head_001.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XueCheng Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/15/thread-01/" itemprop="url">JAVA多线程实现的三种方式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-06-15T14:08:06+08:00">
                2017-06-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>多线程的基础知识进行一下总结：</p>

<p><img alt="Java中多线程实现方式有哪些，听听大神的分析" src="https://static.oschina.net/uploads/img/201706/13190436_vVnS.jpg"></p>

<p>线程生命周期</p>

<p><strong>Java中的多线程有三种完结办法：</strong></p>

<p>1.完结Runnable接口，并完结该接口的run()办法.创立一个Thread目标，用完结的Runnable接口的目标作为参数实例化Thread目标，调用此目标的start办法。</p>

<p>2.承继Thread类，重写run办法。Thread本质上也是一个完结了Runnable的实例，他代表一个线程的实例，而且发动线程的仅有办法即是经过Thread类的start办法。</p>

<p>3.完结Callable接口，重写call办法。Callable接口与Runnable接口的功用相似，但供给了比Runnable更强壮的功用。有以下三点</p>

<p>1）.Callable能够在人物完毕后供给一个返回值，Runnable没有供给这个功用。</p>

<p>2）.Callable中的call办法能够抛出反常，而Runnable的run办法不能抛出反常。</p>

<p>3）.运转Callable能够拿到一个Future目标，表明异步核算的成果，供给了查看核算是不是完结的办法。</p>

<p>需求留意的是，不管用那种办法完结了多线程，调用start办法并不意味着当即履行多线程代码，而是使得线程变为可运转状况。</p>

<p><strong>run、 start的差异</strong></p>

<p>start办法是发动一个线程，而线程中的run办法来完结实践的操作。</p>

<p>假如咱们直接调用run办法，那么就会将这个办法当作一个一般函数来调用，并没有多拓荒线程，假如期望多线程异步履行，则需求调用start办法。</p>

<p><strong>sleep wait的差异</strong></p>

<p>1.sleep是Threa的静态办法，是用来操控线程自身流程的，而wait是object的办法，用于进行线程通讯。</p>

<p>2.两者处理的机制不一样，sleep办法主要是，让线程暂停履行一段时刻，时刻一到主动康复，并不会开释所占用的锁，当调用wait办法今后，他会开释所占用的目标锁，等候别的线程调用notify办法才会再次醒来。</p>

<p>3.两者运用的区域不一样。sleep能够在任何地方运用，wait有必要放在同步操控办法，或者语句块中履行。</p>

<p><img alt="Java中多线程实现方式有哪些，听听大神的分析" src="https://static.oschina.net/uploads/img/201706/13190436_AeYw.jpg"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://bloodorange2017.github.io/archives/2017/06/14/activemq-02/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XueCheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://bloodorange2017.github.io/images/img_head_001.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XueCheng Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/14/activemq-02/" itemprop="url">Spring整合ActiveMQ 事务管理</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-06-14T15:58:38+08:00">
                2017-06-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p> <div id="blog_content" class="blog_content"><br>    <div class="iteye-blog-content-contain" style="font-size: 14px;"></div></div></p>
<p></p><h2 class="iteye-blog-content-contain" style="margin: 13pt 0cm 13pt 28.8pt;"> </h2><p></p>
<p></p><p class="MsoNormal" style="text-indent: 21pt; margin: 0cm 0cm 0pt;"><span style="font-size: medium;"><span><span style="font-family: Calibri;">Spring</span></span><span style="font-family: 宋体;">提供了一个</span><span><span style="font-family: Calibri;">JmsTransactionManager</span></span><span style="font-family: 宋体;">用于对</span><span><span style="font-family: Calibri;">JMS ConnectionFactory</span></span><span style="font-family: 宋体;">做事务管理。这将允许</span><span><span style="font-family: Calibri;">JMS</span></span><span style="font-family: 宋体;">应用利用</span><span><span style="font-family: Calibri;">Spring</span></span><span style="font-family: 宋体;">的事务管理特性。</span><span><span style="font-family: Calibri;">JmsTransactionManager</span></span><span style="font-family: 宋体;">在执行本地资源事务管理时将从指定的</span><span><span style="font-family: Calibri;">ConnectionFactory</span></span><span style="font-family: 宋体;">绑定一个</span><span><span style="font-family: Calibri;">ConnectionFactory/Session</span></span><span style="font-family: 宋体;">这样的配对到线程中。</span><span><span style="font-family: Calibri;">JmsTemplate</span></span><span style="font-family: 宋体;">会自动检测这样的事务资源，并对它们进行相应操作。</span></span></p><p></p>
<p></p><p class="MsoNormal" style="text-indent: 21pt; margin: 0cm 0cm 0pt;"><span style="font-size: medium;"><span style="font-family: 宋体;">在</span><span><span style="font-family: Calibri;">Java EE</span></span><span style="font-family: 宋体;">环境中，</span><span><span style="font-family: Calibri;">ConnectionFactory</span></span><span style="font-family: 宋体;">会池化</span><span><span style="font-family: Calibri;">Connection</span></span><span style="font-family: 宋体;">和</span><span><span style="font-family: Calibri;">Session</span></span><span style="font-family: 宋体;">，这样这些资源将会在整个事务中被有效地重复利用。在一个独立的环境中，使用</span><span><span style="font-family: Calibri;">Spring</span></span><span style="font-family: 宋体;">的</span><span><span style="font-family: Calibri;">SingleConnectionFactory</span></span><span style="font-family: 宋体;">时所有的事务将公用一个</span><span><span style="font-family: Calibri;">Connection</span></span><span style="font-family: 宋体;">，但是每个事务将保留自己独立的</span><span><span style="font-family: Calibri;">Session</span></span><span style="font-family: 宋体;">。</span></span></p><p></p>
<p></p><p class="MsoNormal" style="text-indent: 21pt; margin: 0cm 0cm 0pt;"><span style="font-size: medium;"><span><span style="font-family: Calibri;">JmsTemplate</span></span><span style="font-family: 宋体;">可以利用</span><span><span style="font-family: Calibri;">JtaTransactionManager</span></span><span style="font-family: 宋体;">和能够进行分布式的</span><span><span style="font-family: Calibri;"> JMS ConnectionFactory</span></span><span style="font-family: 宋体;">处理分布式事务。</span></span></p><p></p>
<p></p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: medium;"><span><span><span style="font-family: Calibri;">       </span></span></span><span style="font-family: 宋体;">在</span><span><span style="font-family: Calibri;">Spring</span></span><span style="font-family: 宋体;">整合</span><span><span style="font-family: Calibri;">JMS</span></span><span style="font-family: 宋体;">的应用中，如果我们要进行本地的事务管理的话非常简单，只需要在定义对应的消息监听容器时指定其</span><span><span style="font-family: Calibri;">sessionTransacted</span></span><span style="font-family: 宋体;">属性为</span><span><span style="font-family: Calibri;">true</span></span><span style="font-family: 宋体;">，如：</span></span></p><p></p>
<p></p><p class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt;"> </p><p></p>
<p><div class="iteye-blog-content-contain" style="font-size: 14px;"></div></p>
<p><pre class="xml" name="code">    &lt;bean id=”jmsContainer”<br>        class=”org.springframework.jms.listener.DefaultMessageListenerContainer”&gt;<br>        &lt;property name=”connectionFactory” ref=”connectionFactory” /&gt;<br>        &lt;property name=”destination” ref=”queueDestination” /&gt;<br>        &lt;property name=”messageListener” ref=”consumerMessageListener” /&gt;<br>        &lt;property name=”sessionTransacted” value=”true”/&gt;<br>    &lt;/bean&gt;<br></pre><br></p>
<p></p><p class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt;"> </p><p></p>
<p></p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: medium;"><span><span><span style="font-family: Calibri;">       </span></span></span><span style="font-family: 宋体;">该属性值默认为</span><span><span style="font-family: Calibri;">false</span></span><span style="font-family: 宋体;">，这样</span><span><span style="font-family: Calibri;">JMS</span></span><span style="font-family: 宋体;">在进行消息监听的时候就会进行事务控制，当在接收消息时监听器执行失败时</span><span><span style="font-family: Calibri;">JMS</span></span><span style="font-family: 宋体;">就会对接收到的消息进行回滚，对于</span><span><span style="font-family: Calibri;">SessionAwareMessageListener</span></span><span style="font-family: 宋体;">在接收到消息后发送一个返回消息时也处于同一事务下，但是对于其他操作如数据库访问等将不属于该事务控制。</span></span></p><p></p>
<p></p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: medium;"><span style="font-family: 宋体;">这里我们可以来做一个这样的测试：我们如上配置监听在</span><span><span style="font-family: Calibri;">queueDestination</span></span><span style="font-family: 宋体;">的消息监听容器的</span><span><span style="font-family: Calibri;">sessionTransacted</span></span><span style="font-family: 宋体;">属性为</span><span><span style="font-family: Calibri;">true</span></span><span style="font-family: 宋体;">，然后把我们前面提到的消息监听器</span><span><span style="font-family: Calibri;">ConsumerMessageListener</span></span><span style="font-family: 宋体;">改成这样：</span></span></p><p></p>
<p></p><p class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt;"> </p><p></p>
<p><div class="iteye-blog-content-contain" style="font-size: 14px;"></div></p>
<p><pre class="java" name="code">public class ConsumerMessageListener implements MessageListener {</pre></p>
<pre><code>public void onMessage(Message message) {
        //这里我们知道生产者发送的就是一个纯文本消息，所以这里可以直接进行强制转换，或者直接把onMessage方法的参数改成Message的子类TextMessage
        TextMessage textMsg = (TextMessage) message;
        System.out.println(&quot;接收到一个纯文本消息。&quot;);
        try {
            System.out.println(&quot;消息内容是：&quot; + textMsg.getText());
            if (1 == 1) {
                throw new RuntimeException(&quot;Error&quot;);
            }
        } catch (JMSException e) {
            e.printStackTrace();
        }
}
</code></pre><p>}<br><br></p>
<p></p><p class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt;">        </p><p></p>
<p></p><p class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt;"><span style="font-size: medium;"><span style="font-family: 宋体;">我们可以看到在上述代码中我们的</span><span><span style="font-family: Calibri;">ConsumerMessageListener</span></span><span style="font-family: 宋体;">在进行消息接收的时候抛出了一个</span><span><span style="font-family: Calibri;">RuntimeException</span></span><span style="font-family: 宋体;">，根据我们上面说的，因为我们已经在对应的监听容器上定义了其</span><span><span style="font-family: Calibri;">sessionTransacted</span></span><span style="font-family: 宋体;">属性为</span><span><span style="font-family: Calibri;">true</span></span><span style="font-family: 宋体;">，所以当这里抛出异常的时候</span><span><span style="font-family: Calibri;">JMS</span></span><span style="font-family: 宋体;">将对接收到的消息进行回滚，即下次进行消息接收的时候该消息仍然能够被接收到。为了验证这一点，我们先执行一遍测试代码，往</span><span><span style="font-family: Calibri;">queueDestination</span></span><span style="font-family: 宋体;">发送一个文本消息，这个时候</span><span><span style="font-family: Calibri;">ConsumerMessageListener</span></span><span style="font-family: 宋体;">在进行接收的时候将会抛出一个</span><span><span style="font-family: Calibri;">RuntimeException</span></span><span style="font-family: 宋体;">，已经接收到的纯文本消息将进行回滚；接着我们去掉上面代码中抛出异常的语句，即</span><span><span style="font-family: Calibri;">ConsumerMessageListener</span></span><span style="font-family: 宋体;">能够正常的进行消息接收，这个时候我们再运行一次测试代码，往</span><span><span style="font-family: Calibri;">ConsumerMessageListener</span></span><span style="font-family: 宋体;">监听的</span><span><span style="font-family: Calibri;">queueDestination</span></span><span style="font-family: 宋体;">发送一条消息。如果之前在接手时抛出了异常的那条消息已经回滚了的话，那么这个时候将能够接收到两条消息，控制台将输出接收到的两条消息的内容。具体结果有兴趣的朋友可以自己验证一下。</span></span></p><p></p>
<p></p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: medium;"><span><span><span style="font-family: Calibri;">       </span></span></span><span style="font-family: 宋体;">如果想接收消息和数据库访问处于同一事务中，那么我们就可以配置一个外部的事务管理同时配置一个支持外部事务管理的消息监听容器（如</span><span><span style="font-family: Calibri;">DefaultMessageListenerContainer</span></span><span style="font-family: 宋体;">）。要配置这样一个参与分布式事务管理的消息监听容器，我们可以配置一个</span><span><span style="font-family: Calibri;">JtaTransactionManager</span></span><span style="font-family: 宋体;">，当然底层的</span><span><span style="font-family: Calibri;">JMS ConnectionFactory</span></span><span style="font-family: 宋体;">需要能够支持分布式事务管理，并正确地注册我们的</span><span><span style="font-family: Calibri;">JtaTransactionManager</span></span><span style="font-family: 宋体;">。这样消息监听器进行消息接收和对应的数据库访问就会处于同一数据库控制下，当消息接收失败或数据库访问失败都会进行事务回滚操作。</span></span></p><p></p>
<p></p><p class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt;"> </p><p></p>
<p><div class="iteye-blog-content-contain" style="font-size: 14px;"></div></p>
<p><pre class="xml" name="code">    &lt;bean id=”jmsContainer”<br>        class=”org.springframework.jms.listener.DefaultMessageListenerContainer”&gt;<br>        &lt;property name=”connectionFactory” ref=”connectionFactory” /&gt;<br>        &lt;property name=”destination” ref=”queueDestination” /&gt;<br>        &lt;property name=”messageListener” ref=”consumerMessageListener” /&gt;<br>        &lt;property name=”transactionManager” ref=”jtaTransactionManager”/&gt;<br>    &lt;/bean&gt;</pre></p>
<pre><code>&amp;lt;bean id=&quot;jtaTransactionManager&quot; class=&quot;org.springframework.transaction.jta.JtaTransactionManager&quot;/&amp;gt;
</code></pre><p><br></p>
<p></p><p class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt;">        </p><p></p>
<p></p><p class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt;"><span style="font-size: medium;"><span style="font-family: 宋体;">当给消息监听容器指定了</span><span><span style="font-family: Calibri;">transactionManager</span></span><span style="font-family: 宋体;">时，消息监听容器将忽略</span><span><span style="font-family: Calibri;">sessionTransacted</span></span><span style="font-family: 宋体;">的值。</span></span><span><span style="font-family: Calibri; font-size: medium;"> </span></span></p><p></p>
<p></p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: medium;"><span><span><span style="font-family: Calibri;">       </span></span></span><span style="font-family: 宋体;">关于使用</span><span><span style="font-family: Calibri;">JtaTransactionManager</span></span><span style="font-family: 宋体;">来管理上述分布式事务，我们这里也可以来做一个试验。</span></span></p><p></p>
<p></p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: medium;"><span><span><span style="font-family: Calibri;">       </span></span></span><span style="font-family: 宋体;">首先：往</span><span><span style="font-family: Calibri;">Spring</span></span><span style="font-family: 宋体;">配置文件</span><span><span style="font-family: Calibri;">applicationContext.xml</span></span><span style="font-family: 宋体;">中添加如下配置：</span></span></p><p></p>
<p></p><p class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt;"><span style="font-family: Consolas; color: black; font-size: 10pt;"><span>    </span></span></p><p></p>
<p><div class="iteye-blog-content-contain" style="font-size: 14px;"></div></p>
<p><pre class="xml" name="code">    &lt;bean id=”jdbcTemplate” class=”org.springframework.jdbc.core.JdbcTemplate”&gt;<br>        &lt;property name=”dataSource” ref=”dataSource”/&gt;<br>    &lt;/bean&gt;</pre></p>
<pre><code>&amp;lt;jee:jndi-lookup jndi-name=&quot;jdbc/mysql&quot; id=&quot;dataSource&quot;/&amp;gt;
&amp;lt;bean id=&quot;jtaTransactionManager&quot; class=&quot;org.springframework.transaction.jta.JtaTransactionManager&quot;/&amp;gt;

&amp;lt;tx:annotation-driven transaction-manager=&quot;jtaTransactionManager&quot;/&amp;gt;
</code></pre><p><br></p>
<p></p><p class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt;">  </p><p></p>
<p></p><p class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt;"><span style="font-size: medium;"><span><span><span style="font-family: Calibri;">       </span></span></span><span style="font-family: 宋体;">我们可以看到，在这里我们引入了一个</span><span><span style="font-family: Calibri;">jndi</span></span><span style="font-family: 宋体;">数据源，定义了一个</span><span><span style="font-family: Calibri;">JtaTransactionManager</span></span><span style="font-family: 宋体;">，定义了</span><span><span style="font-family: Calibri;">Spring</span></span><span style="font-family: 宋体;">基于注解的声明式事务管理，定义了一个</span><span><span style="font-family: Calibri;">Spring</span></span><span style="font-family: 宋体;">提供的进行</span><span><span style="font-family: Calibri;">Jdbc</span></span><span style="font-family: 宋体;">操作的工具类</span><span><span style="font-family: Calibri;">jdbcTemplate</span></span><span style="font-family: 宋体;">。</span></span></p><p></p>
<p></p><p class="iteye-blog-content-contain" style="font-size: 14px;"> </p><p></p>
<p></p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: medium;"><span><span><span style="font-family: Calibri;">       </span></span></span><span style="font-family: 宋体;">接下来把我们的</span><span><span style="font-family: Calibri;">ConsumerMessageListener</span></span><span style="font-family: 宋体;">改为如下形式：</span></span></p><p></p>
<p><div class="iteye-blog-content-contain" style="font-size: 14px;"></div></p>
<p><pre class="java" name="code">public class ConsumerMessageListener implements MessageListener {</pre></p>
<pre><code>@Autowired
private TestDao testDao;

private int count = 0;

public void onMessage(Message message) {
        //这里我们知道生产者发送的就是一个纯文本消息，所以这里可以直接进行强制转换，或者直接把onMessage方法的参数改成Message的子类TextMessage
        TextMessage textMsg = (TextMessage) message;
        System.out.println(new Date().toLocaleString() + &quot;接收到一个纯文本消息。&quot;);
        try {
            String text = textMsg.getText();
            System.out.println(&quot;消息内容是：&quot; + text);
            System.out.println(&quot;当前count的值是：&quot; + count);
            testDao.insert(text + count);
            if (count == 0) {
                count ++;
                throw new RuntimeException(&quot;Error! 出错啦！&quot;);
            }
        } catch (JMSException e) {
            e.printStackTrace();
        }
}
</code></pre><p>}<br><br></p>
<p></p><p class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt;"> </p><p></p>
<p></p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: medium;"><span><span><span style="font-family: Calibri;">       </span></span></span><span style="font-family: 宋体;">我们可以看到，在</span><span><span style="font-family: Calibri;">ConsumerMessageListener</span></span><span style="font-family: 宋体;">中我们定义了一个实例变量</span><span><span style="font-family: Calibri;">count</span></span><span style="font-family: 宋体;">，其初始值为</span><span><span style="font-family: Calibri;">0</span></span><span style="font-family: 宋体;">；在</span><span><span style="font-family: Calibri;">onMessage</span></span><span style="font-family: 宋体;">里面，我们可以看到我们把接收到的消息内容作为参数调用了</span><span><span style="font-family: Calibri;">testDao</span></span><span style="font-family: 宋体;">的</span><span><span style="font-family: Calibri;">insert</span></span><span style="font-family: 宋体;">方法；当</span><span><span style="font-family: Calibri;">count</span></span><span style="font-family: 宋体;">值为</span><span><span style="font-family: Calibri;">0</span></span><span style="font-family: 宋体;">，也就是进行第一次消息接收的时候会将</span><span><span style="font-family: Calibri;">count</span></span><span style="font-family: 宋体;">的值加</span><span><span style="font-family: Calibri;">1</span></span><span style="font-family: 宋体;">，同时抛出一个运行时异常。那么我们这里要测试的就是进行第一次接收的时候</span><span><span style="font-family: Calibri;">testDao</span></span><span style="font-family: 宋体;">已经把相关内容插入数据库了，接着在</span><span><span style="font-family: Calibri;">onMessage</span></span><span style="font-family: 宋体;">里面抛出了一个异常同时</span><span><span style="font-family: Calibri;">count</span></span><span style="font-family: 宋体;">加</span><span><span style="font-family: Calibri;">1</span></span><span style="font-family: 宋体;">，我们预期的结果应该是此时数据库进行回滚，同时</span><span><span style="font-family: Calibri;">JMS</span></span><span style="font-family: 宋体;">也回滚，这样</span><span><span style="font-family: Calibri;">JMS</span></span><span style="font-family: 宋体;">将继续尝试接收该消息，此时同样会调用</span><span><span style="font-family: Calibri;">testDao</span></span><span style="font-family: 宋体;">的</span><span><span style="font-family: Calibri;">insert</span></span><span style="font-family: 宋体;">方法将内容插入数据库，再接着</span><span><span style="font-family: Calibri;">count</span></span><span style="font-family: 宋体;">已经不为</span><span><span style="font-family: Calibri;">0</span></span><span style="font-family: 宋体;">了，所以此时将不再抛出异常，</span><span><span style="font-family: Calibri;">JMS</span></span><span style="font-family: 宋体;">成功进行消息的接收，</span><span><span style="font-family: Calibri;">testDao</span></span><span style="font-family: 宋体;">也成功的将消息内容插入到了数据库。要证明这个预期我们除了看数据库中插入的数据外，还可以看控制台的输出，正常情况控制台将输出两次消息接收的内容，且第一次时</span><span><span style="font-family: Calibri;">count</span></span><span style="font-family: 宋体;">为</span><span><span style="font-family: Calibri;">0</span></span><span style="font-family: 宋体;">，第二次</span><span><span style="font-family: Calibri;">count</span></span><span style="font-family: 宋体;">为</span><span><span style="font-family: Calibri;">1</span></span><span style="font-family: 宋体;">。</span></span></p><p></p>
<p></p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: medium;"><span><span style="font-family: Calibri;"><span>       </span>TestDao</span></span><span style="font-family: 宋体;">是一个接口，其</span><span><span style="font-family: Calibri;">TestDaoImpl</span></span><span style="font-family: 宋体;">对</span><span><span style="font-family: Calibri;">insert</span></span><span style="font-family: 宋体;">的方法实现如下：</span></span> </p><p></p>
<p></p><p class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt;"> </p><p></p>
<p><div class="iteye-blog-content-contain" style="font-size: 14px;"></div></p>
<p><pre class="java" name="code">    @Transactional(readOnly=false)<br>    public void insert(final String name) {</pre></p>
<pre><code>    jdbcTemplate.update(&quot;insert into test(name) values(?)&quot;, name);

}
</code></pre><p><br></p>
<p></p><p class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt;">       </p><p></p>
<p></p><p class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt;"><span style="font-size: medium;"><span style="font-family: 宋体;">这里我们使用支持</span><span><span style="font-family: Calibri;">JtaTransactionManager</span></span><span style="font-family: 宋体;">的</span><span><span style="font-family: Calibri;">Weblogic</span></span><span style="font-family: 宋体;">来进行测试，因为是</span><span><span style="font-family: Calibri;">Web</span></span><span style="font-family: 宋体;">容器，所以我们这里定义了一个</span><span><span style="font-family: Calibri;">Controller</span></span><span style="font-family: 宋体;">来进行消息的发送，具体代码如下：</span></span></p><p></p>
<p></p><p class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt;"> </p><p></p>
<p><div class="iteye-blog-content-contain" style="font-size: 14px;"></div></p>
<p><pre class="java" name="code">@Controller<br>@RequestMapping(“test”)<br>public class TestController {</pre></p>
<pre><code>@Autowired
@Qualifier(&quot;queueDestination&quot;)
private Destination destination;

@Autowired
private ProducerService producerService;

@RequestMapping(&quot;first&quot;)
public String first() {
    producerService.sendMessage(destination, &quot;你好，现在是：&quot; + new Date().toLocaleString());
    return &quot;/test/first&quot;;
}
</code></pre><p>}<br><br></p>
<p></p><p class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt;">      </p><p></p>
<p></p><p class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt;"><span style="font-size: medium;"><span style="font-family: 宋体;">接下来就是启用</span><span><span style="font-family: Calibri;">Weblogic</span></span><span style="font-family: 宋体;">服务器，进入其控制台，定义一个名叫“</span><span><span style="font-family: Calibri;">jdbc/mysql</span></span><span style="font-family: 宋体;">”的</span><span><span style="font-family: Calibri;">JNDI</span></span><span style="font-family: 宋体;">数据源，然后把该项目部署到</span><span><span style="font-family: Calibri;">Weblogic</span></span><span style="font-family: 宋体;">服务器上并进行启动。接下来我们就可以访问</span><span><span style="font-family: Calibri;">/test/first.do</span></span><span style="font-family: 宋体;">访问到上述</span><span><span style="font-family: Calibri;">first</span></span><span style="font-family: 宋体;">方法。之后控制台会输出如下信息：</span></span></p><p></p>
<p></p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: medium;"><span><span><span style="font-family: Calibri;"><br><img alt="" src="http://dl2.iteye.com/upload/attachment/0091/7448/655db0fd-c363-3ebb-9165-9e3c59515307.png"><br>        </span></span></span><span style="font-family: 宋体;">我们可以看到当</span><span><span style="font-family: Calibri;">count</span></span><span style="font-family: 宋体;">为</span><span><span style="font-family: Calibri;">0</span></span><span style="font-family: 宋体;">时接收了一次，并随后抛出了异常，之后</span><span><span style="font-family: Calibri;">count</span></span><span style="font-family: 宋体;">为</span><span><span style="font-family: Calibri;">1</span></span><span style="font-family: 宋体;">又接收了一次，这说明在</span><span><span style="font-family: Calibri;">count</span></span><span style="font-family: 宋体;">为</span><span><span style="font-family: Calibri;">0</span></span><span style="font-family: 宋体;">时抛出异常后我们的</span><span><span style="font-family: Calibri;">JMS</span></span><span style="font-family: 宋体;">进行回滚了，那么我们的数据库是否有进行回滚呢？接着我们来看数据库中的内容：</span></span></p><p></p>
<p></p><p class="iteye-blog-content-contain" style="font-size: 14px;"><span><span><br><img alt="" src="http://dl2.iteye.com/upload/attachment/0091/7450/7196d8b4-8947-3ca9-aee2-c0831cc15061.png"><br>        </span></span><span style="font-family: 宋体; font-size: 12pt;">我们可以看到数据库表中只有一条记录，而且最后一位表示</span><span>count</span><span style="font-family: 宋体; font-size: 12pt;">的值的为</span><span>1</span><span style="font-family: 宋体; font-size: 12pt;">，这说明在</span><span>JMS</span><span style="font-family: 宋体; font-size: 12pt;">进行消息接收抛出异常时我们的数据库也回滚了。关于使用</span><span>JtaTransactionManager</span><span style="font-family: 宋体; font-size: 12pt;">进行分布式事务管理的问题就说到这里了，有兴趣的朋友可以自己试验一下。</span></p><p></p>
<p></p><p class="iteye-blog-content-contain" style="font-size: 14px;"> </p><p></p>
<div class="iteye-blog-content-contain" style="font-size: 14px;">

</div>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://bloodorange2017.github.io/archives/2017/06/14/activemq-01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XueCheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://bloodorange2017.github.io/images/img_head_001.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XueCheng Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/14/activemq-01/" itemprop="url">Spring整合ActiveMQ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-06-14T14:17:28+08:00">
                2017-06-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div id="article_content" class="article_content tracking-ad" data-mod="popu_307" data-dsm="post"><br><br><h1>1.管理ActiveMQ</h1><br><p>地址 &nbsp;<a target="_blank" href="http://localhost:8161/admin/" style="color:rgb(255,153,0); text-decoration:none; font-family:'microsoft yahei'; font-size:14px; line-height:26px">http://localhost:8161/admin/</a></p><br><p>&nbsp; &nbsp; 默认用户和密码：admin=admin</p><br><p></p><br><ol style="font-family:'microsoft yahei'; font-size:14px; line-height:26px"><br><li style=""><br><p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px"><br>运行发送者，eclipse控制台输出，如下图：&nbsp;<br style=""><br><img src="http://img.blog.csdn.net/20150920173405956" alt="这里写图片描述" title="" style="border:none; max-width:100%">&nbsp;<br style=""><br>此时，我们先看一下ActiveMQ服务器，Queues内容如下：&nbsp;<br style=""><br><img src="http://img.blog.csdn.net/20150920173620033" alt="这里写图片描述" title="" style="border:none; max-width:100%"><br style=""><br>我们可以看到创建了一个名称为HelloWorld的消息队列，队列中有10条消息未被消费，我们也可以通过Browse查看是哪些消息，如下图：&nbsp;<br style=""><br><img src="http://img.blog.csdn.net/20150920174135335" alt="这里写图片描述" title="" style="border:none; max-width:100%"><br style=""><br>如果这些队列中的消息，被删除，消费者则无法消费。</p><br></li><li style=""><br><p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px"><br>我们继续运行一下消费者，eclipse控制台打印消息，如下：&nbsp;<br style=""><br><img src="http://img.blog.csdn.net/20150920174317150" alt="这里写图片描述" title="" style="border:none; max-width:100%">&nbsp;<br style=""><br>此时，我们先看一下ActiveMQ服务器，Queues内容如下：&nbsp;<br style=""><br><img src="http://img.blog.csdn.net/20150920174417511" alt="这里写图片描述" title="" style="border:none; max-width:100%"><br style=""><br>我们可以看到HelloWorld的消息队列发生变化，多一个消息者，队列中的10条消息被消费了，点击Browse查看，已经为空了。&nbsp;<br style=""><br>点击Active Consumers，我们可以看到这个消费者的详细信息：&nbsp;<br style=""><br><img src="http://img.blog.csdn.net/20150920175100179" alt="这里写图片描述" title="" style="border:none; max-width:100%"></p><br></li></ol><br><br><br><p></p><br><p><br><br></p><br><h1>2.Spring整合ActiveMQ</h1><br><h2>&nbsp; &nbsp;1.maven</h2><br><div>&nbsp; &nbsp; &nbsp; &nbsp;<pre code_snippet_id="1660918" snippet_file_name="blog_20160425_1_1952419" name="code" class="html">&lt;!–ActiveMQ依赖 –&gt;<br>        &lt;dependency&gt;<br>            &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt;<br>            &lt;artifactId&gt;activemq-all&lt;/artifactId&gt;<br>            &lt;version&gt;5.13.2&lt;/version&gt;<br>        &lt;/dependency&gt;<br>&lt;!– Spring整合ActiveMQ所需依赖 –&gt;<br>            &lt;dependency&gt;<br>                &lt;groupId&gt;org.springframework&lt;/groupId&gt;<br>                &lt;artifactId&gt;spring-jms&lt;/artifactId&gt;<br>            &lt;/dependency&gt;<br>            &lt;dependency&gt;<br>                &lt;groupId&gt;org.springframework&lt;/groupId&gt;<br>                &lt;artifactId&gt;spring-messaging&lt;/artifactId&gt;<br>            &lt;/dependency&gt;</pre><br><br><br><br><br><br><br><br></div><br><h2>&nbsp; &nbsp;2.ActiveMQ配置文件</h2><br><div><pre code_snippet_id="1660918" snippet_file_name="blog_20160425_2_1712439" name="code" class="html">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;<br>&lt;beans xmlns=&quot;<a href="http://www.springframework.org/schema/beans&amp;quot" target="_blank" rel="external">http://www.springframework.org/schema/beans&amp;quot</a>;<br>    xmlns:context=&quot;<a href="http://www.springframework.org/schema/context&amp;quot" target="_blank" rel="external">http://www.springframework.org/schema/context&amp;quot</a>;<br>    xmlns:xsi=&quot;<a href="http://www.w3.org/2001/XMLSchema-instance&amp;quot" target="_blank" rel="external">http://www.w3.org/2001/XMLSchema-instance&amp;quot</a>; xmlns:amq=&quot;<a href="http://activemq.apache.org/schema/core&amp;quot" target="_blank" rel="external">http://activemq.apache.org/schema/core&amp;quot</a>;<br>    xmlns:jms=&quot;<a href="http://www.springframework.org/schema/jms&amp;quot" target="_blank" rel="external">http://www.springframework.org/schema/jms&amp;quot</a>;<br>    xsi:schemaLocation=&quot;<a href="http://www.springframework.org/schema/beans" target="_blank" rel="external">http://www.springframework.org/schema/beans</a><br>        <a href="http://www.springframework.org/schema/beans/spring-beans-4.0.xsd" target="_blank" rel="external">http://www.springframework.org/schema/beans/spring-beans-4.0.xsd</a><br>        <a href="http://www.springframework.org/schema/context" target="_blank" rel="external">http://www.springframework.org/schema/context</a><br>        <a href="http://www.springframework.org/schema/context/spring-context-4.0.xsd" target="_blank" rel="external">http://www.springframework.org/schema/context/spring-context-4.0.xsd</a><br>        <a href="http://www.springframework.org/schema/jms" target="_blank" rel="external">http://www.springframework.org/schema/jms</a><br>        <a href="http://www.springframework.org/schema/jms/spring-jms-4.0.xsd" target="_blank" rel="external">http://www.springframework.org/schema/jms/spring-jms-4.0.xsd</a><br>        <a href="http://activemq.apache.org/schema/core" target="_blank" rel="external">http://activemq.apache.org/schema/core</a><br>        <a href="http://activemq.apache.org/schema/core/activemq-core-5.8.0.xsd&quot;&amp;gt" target="_blank" rel="external">http://activemq.apache.org/schema/core/activemq-core-5.8.0.xsd&quot;&amp;gt</a>;<br><br>    &lt;!– ActiveMQ 连接工厂 –&gt;<br>    &lt;!– 真正可以产生Connection的ConnectionFactory，由对应的 JMS服务厂商提供–&gt;<br>    &lt;!– 如果连接网络：tcp://ip:61616；未连接网络：tcp://localhost:61616 以及用户名，密码–&gt;<br>    &lt;amq:connectionFactory id=&quot;amqConnectionFactory&quot;<br>        brokerURL=&quot;tcp://172.17.65.29:61616&quot; userName=&quot;admin&quot; password=&quot;admin&quot;  /&gt;<br><br>    &lt;!– Spring Caching连接工厂 –&gt;<br>    &lt;!– Spring用于管理真正的ConnectionFactory的ConnectionFactory –&gt;<br>    &lt;bean id=&quot;connectionFactory&quot; class=&quot;org.springframework.jms.connection.CachingConnectionFactory&quot;&gt;<br>        &lt;!– 目标ConnectionFactory对应真实的可以产生JMS Connection的ConnectionFactory –&gt;<br>        &lt;property name=&quot;targetConnectionFactory&quot; ref=&quot;amqConnectionFactory&quot;&gt;&lt;/property&gt;<br>        &lt;!– 同上，同理 –&gt;<br>        &lt;!– &lt;constructor-arg ref=&quot;amqConnectionFactory&quot; /&gt; –&gt;<br>        &lt;!– Session缓存数量 –&gt;<br>        &lt;property name=&quot;sessionCacheSize&quot; value=&quot;100&quot; /&gt;<br>    &lt;/bean&gt;<br><br>    &lt;!– Spring JmsTemplate 的消息生产者 start–&gt;<br><br>    &lt;!– 定义JmsTemplate的Queue类型 –&gt;<br>    &lt;bean id=&quot;jmsQueueTemplate&quot; class=&quot;org.springframework.jms.core.JmsTemplate&quot;&gt;<br>        &lt;!– 这个connectionFactory对应的是我们定义的Spring提供的那个ConnectionFactory对象 –&gt;<br>        &lt;constructor-arg ref=&quot;connectionFactory&quot; /&gt;<br>        &lt;!– 非pub/sub模型（发布/订阅），即队列模式 –&gt;<br>        &lt;property name=&quot;pubSubDomain&quot; value=&quot;false&quot; /&gt;<br>    &lt;/bean&gt;<br><br>    &lt;!– 定义JmsTemplate的Topic类型 –&gt;<br>    &lt;bean id=&quot;jmsTopicTemplate&quot; class=&quot;org.springframework.jms.core.JmsTemplate&quot;&gt;<br>         &lt;!– 这个connectionFactory对应的是我们定义的Spring提供的那个ConnectionFactory对象 –&gt;<br>        &lt;constructor-arg ref=&quot;connectionFactory&quot; /&gt;<br>        &lt;!– pub/sub模型（发布/订阅） –&gt;<br>        &lt;property name=&quot;pubSubDomain&quot; value=&quot;true&quot; /&gt;<br>    &lt;/bean&gt;<br><br>    &lt;!–Spring JmsTemplate 的消息生产者 end–&gt;<br><br><br>    &lt;!– 消息消费者 start–&gt;<br><br>    &lt;!– 定义Queue监听器 –&gt;<br>    &lt;jms:listener-container destination-type=&quot;queue&quot; container-type=&quot;default&quot; connection-factory=&quot;connectionFactory&quot; acknowledge=&quot;auto&quot;&gt;<br>        &lt;jms:listener destination=&quot;test.queue&quot; ref=&quot;queueReceiver1&quot;/&gt;<br>        &lt;jms:listener destination=&quot;test.queue&quot; ref=&quot;queueReceiver2&quot;/&gt;<br>    &lt;/jms:listener-container&gt;<br><br>    &lt;!– 定义Topic监听器 –&gt;<br>    &lt;jms:listener-container destination-type=&quot;topic&quot; container-type=&quot;default&quot; connection-factory=&quot;connectionFactory&quot; acknowledge=&quot;auto&quot;&gt;<br>        &lt;jms:listener destination=&quot;test.topic&quot; ref=&quot;topicReceiver1&quot;/&gt;<br>        &lt;jms:listener destination=&quot;test.topic&quot; ref=&quot;topicReceiver2&quot;/&gt;<br>    &lt;/jms:listener-container&gt;<br><br>    &lt;!– 消息消费者 end –&gt;<br>&lt;/beans&gt;  </pre><br><br><h2>3.生产者</h2><br></div><br><h3>1.queue消息队列模式</h3><br><div><br><br></div><br><div><pre code_snippet_id="1660918" snippet_file_name="blog_20160425_3_2410550" name="code" class="java">package com.jay.mq.demo1.producer.queue;<br><br><br>import javax.jms.JMSException;<br>import javax.jms.Message;<br>import javax.jms.Session;<br><br><br>import org.springframework.beans.factory.annotation.Autowired;<br>import org.springframework.beans.factory.annotation.Qualifier;<br>import org.springframework.jms.core.JmsTemplate;<br>import org.springframework.jms.core.MessageCreator;<br>import org.springframework.stereotype.Component;<br><br><br>/<strong><br>&#160;<em> ActiveMQ的消息队列模式<br>&#160;</em> Description: &lt;br/&gt;<br>&#160;<em> 队列消息的生产者，发哦是哪个消息到队列<br>&#160;</em> @author hetiewei<br>&#160;<em> @date 2016年4月25日 上午10:20:20<br>&#160;</em><br>&#160;*/<br>@Component(&quot;queueSender&quot;)<br>public class QueueSender1 {<br>&lt;span style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;<br>&lt;span style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;/</strong><br>&lt;span style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt; <em> 通过Qualifier来注入对应的Bean<br>&lt;span style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt; </em>/<br>&lt;span style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;@Autowired<br>&lt;span style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;@Qualifier(&quot;jmsQueueTemplate&quot;)<br>&lt;span style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;private JmsTemplate jmsTemplate;<br>&lt;span style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;<br>&lt;span style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;/<strong><br>&lt;span style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt; <em> Description: &lt;br/&gt;<br>&lt;span style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt; </em> 发送消息到指定的队列(目标)<br>&lt;span style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt; <em> @author hetiewei<br>&lt;span style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt; </em> @date 2016年4月25日 上午10:24:57<br>&lt;span style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt; <em> @param queueName &#160;队列名称<br>&lt;span style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt; </em> @param message &#160; &#160;消息内容<br>&lt;span style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt; */<br>&lt;span style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;public void send(String queueName, final String message){<br>&lt;span style=&quot;white-space:pre&quot;&gt;        &lt;/span&gt;jmsTemplate.send(queueName, new MessageCreator() {<br>&lt;span style=&quot;white-space:pre&quot;&gt;            &lt;/span&gt;<br>&lt;span style=&quot;white-space:pre&quot;&gt;            &lt;/span&gt;public Message createMessage(Session session) throws JMSException {<br>&lt;span style=&quot;white-space:pre&quot;&gt;                &lt;/span&gt;return session.createTextMessage(message);<br>&lt;span style=&quot;white-space:pre&quot;&gt;            &lt;/span&gt;}<br>&lt;span style=&quot;white-space:pre&quot;&gt;        &lt;/span&gt;});<br>&lt;span style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;}<br>}<br></strong></pre><br><h3><br><br><br><br>2.&nbsp;topic/sub订阅模式</h3><br></div><br><div><pre code_snippet_id="1660918" snippet_file_name="blog_20160425_4_2552254" name="code" class="java">package com.jay.mq.demo1.producer.topic;<br><br>import javax.jms.JMSException;<br>import javax.jms.Message;<br>import javax.jms.Session;<br><br>import org.springframework.beans.factory.annotation.Autowired;<br>import org.springframework.beans.factory.annotation.Qualifier;<br>import org.springframework.jms.core.JmsTemplate;<br>import org.springframework.jms.core.MessageCreator;<br>import org.springframework.stereotype.Component;<br><br>/<br> <em> ActiveMQ的topic/sub模式
 </em> Description: &lt;br/&gt;<br> <em> Topic生产者发送消息到Topic
 </em> @author hetiewei<br> <em> @date 2016年4月25日 上午11:22:40
 </em><br> <em>/<br>@Component<br>public class TopicSender1 {<br><br>    @Autowired<br>    @Qualifier(&quot;jmsTopicTemplate&quot;)<br>    private JmsTemplate jmsTemplate;<br><br>    /**
     </em> 发送一条消息到指定的队列（目标）<br>     <em> @param queueName 队列名称
     </em> @param message 消息内容<br>     <em>/<br>    public void send(String topicName,final String message){<br>        jmsTemplate.send(topicName, new MessageCreator() {<br><br>            public Message createMessage(Session session) throws JMSException {<br>                return session.createTextMessage(message);<br>            }<br>        });<br>    }<br><br>}<br></em></pre><br><br><br><br></div><br><h2>4.消费者</h2><br><h3>1.queue消息队列模式</h3><br><div><pre code_snippet_id="1660918" snippet_file_name="blog_20160425_5_3250365" name="code" class="java">package com.jay.mq.demo1.consumer.queue;<br><br>import javax.jms.JMSException;<br>import javax.jms.Message;<br>import javax.jms.MessageListener;<br>import javax.jms.TextMessage;<br><br>import org.springframework.stereotype.Component;<br><br>/**
  Description: &lt;br/&gt;<br> <em> 消息队列监听器
 </em> @author hetiewei<br> <em> @date 2016年4月25日 上午10:32:14
 </em><br> <em>/<br>@Component<br>public class QueueReceiver1 implements MessageListener {<br><br>    public void onMessage(Message message) {<br>        try {<br>            System.out.println(&quot;QueueReceiver1接收到消息：&quot;+((TextMessage)message).getText());<br>        } catch (JMSException e) {<br>            e.printStackTrace();<br>        }<br>    }<br><br>}<br></em></pre><br><br><br><br></div><br><div><pre code_snippet_id="1660918" snippet_file_name="blog_20160425_6_3915457" name="code" class="java">package com.jay.mq.demo1.consumer.queue;<br><br>import javax.jms.JMSException;<br>import javax.jms.Message;<br>import javax.jms.MessageListener;<br>import javax.jms.TextMessage;<br><br>import org.springframework.stereotype.Component;<br><br>/**
  Description: &lt;br/&gt;<br> <em> 消息队列监听器
 </em> @author hetiewei<br> <em> @date 2016年4月25日 上午10:32:14
 </em><br> <em>/<br>@Component<br>public class QueueReceiver2 implements MessageListener {<br><br>    public void onMessage(Message message) {<br>        try {<br>            System.out.println(&quot;QueueReceiver2接收到消息：&quot;+((TextMessage)message).getText());<br>        } catch (JMSException e) {<br>            e.printStackTrace();<br>        }<br>    }<br><br>}<br></em></pre><br><br><br><br></div><br><h3>2.topic/sub订阅模式</h3><br><div><br><br></div><br><div><pre code_snippet_id="1660918" snippet_file_name="blog_20160425_7_6249771" name="code" class="java">package com.jay.mq.demo1.consumer.topic;<br><br>import javax.jms.JMSException;<br>import javax.jms.Message;<br>import javax.jms.MessageListener;<br>import javax.jms.TextMessage;<br><br>import org.springframework.stereotype.Component;<br><br>@Component<br>public class TopicReceiver1 implements MessageListener{<br><br>    public void onMessage(Message message) {<br>        try {<br>            System.out.println(&quot;TopicReceiver1接收到消息:&quot;+((TextMessage)message).getText());<br>        } catch (JMSException e) {<br>            e.printStackTrace();<br>        }<br>    }<br><br>}<br></pre><br><br><br><br></div><br><div><pre code_snippet_id="1660918" snippet_file_name="blog_20160425_8_4755272" name="code" class="java">package com.jay.mq.demo1.consumer.topic;<br><br>import javax.jms.JMSException;<br>import javax.jms.Message;<br>import javax.jms.MessageListener;<br>import javax.jms.TextMessage;<br><br>import org.springframework.stereotype.Component;<br><br>@Component<br>public class TopicReceiver2 implements MessageListener{<br><br>    public void onMessage(Message message) {<br>        try {<br>            System.out.println(&quot;TopicReceiver2接收到消息:&quot;+((TextMessage)message).getText());<br>        } catch (JMSException e) {<br>            e.printStackTrace();<br>        }<br>    }<br><br>}<br></pre><br><h2></h2><br><h2>5.Controller</h2><br><div><pre code_snippet_id="1660918" snippet_file_name="blog_20160425_9_993281" name="code" class="java">package com.jay.controller.demo1;<br><br>import javax.annotation.Resource;<br><br>import org.springframework.beans.factory.annotation.Autowired;<br>import org.springframework.stereotype.Controller;<br>import org.springframework.web.bind.annotation.RequestMapping;<br>import org.springframework.web.bind.annotation.RequestParam;<br>import org.springframework.web.bind.annotation.ResponseBody;<br><br>import com.jay.mq.demo1.producer.queue.QueueSender1;<br>import com.jay.mq.demo1.producer.topic.TopicSender1;<br><br>/**
  Description: &lt;br/&gt;<br> <em> 
 </em> @author hetiewei<br> <em> @date 2016年4月25日 上午10:35:31
 </em><br> <em>/<br>@Controller<br>@RequestMapping(&quot;activemq&quot;)<br>public class ActivemqController1 {<br><br>    @Resource<br>    private QueueSender1 queueSender;<br>    @Autowired<br>    private TopicSender1 topicSender;<br><br>    /**
     </em> 发送消息到队列<br>     <em> Queue队列：仅有一个订阅者会收到消息，消息一旦被处理就不会存在队列中
     </em> @param message<br>     <em> @return String
     </em>/<br>    @ResponseBody<br>    @RequestMapping(&quot;queueSender&quot;)<br>    public String queueSender(@RequestParam(&quot;message&quot;)String message){<br>        String opt=&quot;&quot;;<br>        try {<br>            queueSender.send(&quot;test.queue&quot;, message);<br>            opt = &quot;suc&quot;;<br>        } catch (Exception e) {<br>            opt = e.getCause().toString();<br>        }<br>        return opt;<br>    }<br><br>    @ResponseBody<br>    @RequestMapping(&quot;topicSender&quot;)<br>    public String topoicSender(@RequestParam(&quot;message&quot;)String message){<br>        String opt = &quot;&quot;;<br>        try {<br>            topicSender.send(&quot;test.topic&quot;, message);<br>            opt = &quot;suc&quot;;<br>        } catch (Exception e) {<br>            opt = e.getCause().toString();<br>        }<br>        return opt;<br>    }<br><br><br>}<br></pre><br><h1><br><br><br><br>3.<span style="color:rgb(64,64,64); line-height:25.2px; font-family:Cambria; font-size:14px">ActiveMQ</span><span style="color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:1.3em; line-height:1.1">的多种部署方式</span></h1><br></div><br></div><br><div><br><p align="left" style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>单点的<span style="line-height:25.2px; font-family:Calibri">ActiveMQ</span>作为企业应用无法满足高可用和集群的需求，所以<span style="line-height:25.2px; font-family:Calibri">ActiveMQ</span>提供了<span style="line-height:25.2px; font-family:Calibri">master-slave</span>、<span style="line-height:25.2px; font-family:Calibri">broker<br> cluster</span>等多种部署方式，但通过分析多种部署方式之后我认为需要将两种部署方式相结合才能满足我们公司分布式和高可用的需求，所以后面就重点将解如何将两种部署方式相结合。</p><br><h5 style="font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-weight:500; line-height:1.1; color:rgb(64,64,64); margin-top:10px; margin-bottom:10px; font-size:14px"><br><a target="_blank" name="t7" style="color:rgb(136,136,136); background-color:transparent"></a><span style="line-height:25.2px">1、Master-Slave部署方式</span></h5><br><h6 style="font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-weight:500; line-height:1.1; color:rgb(64,64,64); margin-top:10px; margin-bottom:10px; font-size:12px"><br><a target="_blank" name="t8" style="color:rgb(136,136,136); background-color:transparent"></a><span style="line-height:21.6px">1）shared filesystem Master-Slave部署方式</span></h6><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>主要是通过共享存储目录来实现<span style="line-height:25.2px; font-family:Calibri">master</span>和<span style="line-height:25.2px; font-family:Calibri">slave</span>的热备，所有的<span style="line-height:25.2px; font-family:Calibri">ActiveMQ</span>应用都在不断地获取共享目录的控制权，哪个应用抢到了控制权，它就成为<span style="line-height:25.2px; font-family:Calibri">master</span>。</p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>多个共享存储目录的应用，谁先启动，谁就可以最早取得共享目录的控制权成为<span style="line-height:25.2px; font-family:Calibri">master</span>，其他的应用就只能作为<span style="line-height:25.2px; font-family:Calibri">slave</span>。</p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><img title="p2.png" border="0" alt="p2.png" src="http://static.open-open.com/lib/uploadImg/20140515/20140515120001_591.png" width="323" height="250" style="border:0px; vertical-align:middle; max-width:100%"></p><br><h6 style="font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-weight:500; line-height:1.1; color:rgb(64,64,64); margin-top:10px; margin-bottom:10px; font-size:12px"><br><a target="_blank" name="t9" style="color:rgb(136,136,136); background-color:transparent"></a><span style="line-height:21.6px">2）shared database Master-Slave方式</span></h6><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>与<span style="line-height:25.2px; font-family:Calibri">shared filesystem</span>方式类&#20284;，只是共享的存储介质由文件系统改成了数据库而已。</p><br><h6 style="font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-weight:500; line-height:1.1; color:rgb(64,64,64); margin-top:10px; margin-bottom:10px; font-size:12px"><br><a target="_blank" name="t10" style="color:rgb(136,136,136); background-color:transparent"></a><span style="line-height:21.6px">3）Replicated LevelDB Store方式</span></h6><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>这种主备方式是<span style="line-height:25.2px; font-family:Calibri">ActiveMQ5.9</span>以后才新增的特性，使用<span style="line-height:25.2px; font-family:Calibri">ZooKeeper</span>协调选择一个<span style="line-height:25.2px; font-family:Calibri">node</span>作为<span style="line-height:25.2px; font-family:Calibri">master</span>。被选择的<span style="line-height:25.2px; font-family:Calibri">master<br> broker node</span>开启并接受客户端连接。</p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px">其他<span style="line-height:25.2px; font-family:Calibri">node</span>转入<span style="line-height:25.2px; font-family:Calibri">slave</span>模式，连接<span style="line-height:25.2px; font-family:Calibri">master</span>并同步他们的存储状态。<span style="line-height:25.2px; font-family:Calibri">slave</span>不接受客户端连接。所有的存储操作都将被复制到连接至<span style="line-height:25.2px; font-family:Calibri">Master</span>的<span style="line-height:25.2px; font-family:Calibri">slaves</span>。</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px">如果<span style="line-height:25.2px; font-family:Calibri">master</span>死了，得到了最新更新的<span style="line-height:25.2px; font-family:Calibri">slave</span>被允许成为<span style="line-height:25.2px; font-family:Calibri">master</span>。<span style="line-height:25.2px; font-family:Calibri">fialed<br> node</span>能够重新加入到网络中并连接<span style="line-height:25.2px; font-family:Calibri">master</span>进入<span style="line-height:25.2px; font-family:Calibri">slave mode</span>。所有需要同步的<span style="line-height:25.2px; font-family:Calibri">disk</span>的消息操作都将等待存储状态被复制到其他法定节点的操作完成才能完成。所以，如果你配置了<span style="line-height:25.2px; font-family:Calibri">replicas=3</span>，那么法定大小是<span style="line-height:25.2px; font-family:Calibri">(3/2)&#43;1=2.<br> Master</span>将会存储并更新然后等待<span style="line-height:25.2px; font-family:Calibri">&nbsp;(2-1)=1</span>个<span style="line-height:25.2px; font-family:Calibri">slave</span>存储和更新完成，才汇报<span style="line-height:25.2px; font-family:Calibri">success</span>。至于为什么是<span style="line-height:25.2px; font-family:Calibri">2-1</span>，熟悉<span style="line-height:25.2px; font-family:Calibri">Zookeeper</span>的应该知道，有一个<span style="line-height:25.2px; font-family:Calibri">node</span>要作为观擦者存在。</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px">单一个新的<span style="line-height:25.2px; font-family:Calibri">master</span>被选中，你需要至少保障一个法定<span style="line-height:25.2px; font-family:Calibri">node</span>在线以能够找到拥有最新状态的<span style="line-height:25.2px; font-family:Calibri">node</span>。这个<span style="line-height:25.2px; font-family:Calibri">node</span>将会成为新的<span style="line-height:25.2px; font-family:Calibri">master</span>。因此，推荐运行至少<span style="line-height:25.2px; font-family:Calibri">3</span>个<span style="line-height:25.2px; font-family:Calibri">replica<br> nodes</span>，以防止一个<span style="line-height:25.2px; font-family:Calibri">node</span>失败了，服务中断。</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><img title="p3.png" border="0" alt="p3.png" src="http://static.open-open.com/lib/uploadImg/20140515/20140515115951_604.png" width="328" height="153" style="border:0px; vertical-align:middle; max-width:100%"></p><br><h5 style="font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-weight:500; line-height:1.1; color:rgb(64,64,64); margin-top:10px; margin-bottom:10px; font-size:14px"><br><a target="_blank" name="t11" style="color:rgb(136,136,136); background-color:transparent"></a><span style="line-height:25.2px">2、Broker-Cluster部署方式</span></h5><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>前面的<span style="line-height:25.2px; font-family:Calibri">Master-Slave</span>的方式虽然能解决多服务热备的高可用问题，但无法解决负载均衡和分布式的问题。<span style="line-height:25.2px; font-family:Calibri">Broker-Cluster</span>的部署方式就可以解决负载均衡的问题。</p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Broker-Cluster</span>部署方式中，各个<span style="line-height:25.2px; font-family:Calibri">broker</span>通过网络互相连接，并共享<span style="line-height:25.2px; font-family:Calibri">queue</span>。当<span style="line-height:25.2px; font-family:Calibri">broker-A</span>上面指定的<span style="line-height:25.2px; font-family:Calibri">queue-A</span>中接收到一个<span style="line-height:25.2px; font-family:Calibri">message</span>处于<span style="line-height:25.2px; font-family:Calibri">pending</span>状态，而此时没有<span style="line-height:25.2px; font-family:Calibri">consumer</span>连接<span style="line-height:25.2px; font-family:Calibri">broker-A</span>时。如果<span style="line-height:25.2px; font-family:Calibri">cluster</span>中的<span style="line-height:25.2px; font-family:Calibri">broker-B</span>上面由一个<span style="line-height:25.2px; font-family:Calibri">consumer</span>在消费<span style="line-height:25.2px; font-family:Calibri">queue-A</span>的消息，那么<span style="line-height:25.2px; font-family:Calibri">broker-B</span>会先通过内部网络获取到<span style="line-height:25.2px; font-family:Calibri">broker-A</span>上面的<span style="line-height:25.2px; font-family:Calibri">message</span>，并通知自己的<span style="line-height:25.2px; font-family:Calibri">consumer</span>来消费。</p><br><h6 style="font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-weight:500; line-height:1.1; color:rgb(64,64,64); margin-top:10px; margin-bottom:10px; font-size:12px"><br><a target="_blank" name="t12" style="color:rgb(136,136,136); background-color:transparent"></a><span style="line-height:21.6px">1）static Broker-Cluster部署</span></h6><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>在<span style="line-height:25.2px; font-family:Calibri">activemq.xml</span>文件中静态指定<span style="line-height:25.2px; font-family:Calibri">Broker</span>需要建立桥连接的其他<span style="line-height:25.2px; font-family:Calibri">Broker</span>：</p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">1、</span>&nbsp;&nbsp;<span style="line-height:25.2px">首先在<span style="line-height:25.2px; font-family:Calibri">Broker-A</span>节点中添加<span style="line-height:25.2px; font-family:Calibri">networkConnector</span>节点：</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;networkConnectors&gt;&nbsp;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;networkConnector&nbsp;&nbsp; uri=&quot;static:(tcp:// 0.0.0.0:61617)&quot;duplex=&quot;false&quot;/&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;/networkConnectors&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">2、</span>&nbsp;&nbsp;<span style="line-height:25.2px">修改<span style="line-height:25.2px; font-family:Calibri">Broker-A</span>节点中的服务提供端口为<span style="line-height:25.2px; font-family:Calibri">61616</span>：</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;transportConnectors&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;transportConnectorname=&quot;openwire&quot;uri=&quot;tcp://0.0.0.0:61616?maximumConnections=1000&amp;amp;wireFormat.maxFrameSize=104857600&quot;/&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;/transportConnectors&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">3、</span>&nbsp;&nbsp;<span style="line-height:25.2px">在<span style="line-height:25.2px; font-family:Calibri">Broker-B</span>节点中添加<span style="line-height:25.2px; font-family:Calibri">networkConnector</span>节点：</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;networkConnectors&gt;&nbsp;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;networkConnector&nbsp;&nbsp; uri=&quot;static:(tcp:// 0.0.0.0:61616)&quot;duplex=&quot;false&quot;/&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;/networkConnectors&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">4、</span>&nbsp;&nbsp;<span style="line-height:25.2px">修改<span style="line-height:25.2px; font-family:Calibri">Broker-A</span>节点中的服务提供端口为<span style="line-height:25.2px; font-family:Calibri">61617</span>：</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;transportConnectors&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;transportConnectorname=&quot;openwire&quot;uri=&quot;tcp://0.0.0.0:61617?maximumConnections=1000&amp;amp;wireFormat.maxFrameSize=104857600&quot;/&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;/transportConnectors&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">5</span>、分别启动<span style="line-height:25.2px; font-family:Calibri">Broker-A</span>和<span style="line-height:25.2px; font-family:Calibri">Broker-B</span>。</p><br><h6 style="font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-weight:500; line-height:1.1; color:rgb(64,64,64); margin-top:10px; margin-bottom:10px; font-size:12px"><br><a target="_blank" name="t13" style="color:rgb(136,136,136); background-color:transparent"></a><span style="line-height:21.6px">2）Dynamic Broker-Cluster部署</span></h6><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>在<span style="line-height:25.2px; font-family:Calibri">activemq.xml</span>文件中不直接指定<span style="line-height:25.2px; font-family:Calibri">Broker</span>需要建立桥连接的其他<span style="line-height:25.2px; font-family:Calibri">Broker</span>，由<span style="line-height:25.2px; font-family:Calibri">activemq</span>在启动后动态查找：</p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">1、</span>&nbsp;&nbsp;<span style="line-height:25.2px">首先在<span style="line-height:25.2px; font-family:Calibri">Broker-A</span>节点中添加<span style="line-height:25.2px; font-family:Calibri">networkConnector</span>节点：</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;networkConnectors&gt;&nbsp;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;networkConnectoruri=&quot;multicast://default&quot;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dynamicOnly=&quot;true&quot;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networkTTL=&quot;3&quot;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prefetchSize=&quot;1&quot;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;decreaseNetworkConsumerPriority=&quot;true&quot; /&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;/networkConnectors&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">2</span>、修改<span style="line-height:25.2px; font-family:Calibri">Broker-A</span>节点中的服务提供端口为<span style="line-height:25.2px; font-family:Calibri">61616</span>：</p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;transportConnectors&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;transportConnectorname=&quot;openwire&quot;uri=&quot;tcp://0.0.0.0:61616? &quot; discoveryUri=&quot;multicast://default&quot;/&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;/transportConnectors&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">3</span>、在<span style="line-height:25.2px; font-family:Calibri">Broker-B</span>节点中添加<span style="line-height:25.2px; font-family:Calibri">networkConnector</span>节点：</p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;networkConnectors&gt;&nbsp;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;networkConnectoruri=&quot;multicast://default&quot;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dynamicOnly=&quot;true&quot;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networkTTL=&quot;3&quot;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prefetchSize=&quot;1&quot;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;decreaseNetworkConsumerPriority=&quot;true&quot; /&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;/networkConnectors&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">4</span>、修改<span style="line-height:25.2px; font-family:Calibri">Broker-B</span>节点中的服务提供端口为<span style="line-height:25.2px; font-family:Calibri">61617</span>：</p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;transportConnectors&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;transportConnectorname=&quot;openwire&quot;uri=&quot;tcp://0.0.0.0:61617&quot; discoveryUri=&quot;multicast://default&quot;/&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;/transportConnectors&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">5</span>、启动<span style="line-height:25.2px; font-family:Calibri">Broker-A</span>和<span style="line-height:25.2px; font-family:Calibri">Broker-B</span></p><br><h5 style="font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-weight:500; line-height:1.1; color:rgb(64,64,64); margin-top:10px; margin-bottom:10px; font-size:14px"><br><a target="_blank" name="t14" style="color:rgb(136,136,136); background-color:transparent"></a><span style="line-height:25.2px">2、Master-Slave与<span style="line-height:25.2px; font-family:Calibri">Broker-Cluster</span>相结合的部署方式</span></h5><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>可以看到<span style="line-height:25.2px; font-family:Calibri">Master-Slave</span>的部署方式虽然解决了高可用的问题，但不支持负载均衡，<span style="line-height:25.2px; font-family:Calibri">Broker-Cluster</span>解决了负载均衡，但当其中一个<span style="line-height:25.2px; font-family:Calibri">Broker</span>突然宕掉的话，那么存在于该<span style="line-height:25.2px; font-family:Calibri">Broker</span>上处于<span style="line-height:25.2px; font-family:Calibri">Pending</span>状态的<span style="line-height:25.2px; font-family:Calibri">message</span>将会丢失，无法达到高可用的目的。</p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>由于目前<span style="line-height:25.2px; font-family:Calibri">ActiveMQ</span>官网上并没有一个明确的将两种部署方式相结合的部署方案，所以我尝试者把两者结合起来部署：</p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img title="p4.png" border="0" alt="p4.png" src="http://static.open-open.com/lib/uploadImg/20140515/20140515115919_992.png" width="636" height="361" style="border:0px; vertical-align:middle; max-width:100%"></span></p><br><h6 style="font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-weight:500; line-height:1.1; color:rgb(64,64,64); margin-top:10px; margin-bottom:10px; font-size:12px"><br><a target="_blank" name="t15" style="color:rgb(136,136,136); background-color:transparent"></a><span style="line-height:21.6px">1、部署的配置修改</span></h6><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>这里以<span style="line-height:25.2px; font-family:Calibri">Broker-A &#43; Broker-B</span>建立<span style="line-height:25.2px; font-family:Calibri">cluster</span>，<span style="line-height:25.2px; font-family:Calibri">Broker-C</span>作为<span style="line-height:25.2px; font-family:Calibri">Broker-B</span>的<span style="line-height:25.2px; font-family:Calibri">slave</span>为例：</p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">1）</span>首先在<span style="line-height:25.2px; font-family:Calibri">Broker-A</span>节点中添加<span style="line-height:25.2px; font-family:Calibri">networkConnector</span>节点：</p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;networkConnectors&gt;&nbsp;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;networkConnector&nbsp;&nbsp; uri=&quot;<span style="line-height:25.2px; color:red">masterslave:(tcp://0.0.0.0:61617,tcp:// 0.0.0.0:61618</span>)&quot; duplex=&quot;false&quot;/&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;/networkConnectors&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">2）</span>修改<span style="line-height:25.2px; font-family:Calibri">Broker-A</span>节点中的服务提供端口为<span style="line-height:25.2px; font-family:Calibri">61616</span>：</p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;transportConnectors&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;transportConnectorname=&quot;openwire&quot;uri=&quot;tcp://0.0.0.0:61616?maximumConnections=1000&amp;amp;wireFormat.maxFrameSize=104857600&quot;/&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;/transportConnectors&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">3）</span>在<span style="line-height:25.2px; font-family:Calibri">Broker-B</span>节点中添加<span style="line-height:25.2px; font-family:Calibri">networkConnector</span>节点：</p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;networkConnectors&gt;&nbsp;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;networkConnector&nbsp;&nbsp; uri=&quot;static:(tcp:// 0.0.0.0:61616)&quot;duplex=&quot;false&quot;/&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;/networkConnectors&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">4）</span>修改<span style="line-height:25.2px; font-family:Calibri">Broker-B</span>节点中的服务提供端口为<span style="line-height:25.2px; font-family:Calibri">61617</span>：</p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;transportConnectors&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;transportConnectorname=&quot;openwire&quot;uri=&quot;tcp://0.0.0.0:61617?maximumConnections=1000&amp;amp;wireFormat.maxFrameSize=104857600&quot;/&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;/transportConnectors&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">5）</span><span style="line-height:25.2px">修改<span style="line-height:25.2px; font-family:Calibri">Broker-B</span>节点中的持久化方式：</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;persistenceAdapter&gt;</p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;kahaDB directory=&quot;<span style="line-height:25.2px; color:red">/localhost/kahadb</span>&quot;/&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&lt;/persistenceAdapter&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">6）</span>在<span style="line-height:25.2px; font-family:Calibri">Broker-C</span>节点中添加<span style="line-height:25.2px; font-family:Calibri">networkConnector</span>节点：</p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;networkConnectors&gt;&nbsp;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;networkConnector&nbsp;&nbsp; uri=&quot;static:(tcp:// 0.0.0.0:61616)&quot;duplex=&quot;false&quot;/&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;/networkConnectors&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">7）</span>修改<span style="line-height:25.2px; font-family:Calibri">Broker-C</span>节点中的服务提供端口为<span style="line-height:25.2px; font-family:Calibri">61618</span>：</p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;transportConnectors&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;transportConnectorname=&quot;openwire&quot;uri=&quot;tcp://0.0.0.0:61618?maximumConnections=1000&amp;amp;wireFormat.maxFrameSize=104857600&quot;/&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&lt;/transportConnectors&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">8）</span>修改<span style="line-height:25.2px; font-family:Calibri">Broker-B</span>节点中的持久化方式：</p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;persistenceAdapter&gt;</p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;kahaDB directory=&quot;<span style="line-height:25.2px; color:red">/localhost/kahadb</span>&quot;/&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/persistenceAdapter&gt;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:Calibri">9）</span>分别启动<span style="line-height:25.2px; font-family:Calibri">broker-A</span>、<span style="line-height:25.2px; font-family:Calibri">broker-B</span>、<span style="line-height:25.2px; font-family:Calibri">broker-C</span>，因为是<span style="line-height:25.2px; font-family:Calibri">broker-B</span>先启动，所以“<span style="line-height:25.2px; font-family:Calibri">/localhost/kahadb</span>”目录被<span style="line-height:25.2px; font-family:Calibri">lock</span>住，<span style="line-height:25.2px; font-family:Calibri">broker-C</span>将一直处于挂起状态，当人为停掉<span style="line-height:25.2px; font-family:Calibri">broker-B</span>之后，<span style="line-height:25.2px; font-family:Calibri">broker-C</span>将获取目录“<span style="line-height:25.2px; font-family:Calibri">/localhost/kahadb</span>”的控制权，重新与<span style="line-height:25.2px; font-family:Calibri">broker-A</span>组成<span style="line-height:25.2px; font-family:Calibri">cluster</span>提供服务。</p><br><br><br></div><br><h1><br><br>4.ActiveMQ之Master-Slaver&#43;负载均衡</h1><br><div><br><br></div><br><div><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br>什么叫中间件?<br style="line-height:10px"><br>中间件为软件应用提供了操作系统所提供的服务之外的服务，可以把中间件描述为&quot;软件胶水&quot;。中间件不是操作系统的一部分，不是数据库操作系统，也不是应用软件的一部分，而是能够让软件开发者方便的处理通信、输入和输出，能够专注自己应用的部分。</p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; color:rgb(76,51,229)">消息中间件解决了应用之间的消息传递、解耦、异步的问题。</span><br style="line-height:10px"><br><span style="line-height:1.5">ActiveMQ 是Apache出品，最流行的，能力强劲的开源消息总线。ActiveMQ 是一个完全支持JMS1.1和J2EE 1.4规范的 JMS Provider实现，尽管JMS规范出台已经是很久的事情了，但是JMS在当今的J2EE应用中间仍然扮演着特殊的地位。</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:1.5">一般中间件都提供了横向扩展和纵向扩展，<span style="line-height:25.2px">横向扩展就是我们经常说的<span style="line-height:25.2px; color:rgb(76,51,229)">负载均衡</span></span>,<span style="line-height:25.2px">纵向扩展提供了<span style="line-height:25.2px; color:rgb(76,51,229)">Master-Slaver</span></span>;</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:1.5"><span style="line-height:25.2px; color:rgb(76,51,229)">负载均衡:<span style="line-height:25.2px; color:rgb(0,0,0)">提供</span></span>负载均衡的中间件都对外提供服务<br style="line-height:10px"><br><span style="line-height:25.2px; color:rgb(76,51,229)">Master-Slaver：<span style="line-height:25.2px; color:rgb(0,0,0)">同时只有一个中间件对外提供服务,当Master出现挂机等问题，Slaver会自动接管</span></span><br style="line-height:10px"><br></span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:1.5"><span style="line-height:25.2px; color:rgb(76,51,229)"><span style="line-height:25.2px; color:rgb(0,0,0)">看一个整合的简图:<br style="line-height:10px"><br><img alt="" src="http://static.open-open.com/lib/uploadImg/20160102/20160102210319_351.png" width="509" height="308" style="border:0px; vertical-align:middle; max-width:100%"><br style="line-height:10px"><br></span></span></span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:1.5"><span style="line-height:25.2px; color:rgb(76,51,229)">Master-Slave和Broker Cluster</span></span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px">准备：<br style="line-height:10px"><br>jdk1.6，apache-activemq-5.10.0，mysql5.1，zookeeper-3.4.3</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:1.5"><span style="line-height:25.2px; color:rgb(76,51,229)"><span style="line-height:25.2px; color:rgb(0,0,0)">先来看看<span style="line-height:25.2px; color:rgb(76,51,229)">Master-Slave<span style="line-height:25.2px; color:rgb(0,0,0)">模式</span></span></span></span></span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:1.5"><span style="line-height:25.2px; color:rgb(76,51,229)">Shared File System Master Slave</span></span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:1.5"><span style="line-height:25.2px; color:rgb(76,51,229)"><span style="line-height:25.2px; color:rgb(0,0,0)">本次测试在同一台机器上：<br style="line-height:10px"><br>首先更改配置conf/activemq,做如下修改：<br style="line-height:10px"><br></span></span></span></p><br><pre class="brush:java; toolbar: true; auto-links: false;" style="overflow:auto; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; padding:6px; margin-top:0px; margin-bottom:10px; line-height:1.45; color:rgb(51,51,51); word-break:break-all; word-wrap:break-word; border:none; background-color:rgb(246,246,246)">&lt;persistenceAdapter&gt;<br>        &lt;!–&lt;kahaDB directory=&quot;${activemq.data}/kahadb&quot;/&gt;–&gt;<br>    &lt;kahaDB directory=&quot;D:/kahaDB&quot;/&gt;<br> &lt;/persistenceAdapter&gt;</pre><br><span style="color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px; line-height:25.2px">将activemq拷贝3份，分别：apache-activemq-5.10.0-M1，&nbsp;</span><span style="line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px">apache-activemq-5.10.0-M2，<span style="line-height:25.2px">apache-activemq-5.10.0-M3</span></span><span style="color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px; line-height:25.2px">，分别启动activemq命令，启动的日志分别是:&nbsp;</span><br style="line-height:10px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><img alt="" src="http://static.open-open.com/lib/uploadImg/20160102/20160102210319_3.png" width="644" height="69" style="border:0px; vertical-align:middle; max-width:100%; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px; line-height:25.2px"><span style="color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px; line-height:25.2px"></span><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:1.5"><span style="line-height:25.2px; color:rgb(76,51,229)"><span style="line-height:25.2px; color:rgb(0,0,0)">表示当前进程是Master<br style="line-height:10px"><br><br style="line-height:10px"><br><img alt="" src="http://static.open-open.com/lib/uploadImg/20160102/20160102210319_893.png" width="643" height="72" style="border:0px; vertical-align:middle; max-width:100%"><br style="line-height:10px"><br></span></span></span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:1.5"><span style="line-height:25.2px; color:rgb(76,51,229)"><span style="line-height:25.2px; color:rgb(0,0,0)">表示当前进程没有获取到锁，作为Slaver<br style="line-height:10px"><br></span></span></span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:1.5"><span style="line-height:25.2px; color:rgb(76,51,229)"><span style="line-height:25.2px; color:rgb(0,0,0)">测试：</span></span></span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px">下面的例子中分别提供了<span style="line-height:25.2px; color:rgb(76,51,229)">Producer<span style="line-height:25.2px; color:rgb(0,0,0)">(Sender类)</span></span>和<span style="line-height:25.2px; color:rgb(76,51,229)">Consumer<span style="line-height:25.2px; color:rgb(0,0,0)">(Receiver类)<br style="line-height:10px"><br>我们首先用Producer发送消息给activemq，然后停止Master，然后再用Consumer接受消息，测试结果是可以接受到数据的。</span></span></span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px"><span style="line-height:25.2px; color:rgb(76,51,229)"><span style="line-height:25.2px; color:rgb(0,0,0)">2）.<span style="line-height:25.2px; color:rgb(76,51,229)">JDBC Master Slave</span><span style="line-height:25.2px; color:rgb(76,51,229)"><br style="line-height:10px"><br><span style="line-height:25.2px; color:rgb(0,0,0)">JDBC Master Slave模式和Shared File Sysytem Master Slave模式的原理是一样的，只是把共享文件系统换成了共享数据库。</span></span></span></span></span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px"><span style="line-height:25.2px; color:rgb(76,51,229)"><span style="line-height:25.2px; color:rgb(0,0,0)"><span style="line-height:25.2px; color:rgb(76,51,229)"><span style="line-height:25.2px; color:rgb(0,0,0)">修改配置文件conf/activemq<br style="line-height:10px"><br></span></span></span></span></span></p><br><pre class="brush:java; toolbar: true; auto-links: false;" style="overflow:auto; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; padding:6px; margin-top:0px; margin-bottom:10px; line-height:1.45; color:rgb(51,51,51); word-break:break-all; word-wrap:break-word; border:none; background-color:rgb(246,246,246)"><pre code_snippet_id="1660918" snippet_file_name="blog_20160425_10_9093290" name="code" class="html">&lt;persistenceAdapter&gt;<br>        &lt;!–&lt;kahaDB directory=&quot;${activemq.data}/kahadb&quot;/&gt;–&gt;<br>    &lt;!–&lt;kahaDB directory=&quot;D:/kahaDB&quot;/&gt;–&gt;<br>        &lt;jdbcPersistenceAdapter dataDirectory=&quot;${activemq.base}/data&quot; dataSource=&quot;#mysql-ds&quot;/&gt;<br>  &lt;/persistenceAdapter&gt;</pre><br><br></pre><br><span style="color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px; line-height:25.2px">添加数据源：</span><br><pre class="brush:java; toolbar: true; auto-links: false;" style="overflow:auto; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; padding:6px; margin-top:0px; margin-bottom:10px; line-height:1.45; color:rgb(51,51,51); word-break:break-all; word-wrap:break-word; border:none; background-color:rgb(246,246,246)"><pre code_snippet_id="1660918" snippet_file_name="blog_20160425_11_1808506" name="code" class="html">&lt;bean id=&quot;mysql-ds&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; destroy-method=&quot;close&quot;&gt;<br>    &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;<br>    &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost/activemq?relaxAutoCommit=true&quot;/&gt;<br>    &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;<br>    &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt;<br>    &lt;property name=&quot;poolPreparedStatements&quot; value=&quot;true&quot;/&gt;<br>    &lt;/bean&gt;</pre><br><br></pre><br><span style="line-height:25.2px; font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px; color:rgb(229,51,51)">注：这里使用的是mysql，所以需要mysql驱动程序：</span><span style="color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px; line-height:25.2px">&nbsp;</span><span style="line-height:25.2px; font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px; color:rgb(229,51,51)">mysql-connector-java-5.1.18，讲jar包放入lib文件夹下面，驱动版本不对，会出现如下错误:</span><span style="color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px; line-height:25.2px">&nbsp;</span><span style="line-height:25.2px; font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px; color:rgb(229,51,51)">Database<br> lock driver override not found for : [mysql_connect</span><span style="color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px; line-height:25.2px">&nbsp;</span><span style="line-height:25.2px; font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px; color:rgb(229,51,51)">…</span><span style="color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px; line-height:25.2px"></span><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><br style="line-height:10px"><br></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:1.5">分别拷贝到其他几个文件夹下，分别启动，启动成功后我们可以看到数据库中多了几张表：</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px"><span style="line-height:25.2px; color:rgb(76,51,229)"><span style="line-height:25.2px; color:rgb(0,0,0)"><span style="line-height:25.2px; color:rgb(76,51,229)"><span style="line-height:25.2px; color:rgb(0,0,0)"><img alt="" src="http://static.open-open.com/lib/uploadImg/20160102/20160102210319_95.png" width="318" height="148" style="border:0px; vertical-align:middle; max-width:100%"><br style="line-height:10px"><br></span></span></span></span></span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px"><span style="line-height:25.2px; color:rgb(76,51,229)"><span style="line-height:25.2px; color:rgb(0,0,0)"><span style="line-height:25.2px; color:rgb(76,51,229)"><span style="line-height:25.2px; color:rgb(0,0,0)">测试方式同上；<br style="line-height:10px"><br>官网手册:<a target="_blank" href="http://activemq.apache.org/jdbc-master-slave.html" rel="nofollow" style="color:rgb(0,95,169); text-decoration:none; background-color:transparent">http://activemq.apache.org/jdbc-master-slave.html</a></span></span></span></span></span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px"><span style="line-height:25.2px; color:rgb(76,51,229)"><span style="line-height:25.2px; color:rgb(0,0,0)"><span style="line-height:25.2px; color:rgb(76,51,229)"><span style="line-height:25.2px; color:rgb(0,0,0)">3).<span style="line-height:25.2px; color:rgb(76,51,229)">Replicated<br> LevelDB Store</span><br style="line-height:10px"><br><span style="line-height:25px; color:rgb(64,64,64); background-color:rgb(250,250,250)">这种方式是</span><span style="line-height:25px; font-family:Calibri; color:rgb(64,64,64); background-color:rgb(250,250,250)">ActiveMQ5.9</span><span style="line-height:25px; color:rgb(64,64,64); background-color:rgb(250,250,250)">以后才新增的特性，使用</span><span style="line-height:25px; font-family:Calibri; color:rgb(64,64,64); background-color:rgb(250,250,250)">ZooKeeper</span><span style="line-height:25px; color:rgb(64,64,64); background-color:rgb(250,250,250)">协调选择一个</span><span style="line-height:25px; font-family:Calibri; color:rgb(64,64,64); background-color:rgb(250,250,250)">node</span><span style="line-height:25px; color:rgb(64,64,64); background-color:rgb(250,250,250)">作为</span><span style="line-height:25px; font-family:Calibri; color:rgb(64,64,64); background-color:rgb(250,250,250)">master</span></span></span></span></span></span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px"><span style="line-height:25.2px; color:rgb(76,51,229)"><span style="line-height:25.2px; color:rgb(0,0,0)"><span style="line-height:25.2px; color:rgb(76,51,229)"><span style="line-height:25.2px; color:rgb(0,0,0)"><span style="line-height:25.2px">修改配置文件conf/activemq：<br style="line-height:10px"><br></span></span></span></span></span></span></p><br><pre class="brush:java; toolbar: true; auto-links: false;" style="overflow:auto; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; padding:6px; margin-top:0px; margin-bottom:10px; line-height:1.45; color:rgb(51,51,51); word-break:break-all; word-wrap:break-word; border:none; background-color:rgb(246,246,246)"><pre code_snippet_id="1660918" snippet_file_name="blog_20160425_12_5047109" name="code" class="html">&lt;!–&lt;persistenceAdapter&gt;<br>         &lt;kahaDB directory=&quot;${activemq.data}/kahadb&quot;/&gt;<br>         &lt;kahaDB directory=&quot;D:/kahaDB&quot;/&gt;<br>         &lt;jdbcPersistenceAdapter dataDirectory=&quot;${activemq.base}/data&quot; dataSource=&quot;#mysql-ds&quot;/&gt;<br> &lt;/persistenceAdapter&gt;–&gt;<br> &lt;persistenceAdapter&gt;<br>    &lt;replicatedLevelDB<br>        directory=&quot;${activemq.data}/leveldb&quot;<br>        replicas=&quot;3&quot;<br>        bind=&quot;tcp://0.0.0.0:0&quot;<br>        zkAddress=&quot;127.0.0.1:2181&quot;<br>        hostname=&quot;127.0.0.1&quot;<br>        sync=&quot;local_disk&quot;<br>        zkPath=&quot;/activemq/leveldb-stores&quot;/&gt;<br> &lt;/persistenceAdapter&gt;</pre><br><br></pre><br><span style="color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px; line-height:25.2px">首先启动zookeeper，这里没有做集群处理,默认端口是2181，然后分别启动activemq，&nbsp;</span><br style="line-height:10px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px; font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px; color:rgb(229,51,51)">启动之后报错：&quot;activemq LevelDB IOException handler&quot;。</span><span style="color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px; line-height:25.2px">&nbsp;</span><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px"><span style="line-height:25.2px; color:rgb(76,51,229)"><span style="line-height:25.2px; color:rgb(0,0,0)"><span style="line-height:25.2px; color:rgb(76,51,229)"><span style="line-height:25.2px; color:rgb(0,0,0)"><span style="line-height:25.2px; color:rgb(229,51,51)"><span style="line-height:22px; font-family:'Microsoft YaHei',Verdana,sans-serif,宋体; color:rgb(51,51,51)">原因：版本5.10.0存在的依赖冲突。</span><br style="line-height:10px"><br></span></span></span></span></span></span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(51,51,51); font-size:14px; font-family:'Microsoft YaHei',Verdana,sans-serif,宋体"><br><span style="line-height:28.8px; font-size:16px"><span style="line-height:25.2px; font-size:14px">解决方案：<br style="line-height:10px"><br></span></span><span style="line-height:1.5">（1）移除lib目录中的pax-url-aether-1.5.2.jar包<br style="line-height:10px"><br></span><span style="line-height:28.8px; font-size:16px"><span style="line-height:25.2px; font-size:14px">（2）注释掉配置文件中的日志配置；</span></span><span style="line-height:25.2px">&nbsp;</span></p><br><pre class="brush:java; toolbar: true; auto-links: false;" style="overflow:auto; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; padding:6px; margin-top:0px; margin-bottom:10px; line-height:1.45; color:rgb(51,51,51); word-break:break-all; word-wrap:break-word; border:none; background-color:rgb(246,246,246)">&lt;!– Allows accessing the server log<br>    &lt;bean id=&quot;logQuery&quot; class=&quot;org.fusesource.insight.log.log4j.Log4jLogQuery&quot;<br>          lazy-init=&quot;false&quot; scope=&quot;singleton&quot;<br>          init-method=&quot;start&quot; destroy-method=&quot;stop&quot;&gt;<br>    &lt;/bean&gt;<br>–&gt;</pre><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:25.2px">测试方式同上；</span></p><br><p style="margin-top:10px; margin-bottom:10px; line-height:25.2px; color:rgb(64,64,64); font-family:'Microsoft YaHei',Verdana,sans-serif,SimSun; font-size:14px"><br><span style="line-height:1.5"><span style="line-height:25.2px; color:rgb(76,51,229)"><span style="line-height:25.2px; color:rgb(0,0,0)">提供java版的例子：<br style="line-height:10px"><br></span></span></span></p><br><pre class="brush:java; toolbar: true; auto-links: false;" style="overflow:auto; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; padding:6px; margin-top:0px; margin-bottom:10px; line-height:1.45; color:rgb(51,51,51); word-break:break-all; word-wrap:break-word; border:none; background-color:rgb(246,246,246)"><pre code_snippet_id="1660918" snippet_file_name="blog_20160425_13_2397151" name="code" class="java">public class Sender {<br>    private static final int SEND_NUMBER = 5;<br><br>    public static void main(String[] args) {<br>        ConnectionFactory connectionFactory;<br>        Connection connection = null;<br>        Session session;<br>        Destination destination;<br>        MessageProducer producer;<br>        connectionFactory = new ActiveMQConnectionFactory(<br>            ActiveMQConnection.DEFAULT_USER,<br>            ActiveMQConnection.DEFAULT_PASSWORD, &quot;tcp://localhost:61616&quot;);<br>        try {<br>            connection = connectionFactory.createConnection();<br>            connection.start();<br>            session = connection.createSession(Boolean.TRUE,<br>                    Session.AUTO_ACKNOWLEDGE);<br>            destination = session.createQueue(&quot;FirstQueue&quot;);<br>            producer = session.createProducer(destination);<br>            producer.setDeliveryMode(DeliveryMode.PERSISTENT);<br>            sendMessage(session, producer);<br>            session.commit();<br>        } catch (Exception e) {<br>            e.printStackTrace();<br>        } finally {<br>            try {<br>                if (null != connection)<br>                    connection.close();<br>            } catch (Throwable ignore) {<br>            }<br>        }<br>    }<br><br>    public static void sendMessage(Session session, MessageProducer producer)<br>            throws Exception {<br>        for (int i = 1; i &lt;= SEND_NUMBER; i++) {<br>            TextMessage message = session.createTextMessage(&quot;发送的消息&quot;<br>                    + i);<br>            System.out.println(&quot;发送消息：&quot; + &quot;ActiveMq 发送的消息&quot; + i);<br>            producer.send(message);<br>        }<br>    }<br>}<br>public class Receiver {<br>    public static void main(String[] args) {<br>        ConnectionFactory connectionFactory;<br>        Connection connection = null;<br>        Session session;<br>        Destination destination;<br>        MessageConsumer consumer;<br>        connectionFactory = new ActiveMQConnectionFactory(<br>            ActiveMQConnection.DEFAULT_USER,<br>            ActiveMQConnection.DEFAULT_PASSWORD, &quot;tcp://localhost:61616&quot;);<br>        try {<br>            connection = connectionFactory.createConnection();<br>            connection.start();<br>            session = connection.createSession(Boolean.FALSE,<br>                    Session.AUTO_ACKNOWLEDGE);<br>            destination = session.createQueue(&quot;FirstQueue&quot;);<br>            consumer = session.createConsumer(destination);<br>            while (true) {<br>                TextMessage message = (TextMessage) consumer.receive(100000);<br>                if (null != message) {<br>                    System.out.println(&quot;收到消息&quot; + message.getText());<br>                } else {<br>                    break;<br>                }<br>            }<br>        } catch (Exception e) {<br>            e.printStackTrace();<br>        } finally {<br>            try {<br>                if (null != connection)<br>                    connection.close();<br>            } catch (Throwable ignore) {<br>            }<br>        }<br>    }<br>}</pre><br><br></pre><br><h1 style="padding-top:0px; padding-bottom:0px; margin-top:8px; margin-bottom:8px; line-height:22.5px; letter-spacing:0.5px; font-size:12.5px; word-wrap:break-word; word-break:break-all; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体"><br><br><br><h1><span style="padding:0px; margin:0px; color:rgb(76,51,229)">5.Broker-Cluster实现负载均衡</span></h1><br></h1><br></div><br><div><br><p style="padding-top:0px; padding-bottom:0px; margin-top:8px; margin-bottom:8px; line-height:22.5px; letter-spacing:0.5px; font-size:12.5px; word-wrap:break-word; word-break:break-all; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体"><br><span style="padding:0px; margin:0px; font-family:'Microsoft YaHei',微软雅黑,Arial,'Lucida Grande',Tahoma,sans-serif; font-size:13px; line-height:24.05px">Broker-Cluster部署方式中，各个broker通过网络互相连接，并共享queue，提供了2中部署方式：<br style="padding:0px; margin:0px"><br><span style="padding:0px; margin:0px; color:rgb(76,51,229)">static Broker-Cluster</span><span style="padding:0px; margin:0px; color:rgb(76,51,229)"></span>和<span style="padding:0px; margin:0px; color:rgb(76,51,229)">Dynamic Broker-Cluster</span><span style="padding:0px; margin:0px; color:rgb(76,51,229)"></span></span></p><br><p style="padding-top:0px; padding-bottom:0px; margin-top:8px; margin-bottom:8px; line-height:22.5px; letter-spacing:0.5px; font-size:12.5px; word-wrap:break-word; word-break:break-all; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体"><br><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px; font-size:13px; line-height:24.05px; color:rgb(76,51,229)">1).static Broker-Cluster</span></span></p><br><p style="padding-top:0px; padding-bottom:0px; margin-top:8px; margin-bottom:8px; line-height:22.5px; letter-spacing:0.5px; font-size:12.5px; word-wrap:break-word; word-break:break-all; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体"><br><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px; font-size:13px; line-height:24.05px">将ActiveMq拷贝2份，分别命名:apache-activemq-5.10.0_M1,apache-activemq-5.10.0_M2，<br style="padding:0px; margin:0px"><br>下面就是配置activemq,xml:<br style="padding:0px; margin:0px"><br>M1做如下配置:<br style="padding:0px; margin:0px"><br></span></span></p><br><div style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体; font-size:12.5px; line-height:22.5px"><br><div id="highlighter_483577" class="syntaxhighlighter  java" style="padding:0px; width:704px; margin:1em 0px!important; position:relative!important; overflow:auto!important; font-size:1em!important"><br><div class="toolbar" style="padding:0px!important; margin:0px!important; border:none!important; bottom:auto!important; float:none!important; height:11px!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:absolute!important; right:1px!important; top:1px!important; vertical-align:baseline!important; width:11px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:10px!important; min-height:auto!important; z-index:10!important; color:white!important; background:rgb(108,226,108)!important"><br><span style="padding:0px; margin:0px"><a target="_blank" href="http://my.oschina.net/OutOfMemory/blog/596552#" class="toolbar_item command_help help" style="padding:1px 0px 0px!important; margin:0px!important; color:white!important; outline:0px!important; font-size:1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; overflow:visible!important; position:static!important; right:auto!important; text-align:center!important; top:auto!important; vertical-align:baseline!important; width:auto!important; min-height:auto!important; display:block!important; text-decoration:none!important; background:none!important">?</a></span></div><br><table border="0" cellpadding="0" cellspacing="0" style="width:704px; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><tbody style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><tr style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><td class="gutter" style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; min-height:auto!important; color:rgb(175,175,175)!important; background:none!important"><br><div class="line number1 index0 alt2" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>1</div><br><div class="line number2 index1 alt1" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>2</div><br><div class="line number3 index2 alt2" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>3</div><br></td><br><td class="code" style="width:675px; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><div class="container" style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:relative!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><div class="line number1 index0 alt2" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;networkConnectors&gt;</code></div><br><div class="line number2 index1 alt1" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java spaces" style="color:red; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;networkConnector<br> uri=</code><code class="java string" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; color:blue!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&quot;static:(tcp://localhost:61617)&quot;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">/&gt;</code></div><br><div class="line number3 index2 alt2" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;/networkConnectors&gt;</code></div><br></div><br></td><br></tr><br></tbody><br></table><br></div><br></div><br><div style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体; font-size:12.5px; line-height:22.5px"><br><div id="highlighter_774067" class="syntaxhighlighter  java" style="padding:0px; width:704px; margin:1em 0px!important; position:relative!important; overflow:auto!important; font-size:1em!important"><br><div class="toolbar" style="padding:0px!important; margin:0px!important; border:none!important; bottom:auto!important; float:none!important; height:11px!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:absolute!important; right:1px!important; top:1px!important; vertical-align:baseline!important; width:11px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:10px!important; min-height:auto!important; z-index:10!important; color:white!important; background:rgb(108,226,108)!important"><br><span style="padding:0px; margin:0px"><a target="_blank" href="http://my.oschina.net/OutOfMemory/blog/596552#" class="toolbar_item command_help help" style="padding:1px 0px 0px!important; margin:0px!important; color:white!important; outline:0px!important; font-size:1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; overflow:visible!important; position:static!important; right:auto!important; text-align:center!important; top:auto!important; vertical-align:baseline!important; width:auto!important; min-height:auto!important; display:block!important; text-decoration:none!important; background:none!important">?</a></span></div><br><table border="0" cellpadding="0" cellspacing="0" style="width:1024px; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><tbody style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><tr style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><td class="gutter" style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; min-height:auto!important; color:rgb(175,175,175)!important; background:none!important"><br><div class="line number1 index0 alt2" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>1</div><br><div class="line number2 index1 alt1" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>2</div><br><div class="line number3 index2 alt2" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>3</div><br></td><br><td class="code" style="width:995px; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><div class="container" style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:relative!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><div class="line number1 index0 alt2" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;transportConnectors&gt;</code></div><br><div class="line number2 index1 alt1" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java spaces" style="color:red; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;transportConnector<br> name=</code><code class="java string" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; color:blue!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&quot;openwire&quot;</code><br><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br>uri=</code><code class="java string" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; color:blue!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&quot;tcp://0.0.0.0:61616?maximumConnectio&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br> ns=1000&amp;amp;wireFormat.maxFrameSize=104857600&quot;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">/&gt;</code></div><br><div class="line number3 index2 alt2" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java spaces" style="color:red; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&nbsp;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;/transportConnectors&gt;</code></div><br></div><br></td><br></tr><br></tbody><br></table><br></div><br></div><br><span style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:'Microsoft YaHei',微软雅黑,Arial,'Lucida Grande',Tahoma,sans-serif; font-size:13px; line-height:24.05px">M2做如下配置:</span><span style="color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体; font-size:12.5px; line-height:22.5px">&nbsp;</span><br style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体; font-size:12.5px; line-height:22.5px"><br><div style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体; font-size:12.5px; line-height:22.5px"><br><div id="highlighter_592019" class="syntaxhighlighter  java" style="padding:0px; width:704px; margin:1em 0px!important; position:relative!important; overflow:auto!important; font-size:1em!important"><br><div class="toolbar" style="padding:0px!important; margin:0px!important; border:none!important; bottom:auto!important; float:none!important; height:11px!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:absolute!important; right:1px!important; top:1px!important; vertical-align:baseline!important; width:11px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:10px!important; min-height:auto!important; z-index:10!important; color:white!important; background:rgb(108,226,108)!important"><br><span style="padding:0px; margin:0px"><a target="_blank" href="http://my.oschina.net/OutOfMemory/blog/596552#" class="toolbar_item command_help help" style="padding:1px 0px 0px!important; margin:0px!important; color:white!important; outline:0px!important; font-size:1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; overflow:visible!important; position:static!important; right:auto!important; text-align:center!important; top:auto!important; vertical-align:baseline!important; width:auto!important; min-height:auto!important; display:block!important; text-decoration:none!important; background:none!important">?</a></span></div><br><table border="0" cellpadding="0" cellspacing="0" style="width:704px; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><tbody style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><tr style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><td class="gutter" style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; min-height:auto!important; color:rgb(175,175,175)!important; background:none!important"><br><div class="line number1 index0 alt2" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>1</div><br><div class="line number2 index1 alt1" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>2</div><br><div class="line number3 index2 alt2" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>3</div><br></td><br><td class="code" style="width:675px; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><div class="container" style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:relative!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><div class="line number1 index0 alt2" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;networkConnectors&gt;</code></div><br><div class="line number2 index1 alt1" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java spaces" style="color:red; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;networkConnector<br> uri=</code><code class="java string" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; color:blue!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&quot;static:(tcp://localhost:61616)&quot;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">/&gt;</code></div><br><div class="line number3 index2 alt2" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;/networkConnectors&gt;</code></div><br></div><br></td><br></tr><br></tbody><br></table><br></div><br></div><br><div style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体; font-size:12.5px; line-height:22.5px"><br><div id="highlighter_351396" class="syntaxhighlighter  java" style="padding:0px; width:704px; margin:1em 0px!important; position:relative!important; overflow:auto!important; font-size:1em!important"><br><div class="toolbar" style="padding:0px!important; margin:0px!important; border:none!important; bottom:auto!important; float:none!important; height:11px!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:absolute!important; right:1px!important; top:1px!important; vertical-align:baseline!important; width:11px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:10px!important; min-height:auto!important; z-index:10!important; color:white!important; background:rgb(108,226,108)!important"><br><span style="padding:0px; margin:0px"><a target="_blank" href="http://my.oschina.net/OutOfMemory/blog/596552#" class="toolbar_item command_help help" style="padding:1px 0px 0px!important; margin:0px!important; color:white!important; outline:0px!important; font-size:1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; overflow:visible!important; position:static!important; right:auto!important; text-align:center!important; top:auto!important; vertical-align:baseline!important; width:auto!important; min-height:auto!important; display:block!important; text-decoration:none!important; background:none!important">?</a></span></div><br><table border="0" cellpadding="0" cellspacing="0" style="width:1024px; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><tbody style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><tr style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><td class="gutter" style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; min-height:auto!important; color:rgb(175,175,175)!important; background:none!important"><br><div class="line number1 index0 alt2" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>1</div><br><div class="line number2 index1 alt1" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>2</div><br><div class="line number3 index2 alt2" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>3</div><br></td><br><td class="code" style="width:995px; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><div class="container" style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:relative!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><div class="line number1 index0 alt2" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;transportConnectors&gt;</code></div><br><div class="line number2 index1 alt1" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java spaces" style="color:red; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;transportConnector<br> name=</code><code class="java string" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; color:blue!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&quot;openwire&quot;</code><br><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br>uri=</code><code class="java string" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; color:blue!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&quot;tcp://0.0.0.0:61617?maximumConnectio&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br> ns=1000&amp;amp;wireFormat.maxFrameSize=104857600&quot;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">/&gt;</code></div><br><div class="line number3 index2 alt2" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java spaces" style="color:red; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&nbsp;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;/transportConnectors&gt;</code></div><br></div><br></td><br></tr><br></tbody><br></table><br></div><br></div><br><span style="color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体; font-size:12.5px; line-height:22.5px">通过以上配置使M1和M2这两个&nbsp;</span><span style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:'Microsoft YaHei',微软雅黑,Arial,'Lucida Grande',Tahoma,sans-serif; font-size:13px; line-height:24.05px">broker通过网络互相连接，并共享queue，<br style="padding:0px; margin:0px"><br>启动M1和M2,可以看到如下启动日志：</span><span style="color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体; font-size:12.5px; line-height:22.5px">&nbsp;</span><span style="padding:0px; margin:0px; color:rgb(51,51,51); font-size:13px; line-height:24.05px; font-family:'Microsoft YaHei',微软雅黑,Arial,'Lucida Grande',Tahoma,sans-serif"><br style="padding:0px; margin:0px"><br><a target="_blank" href="http://static.oschina.net/uploads/space/2016/0103/194536_ySvR_159239.png" style="padding:0px; margin:0px; color:rgb(255,131,115); outline:0px; font-size:12px"><img src="http://static.oschina.net/uploads/space/2016/0103/194536_ySvR_159239.png" alt="" style="padding:0px; margin:10px 0px; border:1px solid rgb(221,221,221); max-width:640px; background:rgb(244,247,249)"></a><br style="padding:0px; margin:0px"><br></span><span style="color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体; font-size:12.5px; line-height:22.5px"></span><br><p style="padding-top:0px; padding-bottom:0px; margin-top:8px; margin-bottom:8px; line-height:22.5px; letter-spacing:0.5px; font-size:12.5px; word-wrap:break-word; word-break:break-all; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体"><br><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px; font-size:13px; line-height:24.05px"><a target="_blank" href="http://static.oschina.net/uploads/space/2016/0103/194609_AlHc_159239.png" style="padding:0px; margin:0px; color:rgb(255,131,115); outline:0px; font-size:12px"><img src="http://static.oschina.net/uploads/space/2016/0103/194609_AlHc_159239.png" alt="" style="padding:0px; margin:10px 0px; border:1px solid rgb(221,221,221); max-width:640px; background:rgb(244,247,249)"></a><br style="padding:0px; margin:0px"><br></span></span></p><br><p style="padding-top:0px; padding-bottom:0px; margin-top:8px; margin-bottom:8px; line-height:22.5px; letter-spacing:0.5px; font-size:12.5px; word-wrap:break-word; word-break:break-all; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体"><br><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px; font-size:13px; line-height:24.05px">可以看到M1和M2，<span style="padding:0px; margin:0px; color:rgb(76,51,229)">network connection has been established</span></span></span></p><br><p style="padding-top:0px; padding-bottom:0px; margin-top:8px; margin-bottom:8px; line-height:22.5px; letter-spacing:0.5px; font-size:12.5px; word-wrap:break-word; word-break:break-all; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体"><br><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px; font-size:13px; line-height:24.05px"><span style="padding:0px; margin:0px; color:rgb(76,51,229)"><span style="padding:0px; margin:0px; color:rgb(0,0,0)">测试我们还是用上一篇中的Sender和Receiver类，只需要做一点点修改：<br style="padding:0px; margin:0px"><br></span><span style="padding:0px; margin:0px; color:rgb(0,0,0)">Sender类还是链接tcp://localhost:61616，发送消息到queue，<br style="padding:0px; margin:0px"><br>Receiver做如下修改:<br style="padding:0px; margin:0px"><br></span></span></span></span></p><br><div style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体; font-size:12.5px; line-height:22.5px"><br><div id="highlighter_256279" class="syntaxhighlighter  java" style="padding:0px; width:704px; margin:1em 0px!important; position:relative!important; overflow:auto!important; font-size:1em!important"><br><div class="toolbar" style="padding:0px!important; margin:0px!important; border:none!important; bottom:auto!important; float:none!important; height:11px!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:absolute!important; right:1px!important; top:1px!important; vertical-align:baseline!important; width:11px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:10px!important; min-height:auto!important; z-index:10!important; color:white!important; background:rgb(108,226,108)!important"><br><span style="padding:0px; margin:0px"><a target="_blank" href="http://my.oschina.net/OutOfMemory/blog/596552#" class="toolbar_item command_help help" style="padding:1px 0px 0px!important; margin:0px!important; color:white!important; outline:0px!important; font-size:1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; overflow:visible!important; position:static!important; right:auto!important; text-align:center!important; top:auto!important; vertical-align:baseline!important; width:auto!important; min-height:auto!important; display:block!important; text-decoration:none!important; background:none!important">?</a></span></div><br><table border="0" cellpadding="0" cellspacing="0" style="width:704px; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><tbody style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><tr style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><td class="gutter" style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; min-height:auto!important; color:rgb(175,175,175)!important; background:none!important"><br><div class="line number1 index0 alt2" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>1</div><br><div class="line number2 index1 alt1" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>2</div><br><div class="line number3 index2 alt2" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>3</div><br></td><br><td class="code" style="width:675px; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><div class="container" style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:relative!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><div class="line number1 index0 alt2" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">connectionFactory<br> = </code><code class="java keyword" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; color:rgb(0,102,153)!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-weight:bold!important; font-size:1em!important; min-height:auto!important; background:none!important">new</code><br><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br>ActiveMQConnectionFactory(</code></div><br><div class="line number2 index1 alt1" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java spaces" style="color:red; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">ActiveMQConnection.DEFAULT_USER,</code></div><br><div class="line number3 index2 alt2" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java spaces" style="color:red; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">ActiveMQConnection.DEFAULT_PASSWORD,<br></code><code class="java string" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; color:blue!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&quot;tcp://localhost:61617&quot;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">);</code></div><br></div><br></td><br></tr><br></tbody><br></table><br></div><br></div><br><p style="padding-top:0px; padding-bottom:0px; margin-top:8px; margin-bottom:8px; line-height:22.5px; letter-spacing:0.5px; font-size:12.5px; word-wrap:break-word; word-break:break-all; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体"><br>经测试Receiver可以接受到数据，表示M1和M2已经共享了queue</p><br><p style="padding-top:0px; padding-bottom:0px; margin-top:8px; margin-bottom:8px; line-height:22.5px; letter-spacing:0.5px; font-size:12.5px; word-wrap:break-word; word-break:break-all; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体"><br><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px; font-size:13px; line-height:24.05px"><span style="padding:0px; margin:0px; color:rgb(76,51,229)">2).<span style="padding:0px; margin:0px; font-family:'Microsoft YaHei',微软雅黑,Arial,'Lucida Grande',Tahoma,sans-serif; line-height:24.05px">Dynamic<br> Broker-Cluster</span></span></span></span></p><br><p style="padding-top:0px; padding-bottom:0px; margin-top:8px; margin-bottom:8px; line-height:22.5px; letter-spacing:0.5px; font-size:12.5px; word-wrap:break-word; word-break:break-all; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体"><br><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px; font-size:13px; line-height:24.05px"><span style="padding:0px; margin:0px; color:rgb(76,51,229)"><span style="padding:0px; margin:0px; font-family:'Microsoft YaHei',微软雅黑,Arial,'Lucida Grande',Tahoma,sans-serif; line-height:24.05px"><span style="padding:0px; margin:0px; color:rgb(0,0,0)">Dynamic<br> Discovery集群方式在配置ActiveMQ实例时，不需要知道所有其它实例的URI地址</span><span style="padding:0px; margin:0px; color:rgb(0,0,0)"><br style="padding:0px; margin:0px"><br></span><span style="padding:0px; margin:0px; color:rgb(0,0,0)">对activemq.xml做如下配置:<br style="padding:0px; margin:0px"><br><span style="padding:0px; margin:0px; line-height:24.05px">M1做如下配置:<br style="padding:0px; margin:0px"><br></span></span></span></span></span></span></p><br><div style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体; font-size:12.5px; line-height:22.5px"><br><div id="highlighter_464186" class="syntaxhighlighter  java" style="padding:0px; width:704px; margin:1em 0px!important; position:relative!important; overflow:auto!important; font-size:1em!important"><br><div class="toolbar" style="padding:0px!important; margin:0px!important; border:none!important; bottom:auto!important; float:none!important; height:11px!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:absolute!important; right:1px!important; top:1px!important; vertical-align:baseline!important; width:11px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:10px!important; min-height:auto!important; z-index:10!important; color:white!important; background:rgb(108,226,108)!important"><br><span style="padding:0px; margin:0px"><a target="_blank" href="http://my.oschina.net/OutOfMemory/blog/596552#" class="toolbar_item command_help help" style="padding:1px 0px 0px!important; margin:0px!important; color:white!important; outline:0px!important; font-size:1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; overflow:visible!important; position:static!important; right:auto!important; text-align:center!important; top:auto!important; vertical-align:baseline!important; width:auto!important; min-height:auto!important; display:block!important; text-decoration:none!important; background:none!important">?</a></span></div><br><table border="0" cellpadding="0" cellspacing="0" style="width:704px; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><tbody style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><tr style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><td class="gutter" style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; min-height:auto!important; color:rgb(175,175,175)!important; background:none!important"><br><div class="line number1 index0 alt2" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>1</div><br><div class="line number2 index1 alt1" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>2</div><br><div class="line number3 index2 alt2" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>3</div><br></td><br><td class="code" style="width:675px; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><div class="container" style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:relative!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><div class="line number1 index0 alt2" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;networkConnectors&gt;</code></div><br><div class="line number2 index1 alt1" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java spaces" style="color:red; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;networkConnector<br> uri=</code><code class="java string" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; color:blue!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&quot;multicast://default&quot;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">/&gt;</code></div><br><div class="line number3 index2 alt2" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;/networkConnectors&gt;</code></div><br></div><br></td><br></tr><br></tbody><br></table><br></div><br></div><br><div style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体; font-size:12.5px; line-height:22.5px"><br><div id="highlighter_579267" class="syntaxhighlighter  java" style="padding:0px; width:704px; margin:1em 0px!important; position:relative!important; overflow:auto!important; font-size:1em!important"><br><div class="toolbar" style="padding:0px!important; margin:0px!important; border:none!important; bottom:auto!important; float:none!important; height:11px!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:absolute!important; right:1px!important; top:1px!important; vertical-align:baseline!important; width:11px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:10px!important; min-height:auto!important; z-index:10!important; color:white!important; background:rgb(108,226,108)!important"><br><span style="padding:0px; margin:0px"><a target="_blank" href="http://my.oschina.net/OutOfMemory/blog/596552#" class="toolbar_item command_help help" style="padding:1px 0px 0px!important; margin:0px!important; color:white!important; outline:0px!important; font-size:1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; overflow:visible!important; position:static!important; right:auto!important; text-align:center!important; top:auto!important; vertical-align:baseline!important; width:auto!important; min-height:auto!important; display:block!important; text-decoration:none!important; background:none!important">?</a></span></div><br><table border="0" cellpadding="0" cellspacing="0" style="width:962px; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><tbody style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><tr style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><td class="gutter" style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; min-height:auto!important; color:rgb(175,175,175)!important; background:none!important"><br><div class="line number1 index0 alt2" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>1</div><br><div class="line number2 index1 alt1" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>2</div><br><div class="line number3 index2 alt2" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>3</div><br><div class="line number4 index3 alt1" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>4</div><br></td><br><td class="code" style="width:933px; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><div class="container" style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:relative!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><div class="line number1 index0 alt2" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;transportConnectors&gt;</code></div><br><div class="line number2 index1 alt1" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java spaces" style="color:red; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;transportConnector<br> name=</code><code class="java string" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; color:blue!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&quot;openwire&quot;</code><br><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br>uri=</code><code class="java string" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; color:blue!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&quot;tcp://0.0.0.0:61616?<br> maximumConnections=1000&amp;amp;wireFormat.maxFrameSize=104857600&quot;</code></div><br><div class="line number3 index2 alt2" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java spaces" style="color:red; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">discoveryUri=</code><code class="java string" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; color:blue!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&quot;multicast://default&quot;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">/&gt;</code></div><br><div class="line number4 index3 alt1" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java spaces" style="color:red; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&nbsp;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;/transportConnectors&gt;</code></div><br></div><br></td><br></tr><br></tbody><br></table><br></div><br></div><br><span style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:'Microsoft YaHei',微软雅黑,Arial,'Lucida Grande',Tahoma,sans-serif; font-size:13px; line-height:24.05px">M2<span style="padding:0px; margin:0px; line-height:24.05px">做如下配置:</span></span><span style="color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体; font-size:12.5px; line-height:22.5px"></span><br><div style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体; font-size:12.5px; line-height:22.5px"><br><div id="highlighter_377292" class="syntaxhighlighter  java" style="padding:0px; width:704px; margin:1em 0px!important; position:relative!important; overflow:auto!important; font-size:1em!important"><br><div class="toolbar" style="padding:0px!important; margin:0px!important; border:none!important; bottom:auto!important; float:none!important; height:11px!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:absolute!important; right:1px!important; top:1px!important; vertical-align:baseline!important; width:11px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:10px!important; min-height:auto!important; z-index:10!important; color:white!important; background:rgb(108,226,108)!important"><br><span style="padding:0px; margin:0px"><a target="_blank" href="http://my.oschina.net/OutOfMemory/blog/596552#" class="toolbar_item command_help help" style="padding:1px 0px 0px!important; margin:0px!important; color:white!important; outline:0px!important; font-size:1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; overflow:visible!important; position:static!important; right:auto!important; text-align:center!important; top:auto!important; vertical-align:baseline!important; width:auto!important; min-height:auto!important; display:block!important; text-decoration:none!important; background:none!important">?</a></span></div><br><table border="0" cellpadding="0" cellspacing="0" style="width:704px; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><tbody style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><tr style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><td class="gutter" style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; min-height:auto!important; color:rgb(175,175,175)!important; background:none!important"><br><div class="line number1 index0 alt2" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>1</div><br><div class="line number2 index1 alt1" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>2</div><br><div class="line number3 index2 alt2" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>3</div><br></td><br><td class="code" style="width:675px; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><div class="container" style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:relative!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><div class="line number1 index0 alt2" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;networkConnectors&gt;</code></div><br><div class="line number2 index1 alt1" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java spaces" style="color:red; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;networkConnector<br> uri=</code><code class="java string" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; color:blue!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&quot;multicast://default&quot;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">/&gt;</code></div><br><div class="line number3 index2 alt2" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;/networkConnectors&gt;</code></div><br></div><br></td><br></tr><br></tbody><br></table><br></div><br></div><br><div style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体; font-size:12.5px; line-height:22.5px"><br><div id="highlighter_494719" class="syntaxhighlighter  java" style="padding:0px; width:704px; margin:1em 0px!important; position:relative!important; overflow:auto!important; font-size:1em!important"><br><div class="toolbar" style="padding:0px!important; margin:0px!important; border:none!important; bottom:auto!important; float:none!important; height:11px!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:absolute!important; right:1px!important; top:1px!important; vertical-align:baseline!important; width:11px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:10px!important; min-height:auto!important; z-index:10!important; color:white!important; background:rgb(108,226,108)!important"><br><span style="padding:0px; margin:0px"><a target="_blank" href="http://my.oschina.net/OutOfMemory/blog/596552#" class="toolbar_item command_help help" style="padding:1px 0px 0px!important; margin:0px!important; color:white!important; outline:0px!important; font-size:1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; overflow:visible!important; position:static!important; right:auto!important; text-align:center!important; top:auto!important; vertical-align:baseline!important; width:auto!important; min-height:auto!important; display:block!important; text-decoration:none!important; background:none!important">?</a></span></div><br><table border="0" cellpadding="0" cellspacing="0" style="width:962px; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><tbody style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><tr style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><td class="gutter" style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; min-height:auto!important; color:rgb(175,175,175)!important; background:none!important"><br><div class="line number1 index0 alt2" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>1</div><br><div class="line number2 index1 alt1" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>2</div><br><div class="line number3 index2 alt2" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>3</div><br><div class="line number4 index3 alt1" style="padding:0px 0.5em 0px 1em!important; margin:0px!important; border-width:0px 3px 0px 0px!important; border-right-style:solid!important; border-right-color:rgb(108,226,108)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br>4</div><br></td><br><td class="code" style="width:933px; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><div class="container" style="padding:0px!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:relative!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br><div class="line number1 index0 alt2" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;transportConnectors&gt;</code></div><br><div class="line number2 index1 alt1" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java spaces" style="color:red; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;transportConnector<br> name=</code><code class="java string" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; color:blue!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&quot;openwire&quot;</code><br><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important"><br>uri=</code><code class="java string" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; color:blue!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&quot;tcp://0.0.0.0:61617?<br> maximumConnections=1000&amp;amp;wireFormat.maxFrameSize=104857600&quot;</code></div><br><div class="line number3 index2 alt2" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java spaces" style="color:red; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">discoveryUri=</code><code class="java string" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; color:blue!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&quot;multicast://default&quot;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">/&gt;</code></div><br><div class="line number4 index3 alt1" style="padding:0px 1em!important; margin:0px!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"><br><code class="java spaces" style="color:red; padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&nbsp;</code><code class="java plain" style="padding:0px!important; margin:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; background:none!important">&lt;/transportConnectors&gt;</code></div><br></div><br></td><br></tr><br></tbody><br></table><br></div><br></div><br><span style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:'Microsoft YaHei',微软雅黑,Arial,'Lucida Grande',Tahoma,sans-serif; font-size:13px; line-height:24.05px">启动M1和M2,可以看到如下启动日志：</span><span style="color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体; font-size:12.5px; line-height:22.5px">&nbsp;</span><span style="padding:0px; margin:0px; font-family:'Microsoft YaHei',Verdana,sans-serif,宋体; color:rgb(76,51,229); font-size:13px; line-height:24.05px">network<br> connection has been established</span><span style="color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体; font-size:12.5px; line-height:22.5px"></span><span style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体; font-size:12.5px; line-height:22.5px"></span><span style="color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体; font-size:12.5px; line-height:22.5px"></span><br><p style="padding-top:0px; padding-bottom:0px; margin-top:8px; margin-bottom:8px; line-height:22.5px; letter-spacing:0.5px; font-size:12.5px; word-wrap:break-word; word-break:break-all; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体"><br>测试同static broker-cluster,可以得到相同的结果。<br style="padding:0px; margin:0px"><br>官网配置说明：<a target="_blank" href="http://activemq.apache.org/networks-of-brokers.html" rel="nofollow" style="padding:0px; margin:0px; color:rgb(255,131,115); outline:0px; font-size:12px">http://activemq.apache.org/networks-of-brokers.html</a></p><br><p style="padding-top:0px; padding-bottom:0px; margin-top:8px; margin-bottom:8px; line-height:22.5px; letter-spacing:0.5px; font-size:12.5px; word-wrap:break-word; word-break:break-all; color:rgb(51,51,51); font-family:'Microsoft YaHei',Verdana,sans-serif,宋体"><br>Master-Slaver保证了数据的可靠性，Broker-Cluster提供了负载均衡，所以一般正式环境中都会采用：<br style="padding:0px; margin:0px"><br><span style="padding:0px; margin:0px">Master-Slaver&#43;</span><span style="padding:0px; margin:0px">Broker-Cluster的模式</span></p><br><br><br></div>

<p></p></div><p></p>
<!-- Baidu Button BEGIN -->
<div class="bdsharebuttonbox tracking-ad" style="float: right;" data-mod="popu_172"><br><a href="#" class="bds_more" data-cmd="more" style="background-position:0 0 !important; background-image: url(http://bdimg.share.baidu.com/static/api/img/share/icons_0_16.png?v=d754dcc0.png) !important"></a><br><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间" style="background-position:0 -52px !important"></a><br><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博" style="background-position:0 -104px !important"></a><br><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博" style="background-position:0 -260px !important"></a><br><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网" style="background-position:0 -208px !important"></a><br><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信" style="background-position:0 -1612px !important"></a><br></div><br><script>window._bd_share_config = { “common”: { “bdSnsKey”: {}, “bdText”: “”, “bdMini”: “1”, “bdMiniList”: false, “bdPic”: “”, “bdStyle”: “0”, “bdSize”: “16” }, “share”: {} }; with (document) 0[(getElementsByTagName(‘head’)[0] || body).appendChild(createElement(‘script’)).src = ‘<a href="http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion=">http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion=</a>‘ + ~(-new Date() / 36e5)];</script><br><!-- Baidu Button END --><br><br><br><br><br><!--172.16.140.12--><br><br><!-- Baidu Button BEGIN --><br><script type="text/javascript" id="bdshare_js" data="type=tools&amp;uid=1536434"></script><br><script type="text/javascript" id="bdshell_js"></script><br><script type="text/javascript"><br>    document.getElementById(“bdshell_js”).src = “<a href="http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=">http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=</a>“ + Math.ceil(new Date()/3600000)<br></script><br><!-- Baidu Button END --><br><br><br><br><br><br><br>        <div id="digg" articleid="51241597"><br>            <dl id="btnDigg" class="digg digg_disable" onclick="btndigga();"><br><br>                 <dt>顶</dt><br>                <dd>3</dd><br>            </dl><br><br><br>            <dl id="btnBury" class="digg digg_disable" onclick="btnburya();"><br><br>                  <dt>踩</dt><br>                <dd>0</dd><br>            </dl><br><br>        </div><br>     <div class="tracking-ad" data-mod="popu_222"><a href="javascript:void(0);" target="_blank" rel="external">&nbsp;</a>   </div><br>    <div class="tracking-ad" data-mod="popu_223"> <a href="javascript:void(0);" target="_blank" rel="external">&nbsp;</a></div><br>    <script type="text/javascript"><br>                function btndigga() {<br>                    $(“.tracking-ad[data-mod=’popu_222’] a”).click();<br>                }<br>                function btnburya() {<br>                    $(“.tracking-ad[data-mod=’popu_223’] a”).click();<br>                }<br>            </script><br><br>   <ul class="article_next_prev"><br>                <li class="prev_article"><span onclick="_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_shangyipian']);location.href='/he90227/article/details/51163822';">上一篇</span><a href="/he90227/article/details/51163822" onclick="_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_shangyipian'])">多线程笔记</a></li><br>                <li class="next_article"><span onclick="_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_xiayipian']);location.href='/he90227/article/details/51248063';">下一篇</span><a href="/he90227/article/details/51248063" onclick="_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_xiayipian'])">亿级Web系统搭建——单机到分布式集群</a></li><br>    </ul><br><br>    <div style="clear:both; height:10px;"></div>


<pre><code>&lt;div class=&quot;similar_article&quot;   &gt;
        &lt;h4&gt;&lt;/h4&gt;
        &lt;div class=&quot;similar_c&quot;style=&quot;margin:20px 0px 0px 0px&quot;&gt;
            &lt;div class=&quot;similar_c_t&quot;&gt;
              &amp;nbsp;&amp;nbsp;相关文章推荐
            &lt;/div&gt;

            &lt;div class=&quot;similar_wrap tracking-ad&quot; data-mod=&quot;popu_36&quot;  style=&quot;max-height:195px;&quot;&gt;                       
                &lt;ul class=&quot;similar_list fl&quot;&gt;    
                       &lt;li&gt;
                           &lt;em&gt;•&lt;/em&gt;
                           &lt;a href=&quot;http://blog.csdn.net/lee1991723/article/details/48268861&quot; title=&quot;Spring整合JMS(一)——基于ActiveMQ实现&quot; strategy=&quot;&quot; target=&quot;_blank&quot; style=&quot;width: 290px;&quot;&gt;Spring整合JMS(一)——基于ActiveMQ实现&lt;/a&gt;
                       &lt;/li&gt;
                       &lt;li&gt;
                           &lt;em&gt;•&lt;/em&gt;
                           &lt;a href=&quot;http://blog.csdn.net/zwk626542417/article/details/48063383&quot; title=&quot;Spring整合JMS(一)——基于ActiveMQ实现&quot; strategy=&quot;&quot; target=&quot;_blank&quot; style=&quot;width: 290px;&quot;&gt;Spring整合JMS(一)——基于ActiveMQ实现&lt;/a&gt;
                       &lt;/li&gt;
                       &lt;li&gt;
                           &lt;em&gt;•&lt;/em&gt;
                           &lt;a href=&quot;http://blog.csdn.net/u010961759/article/details/39293649&quot; title=&quot;Spring整合JMS(一)——基于ActiveMQ实现&quot; strategy=&quot;&quot; target=&quot;_blank&quot; style=&quot;width: 290px;&quot;&gt;Spring整合JMS(一)——基于ActiveMQ实现&lt;/a&gt;
                       &lt;/li&gt;
                       &lt;li&gt;
                           &lt;em&gt;•&lt;/em&gt;
                           &lt;a href=&quot;http://blog.csdn.net/lingyun870801/article/details/23991513&quot; title=&quot;ActiveMQ整合Spring实现消息机制二(消息接收端配置)&quot; strategy=&quot;&quot; target=&quot;_blank&quot; style=&quot;width: 290px;&quot;&gt;ActiveMQ整合Spring实现消息机制二(消息接收端配置)&lt;/a&gt;
                       &lt;/li&gt;
                       &lt;li&gt;
                           &lt;em&gt;•&lt;/em&gt;
                           &lt;a href=&quot;http://blog.csdn.net/u014756827/article/details/52449232&quot; title=&quot;深入浅出JMS(四)--Spring和ActiveMQ整合的完整实例&quot; strategy=&quot;&quot; target=&quot;_blank&quot; style=&quot;width: 290px;&quot;&gt;深入浅出JMS(四)--Spring和ActiveMQ整合的完整实例&lt;/a&gt;
                       &lt;/li&gt;
                &lt;/ul&gt;
                  &lt;ul class=&quot;similar_list fr&quot;&gt;      
                       &lt;li&gt;
                           &lt;em&gt;•&lt;/em&gt;
                           &lt;a href=&quot;http://blog.csdn.net/jianfpeng241241/article/details/51678695&quot; title=&quot;JMS学习(4):--Spring和ActiveMQ整合的完整实例&quot; strategy=&quot;&quot; target=&quot;_blank&quot; style=&quot;width: 290px;&quot;&gt;JMS学习(4):--Spring和ActiveMQ整合的完整实例&lt;/a&gt;
                       &lt;/li&gt;
                       &lt;li&gt;
                           &lt;em&gt;•&lt;/em&gt;
                           &lt;a href=&quot;http://blog.csdn.net/jingqiang521/article/details/49047847&quot; title=&quot;4、深入浅出JMS(四)--Spring和ActiveMQ整合的完整实例&quot; strategy=&quot;&quot; target=&quot;_blank&quot; style=&quot;width: 290px;&quot;&gt;4、深入浅出JMS(四)--Spring和ActiveMQ整合的完整实例&lt;/a&gt;
                       &lt;/li&gt;
                       &lt;li&gt;
                           &lt;em&gt;•&lt;/em&gt;
                           &lt;a href=&quot;http://blog.csdn.net/Leonardo9029/article/details/43154385&quot; title=&quot;浅谈jms之（通过spring整合activeMQ实现jms）实例&quot; strategy=&quot;&quot; target=&quot;_blank&quot; style=&quot;width: 290px;&quot;&gt;浅谈jms之（通过spring整合activeMQ实现jms）实例&lt;/a&gt;
                       &lt;/li&gt;
                       &lt;li&gt;
                           &lt;em&gt;•&lt;/em&gt;
                           &lt;a href=&quot;http://blog.csdn.net/yinbucheng/article/details/72477543&quot; title=&quot;spring整合activeMQ&quot; strategy=&quot;&quot; target=&quot;_blank&quot; style=&quot;width: 290px;&quot;&gt;spring整合activeMQ&lt;/a&gt;
                       &lt;/li&gt;
                       &lt;li&gt;
                           &lt;em&gt;•&lt;/em&gt;
                           &lt;a href=&quot;http://blog.csdn.net/polo_longsan/article/details/52317966&quot; title=&quot;ActiveMQ与Spring整合:(1)基本使用&quot; strategy=&quot;&quot; target=&quot;_blank&quot; style=&quot;width: 290px;&quot;&gt;ActiveMQ与Spring整合:(1)基本使用&lt;/a&gt;
                       &lt;/li&gt;
                &lt;/ul&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;   
</code></pre><p></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://bloodorange2017.github.io/archives/2017/06/13/disruptor-01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XueCheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://bloodorange2017.github.io/images/img_head_001.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XueCheng Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/13/disruptor-01/" itemprop="url">Disruptor入门</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-06-13T16:23:09+08:00">
                2017-06-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div class="post_content"><br>      <p>翻译自Disruptor git库教程   <a href="https://github.com/LMAX-Exchange/disruptor/wiki/Getting-Started" target="_blank">英文地址</a></p><br><h2>获得Disruptor</h2><br><p>可以通过<a href="http://mvnrepository.com/artifact/com.lmax/disruptor" target="_blank" rel="external">Maven</a>或者下载<a href="https://github.com/LMAX-Exchange/disruptor/wiki/Downloads" target="_blank" rel="external">jar</a>来安装Disruptor。只要把对应的jar放在Java classpath就可以了。</p><br><h2>基本的事件生产和消费</h2><br><p>我们从一个简单的例子开始学习Disruptor：生产者传递一个long类型的值给消费者，而消费者消费这个数据的方式仅仅是把它打印出来。首先声明一个Event来包含需要传递的数据：</p><br><pre style="color: #000000;"><span class="s2" style="color: #cc7832;">public class </span><span class="s1" style="color: #a9b7c6;">LongEvent {<br>    </span><span class="s2" style="color: #cc7832;">private long </span><span class="s1" style="color: #a9b7c6;">value</span><span class="s2" style="color: #cc7832;">;<br></span><span class="s2" style="color: #cc7832;">    public long </span><span class="s1" style="color: #a9b7c6;">getValue() {<br>        </span><span class="s2" style="color: #cc7832;">return </span><span class="s1" style="color: #a9b7c6;">value</span><span class="s2" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br>    }<br><br>    </span><span class="s2" style="color: #cc7832;">public void </span><span class="s1" style="color: #a9b7c6;">setValue(</span><span class="s2" style="color: #cc7832;">long </span><span class="s1" style="color: #a9b7c6;">value) {<br>        </span><span class="s2" style="color: #cc7832;">this</span><span class="s1" style="color: #a9b7c6;">.value = value</span><span class="s2" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br>    }<br>} </span></pre><br><p><span id="more-13560"></span></p><br><p>由于需要让Disruptor为我们创建事件，我们同时还声明了一个EventFactory来实例化Event对象。</p><br><pre><span class="s0" style="color: #cc7832;">public class </span><span class="s1" style="color: #a9b7c6;">LongEventFactory </span><span class="s0" style="color: #cc7832;">implements </span><span class="s1" style="color: #a9b7c6;">EventFactory { </span></pre><br><pre style="color: #000000;"><span class="s1" style="color: #a9b7c6;">    @Override<br>    </span><span class="s0" style="color: #cc7832;">public </span><span class="s1" style="color: #a9b7c6;">Object newInstance() {<br>        </span><span class="s0" style="color: #cc7832;">return new </span><span class="s1" style="color: #a9b7c6;">LongEvent()</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br>    }<br>} </span></pre><br><p>我们还需要一个事件消费者，也就是一个事件处理器。这个事件处理器简单地把事件中存储的数据打印到终端：</p><br><pre style="color: #000000;"><span class="s2" style="color: #629755;">/<strong><br> */</strong></span><span class="s0" style="color: #cc7832;">public class </span><span class="s1" style="color: #a9b7c6;">LongEventHandler </span><span class="s0" style="color: #cc7832;">implements </span><span class="s1" style="color: #a9b7c6;">EventHandler&lt;LongEvent&gt; {<br>    @Override<br>    </span><span class="s0" style="color: #cc7832;">public void </span><span class="s1" style="color: #a9b7c6;">onEvent(LongEvent longEvent</span><span class="s0" style="color: #cc7832;">, long </span><span class="s1" style="color: #a9b7c6;">l</span><span class="s0" style="color: #cc7832;">, boolean </span><span class="s1" style="color: #a9b7c6;">b) </span><span class="s0" style="color: #cc7832;">throws </span><span class="s1" style="color: #a9b7c6;">Exception {<br>        System.out.println(longEvent.getValue())</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br>    }<br>} </span></pre><br><p>事件都会有一个生成事件的源，这个例子中假设事件是由于磁盘IO或者network读取数据的时候触发的，事件源使用一个ByteBuffer来模拟它接受到的数据，也就是说，事件源会在IO读取到一部分数据的时候触发事件（触发事件不是自动的，程序员需要在读取到数据的时候自己触发事件并发布）：</p><br><p>&nbsp;</p><br><pre style="color: #000000;"><span class="s0" style="color: #cc7832;">public class </span><span class="s1" style="color: #a9b7c6;">LongEventProducer {<br>    </span><span class="s0" style="color: #cc7832;">private final </span><span class="s1" style="color: #a9b7c6;">RingBuffer&lt;LongEvent&gt; ringBuffer</span><span class="s0" style="color: #cc7832;">;<br></span><span class="s0" style="color: #cc7832;">    public </span><span class="s1" style="color: #a9b7c6;">LongEventProducer(RingBuffer&lt;LongEvent&gt; ringBuffer) {<br>        </span><span class="s0" style="color: #cc7832;">this</span><span class="s1" style="color: #a9b7c6;">.ringBuffer = ringBuffer</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br>    }<br><br>    </span><span class="s2" style="color: #629755;">/<br>     <em> onData用来发布事件，每调用一次就发布一次事件事件 
     </em> 它的参数会通过事件传递给消费者<br>     <em> 
     </em> @param bb<br>     <em>/</em></span><span class="s0" style="color: #cc7832;">public void </span><span class="s1" style="color: #a9b7c6;">onData(ByteBuffer bb) {<br>            </span><span class="s3" style="color: #808080;">//可以把ringBuffer看做一个事件队列，那么next就是得到下面一个事件槽<br></span><span class="s0" style="color: #cc7832;">            long </span><span class="s1" style="color: #a9b7c6;">sequence = ringBuffer.next()</span><span class="s0" style="color: #cc7832;">;</span><span class="s0" style="color: #cc7832;">try </span><span class="s1" style="color: #a9b7c6;">{<br>            </span><span class="s3" style="color: #808080;">//用上面的索引取出一个空的事件用于填充</span><span class="s1" style="color: #a9b7c6;"><br>            LongEvent event = ringBuffer.get(sequence)</span><span class="s0" style="color: #cc7832;">;</span><span class="s3" style="color: #808080;">// for the sequence</span><span class="s1" style="color: #a9b7c6;"><br>            event.setValue(bb.getLong(</span><span class="s4" style="color: #6897bb;">0</span><span class="s1" style="color: #a9b7c6;">))</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br>        } </span><span class="s0" style="color: #cc7832;">finally </span><span class="s1" style="color: #a9b7c6;">{<br>            </span><span class="s3" style="color: #808080;">//发布事件</span><span class="s1" style="color: #a9b7c6;"><br>            ringBuffer.publish(sequence)</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br>        }<br>    }<br>} </span></pre><br><p>很明显的是：当用一个简单队列来发布事件的时候会牵涉更多的细节，这是因为事件对象还需要预先创建。发布事件最少需要两步：获取下一个事件槽并发布事件（发布事件的时候要使用try/finnally保证事件一定会被发布）。如果我们使用RingBuffer.next()获取一个事件槽，那么一定要发布对应的事件。如果不能发布事件，那么就会引起Disruptor状态的混乱。尤其是在多个事件生产者的情况下会导致事件消费者失速，从而不得不重启应用才能会恢复。</p><br><p>Disruptor 3.0提供了lambda式的API。这样可以把一些复杂的操作放在Ring Buffer，所以在Disruptor3.0以后的版本最好使用Event Publisher或者Event Translator来发布事件。</p><br><p>&nbsp;</p><br><pre style="color: #000000;"><span class="s0" style="color: #cc7832;">public class </span><span class="s1" style="color: #a9b7c6;">LongEventProducerWithTranslator {<br>    </span><span class="s3" style="color: #808080;">//一个translator可以看做一个事件初始化器，publicEvent方法会调用它<br></span><span class="s3" style="color: #808080;">    //填充Event<br></span><span class="s0" style="color: #cc7832;">    private static final </span><span class="s1" style="color: #a9b7c6;">EventTranslatorOneArg&lt;LongEvent</span><span class="s0" style="color: #cc7832;">, </span><span class="s1" style="color: #a9b7c6;">ByteBuffer&gt; TRANSLATOR =<br>            </span><span class="s0" style="color: #cc7832;">new </span><span class="s1" style="color: #a9b7c6;">EventTranslatorOneArg&lt;LongEvent</span><span class="s0" style="color: #cc7832;">, </span><span class="s1" style="color: #a9b7c6;">ByteBuffer&gt;() {<br>                </span><span class="s0" style="color: #cc7832;">public void </span><span class="s1" style="color: #a9b7c6;">translateTo(LongEvent event</span><span class="s0" style="color: #cc7832;">, long </span><span class="s1" style="color: #a9b7c6;">sequence</span><span class="s0" style="color: #cc7832;">, </span><span class="s1" style="color: #a9b7c6;">ByteBuffer bb) {<br>                    event.setValue(bb.getLong(</span><span class="s4" style="color: #6897bb;">0</span><span class="s1" style="color: #a9b7c6;">))</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br>                }<br>            }</span><span class="s0" style="color: #cc7832;">;<br></span><span class="s0" style="color: #cc7832;">    private final </span><span class="s1" style="color: #a9b7c6;">RingBuffer&lt;LongEvent&gt; ringBuffer</span><span class="s0" style="color: #cc7832;">;<br></span><span class="s0" style="color: #cc7832;">    public </span><span class="s1" style="color: #a9b7c6;">LongEventProducerWithTranslator(RingBuffer&lt;LongEvent&gt; ringBuffer) {<br>        </span><span class="s0" style="color: #cc7832;">this</span><span class="s1" style="color: #a9b7c6;">.ringBuffer = ringBuffer</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br>    }<br><br>    </span><span class="s0" style="color: #cc7832;">public void </span><span class="s1" style="color: #a9b7c6;">onData(ByteBuffer bb) {<br>        ringBuffer.publishEvent(TRANSLATOR</span><span class="s0" style="color: #cc7832;">, </span><span class="s1" style="color: #a9b7c6;">bb)</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br>    }<br>} </span></pre><br><p>上面写法的另一个好处是，Translator可以分离出来并且更加容易单元测试。Disruptor提供了不同的接口(EventTranslator, EventTranslatorOneArg, EventTranslatorTwoArg, 等等)去产生一个Translator对象。很明显，Translator中方法的参数是通过RingBuffer来传递的。</p><br><p>&nbsp;</p><br><p>最后一步就是把所有的代码组合起来完成一个完整的事件处理系统。Disruptor在这方面做了简化，使用了DSL风格的代码（其实就是按照直观的写法，不太能算得上真正的DSL）。虽然DSL的写法比较简单，但是并没有提供所有的选项。如果依靠DSL已经可以处理大部分情况了。</p><br><p>&nbsp;</p><br><pre style="color: #000000;"><span class="s0" style="color: #cc7832;">public class </span><span class="s1" style="color: #a9b7c6;">LongEventMain {<br>    </span><span class="s0" style="color: #cc7832;">public static void </span><span class="s1" style="color: #a9b7c6;">main(String[] args) </span><span class="s0" style="color: #cc7832;">throws </span><span class="s1" style="color: #a9b7c6;">InterruptedException {<br>        </span><span class="s3" style="color: #808080;">// Executor that will be used to construct new threads for consumers</span><span class="s1" style="color: #a9b7c6;"><br>        Executor executor = Executors.newCachedThreadPool()</span><span class="s0" style="color: #cc7832;">;<br></span><span class="s3" style="color: #808080;">        // The factory for the event</span><span class="s1" style="color: #a9b7c6;"><br>        LongEventFactory factory = </span><span class="s0" style="color: #cc7832;">new </span><span class="s1" style="color: #a9b7c6;">LongEventFactory()</span><span class="s0" style="color: #cc7832;">;<br></span><span class="s3" style="color: #808080;">        // Specify the size of the ring buffer, must be power of 2.<br></span><span class="s0" style="color: #cc7832;">        int </span><span class="s1" style="color: #a9b7c6;">bufferSize = </span><span class="s4" style="color: #6897bb;">1024</span><span class="s0" style="color: #cc7832;">;<br></span><span class="s3" style="color: #808080;">        // Construct the Disruptor</span><span class="s1" style="color: #a9b7c6;"><br>        Disruptor&lt;LongEvent&gt; disruptor = </span><span class="s0" style="color: #cc7832;">new </span><span class="s1" style="color: #a9b7c6;">Disruptor&lt;LongEvent&gt;(factory</span><span class="s0" style="color: #cc7832;">, </span><span class="s1" style="color: #a9b7c6;">bufferSize</span><span class="s0" style="color: #cc7832;">, </span><span class="s1" style="color: #a9b7c6;">executor)</span><span class="s0" style="color: #cc7832;">;<br></span><span class="s3" style="color: #808080;">        // Connect the handler</span><span class="s1" style="color: #a9b7c6;"><br>        disruptor.handleEventsWith(</span><span class="s0" style="color: #cc7832;">new </span><span class="s1" style="color: #a9b7c6;">LongEventHandler())</span><span class="s0" style="color: #cc7832;">;<br></span><span class="s3" style="color: #808080;">        // Start the Disruptor, starts all threads running</span><span class="s1" style="color: #a9b7c6;"><br>        disruptor.start()</span><span class="s0" style="color: #cc7832;">;<br></span><span class="s3" style="color: #808080;">        // Get the ring buffer from the Disruptor to be used for publishing.</span><span class="s1" style="color: #a9b7c6;"><br>        RingBuffer&lt;LongEvent&gt; ringBuffer = disruptor.getRingBuffer()</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br><br>        LongEventProducer producer = </span><span class="s0" style="color: #cc7832;">new </span><span class="s1" style="color: #a9b7c6;">LongEventProducer(ringBuffer)</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br><br>        ByteBuffer bb = ByteBuffer.allocate(</span><span class="s4" style="color: #6897bb;">8</span><span class="s1" style="color: #a9b7c6;">)</span><span class="s0" style="color: #cc7832;">;<br></span><span class="s0" style="color: #cc7832;">        for </span><span class="s1" style="color: #a9b7c6;">(</span><span class="s0" style="color: #cc7832;">long </span><span class="s1" style="color: #a9b7c6;">l = </span><span class="s4" style="color: #6897bb;">0</span><span class="s0" style="color: #cc7832;">; true; </span><span class="s1" style="color: #a9b7c6;">l++) {<br>            bb.putLong(</span><span class="s4" style="color: #6897bb;">0</span><span class="s0" style="color: #cc7832;">, </span><span class="s1" style="color: #a9b7c6;">l)</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br>            producer.onData(bb)</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br>            Thread.sleep(</span><span class="s4" style="color: #6897bb;">1000</span><span class="s1" style="color: #a9b7c6;">)</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br>        }<br>    }<br>} </span></pre><br><h2>使用Java 8</h2><br><p>Disruptor在自己的接口里面添加了对于Java 8 Lambda的支持。大部分Disruptor中的接口都符合Functional Interface的要求（也就是在接口中仅仅有一个方法）。所以在Disruptor中，可以广泛使用Lambda来代替自定义类。</p><br><pre style="color: #000000;"><span class="s0" style="color: #cc7832;">public class </span><span class="s1" style="color: #a9b7c6;">LongEventMainJava8 {<br>    </span><span class="s2" style="color: #629755;">/** 
      用lambda表达式来注册EventHandler和EventProductor<br>     <em> @param args 
     </em> @throws InterruptedException<br>     */</span><span class="s0" style="color: #cc7832;">public static void </span><span class="s1" style="color: #a9b7c6;">main(String[] args) </span><span class="s0" style="color: #cc7832;">throws </span><span class="s1" style="color: #a9b7c6;">InterruptedException {<br>        </span><span class="s3" style="color: #808080;">// Executor that will be used to construct new threads for consumers</span><span class="s1" style="color: #a9b7c6;"><br>        Executor executor = Executors.newCachedThreadPool()</span><span class="s0" style="color: #cc7832;">;<br></span><span class="s3" style="color: #808080;">        // Specify the size of the ring buffer, must be power of 2.<br></span><span class="s0" style="color: #cc7832;">        int </span><span class="s1" style="color: #a9b7c6;">bufferSize = </span><span class="s4" style="color: #6897bb;">1024</span><span class="s0" style="color: #cc7832;">;</span><span class="s3" style="color: #808080;">// Construct the Disruptor</span><span class="s1" style="color: #a9b7c6;"><br>        Disruptor&lt;LongEvent&gt; disruptor = </span><span class="s0" style="color: #cc7832;">new </span><span class="s1" style="color: #a9b7c6;">Disruptor&lt;&gt;(LongEvent::</span><span class="s0" style="color: #cc7832;">new, </span><span class="s1" style="color: #a9b7c6;">bufferSize</span><span class="s0" style="color: #cc7832;">, </span><span class="s1" style="color: #a9b7c6;">executor)</span><span class="s0" style="color: #cc7832;">;<br></span><span class="s3" style="color: #808080;">        // 可以使用lambda来注册一个EventHandler</span><span class="s1" style="color: #a9b7c6;"><br>        disruptor.handleEventsWith((event</span><span class="s0" style="color: #cc7832;">, </span><span class="s1" style="color: #a9b7c6;">sequence</span><span class="s0" style="color: #cc7832;">, </span><span class="s1" style="color: #a9b7c6;">endOfBatch) -&gt; System.out.println(</span><span class="s5" style="color: #6a8759;">“Event: “ </span><span class="s1" style="color: #a9b7c6;">+ event.getValue()))</span><span class="s0" style="color: #cc7832;">;<br></span><span class="s3" style="color: #808080;">        // Start the Disruptor, starts all threads running</span><span class="s1" style="color: #a9b7c6;"><br>        disruptor.start()</span><span class="s0" style="color: #cc7832;">;<br></span><span class="s3" style="color: #808080;">        // Get the ring buffer from the Disruptor to be used for publishing.</span><span class="s1" style="color: #a9b7c6;"><br>        RingBuffer&lt;LongEvent&gt; ringBuffer = disruptor.getRingBuffer()</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br><br>        LongEventProducer producer = </span><span class="s0" style="color: #cc7832;">new </span><span class="s1" style="color: #a9b7c6;">LongEventProducer(ringBuffer)</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br><br>        ByteBuffer bb = ByteBuffer.allocate(</span><span class="s4" style="color: #6897bb;">8</span><span class="s1" style="color: #a9b7c6;">)</span><span class="s0" style="color: #cc7832;">;</span><span class="s0" style="color: #cc7832;">for </span><span class="s1" style="color: #a9b7c6;">(</span><span class="s0" style="color: #cc7832;">long </span><span class="s1" style="color: #a9b7c6;">l = </span><span class="s4" style="color: #6897bb;">0</span><span class="s0" style="color: #cc7832;">; true; </span><span class="s1" style="color: #a9b7c6;">l++) {<br>            bb.putLong(</span><span class="s4" style="color: #6897bb;">0</span><span class="s0" style="color: #cc7832;">, </span><span class="s1" style="color: #a9b7c6;">l)</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br>            ringBuffer.publishEvent((event</span><span class="s0" style="color: #cc7832;">, </span><span class="s1" style="color: #a9b7c6;">sequence</span><span class="s0" style="color: #cc7832;">, </span><span class="s1" style="color: #a9b7c6;">buffer) -&gt; event.setValue(buffer.getLong(</span><span class="s4" style="color: #6897bb;">0</span><span class="s1" style="color: #a9b7c6;">))</span><span class="s0" style="color: #cc7832;">, </span><span class="s1" style="color: #a9b7c6;">bb)</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br>            Thread.sleep(</span><span class="s4" style="color: #6897bb;">1000</span><span class="s1" style="color: #a9b7c6;">)</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br>        }<br>    }<br>} </span></pre><br><p>在上面的代码中，有很多自定义类型可以被省略了。还有注意的是：publishEvent方法中仅调用传递给它的参数，并不是直接调用对应的对象。如果把这段代码换成下面的代码：</p><br><p>&nbsp;</p><br><pre><span class="n">ByteBuffer</span> <span class="n">bb</span> <span class="o" style="font-weight: bold;">=</span> <span class="n">ByteBuffer</span><span class="o" style="font-weight: bold;">.</span><span class="na" style="color: teal;">allocate</span><span class="o" style="font-weight: bold;">(</span><span class="mi" style="color: #009999;">8</span><span class="o" style="font-weight: bold;">);</span><br><span class="k" style="font-weight: bold;">for</span> <span class="o" style="font-weight: bold;">(</span><span class="kt" style="font-weight: bold; color: #445588;">long</span> <span class="n">l</span> <span class="o" style="font-weight: bold;">=</span> <span class="mi" style="color: #009999;">0</span><span class="o" style="font-weight: bold;">;</span> <span class="kc" style="font-weight: bold;">true</span><span class="o" style="font-weight: bold;">;</span> <span class="n">l</span><span class="o" style="font-weight: bold;">++)</span><br><span class="o" style="font-weight: bold;">{</span><br>    <span class="n">bb</span><span class="o" style="font-weight: bold;">.</span><span class="na" style="color: teal;">putLong</span><span class="o" style="font-weight: bold;">(</span><span class="mi" style="color: #009999;">0</span><span class="o" style="font-weight: bold;">,</span> <span class="n">l</span><span class="o" style="font-weight: bold;">);</span><br>    <span class="n">ringBuffer</span><span class="o" style="font-weight: bold;">.</span><span class="na" style="color: teal;">publishEvent</span><span class="o" style="font-weight: bold;">((</span><span class="n">event</span><span class="o" style="font-weight: bold;">,</span> <span class="n">sequence</span><span class="o" style="font-weight: bold;">)</span> <span class="o" style="font-weight: bold;">-&gt;</span> <span class="n">event</span><span class="o" style="font-weight: bold;">.</span><span class="na" style="color: teal;">set</span><span class="o" style="font-weight: bold;">(</span><span class="n">bb</span><span class="o" style="font-weight: bold;">.</span><span class="na" style="color: teal;">getLong</span><span class="o" style="font-weight: bold;">(</span><span class="mi" style="color: #009999;">0</span><span class="o" style="font-weight: bold;">)));</span><br>    <span class="n">Thread</span><span class="o" style="font-weight: bold;">.</span><span class="na" style="color: teal;">sleep</span><span class="o" style="font-weight: bold;">(</span><span class="mi" style="color: #009999;">1000</span><span class="o" style="font-weight: bold;">);</span><br><span class="o" style="font-weight: bold;">}</span></pre><br><p>这段代码中有一个捕获参数的lambda，意味着在lambda表达式生成的内部类中会生成一个对象来存储这个捕获的bb对象。这会增加不必要的GC。所以在需要较低GC水平的情况下最好把所有的参数都通过publishEvent传递。</p><br><p>&nbsp;</p><br><p>由于在Java 8中方法引用也是一个lambda，因此还可以把上面的代码改成下面的代码：</p><br><pre style="color: #000000;"><span class="s0" style="color: #cc7832;">public class </span><span class="s1" style="color: #a9b7c6;">LongEventWithMethodRef {<br>    </span><span class="s0" style="color: #cc7832;">public static void </span><span class="s1" style="color: #a9b7c6;">handleEvent(LongEvent event</span><span class="s0" style="color: #cc7832;">, long </span><span class="s1" style="color: #a9b7c6;">sequence</span><span class="s0" style="color: #cc7832;">, boolean </span><span class="s1" style="color: #a9b7c6;">endOfBatch)<br>    {<br>        System.out.println(event.getValue())</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br>    }<br><br>    </span><span class="s0" style="color: #cc7832;">public static void </span><span class="s1" style="color: #a9b7c6;">translate(LongEvent event</span><span class="s0" style="color: #cc7832;">, long </span><span class="s1" style="color: #a9b7c6;">sequence</span><span class="s0" style="color: #cc7832;">, </span><span class="s1" style="color: #a9b7c6;">ByteBuffer buffer)<br>    {<br>        event.setValue(buffer.getLong(</span><span class="s3" style="color: #6897bb;">0</span><span class="s1" style="color: #a9b7c6;">))</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br>    }<br><br>    </span><span class="s0" style="color: #cc7832;">public static void </span><span class="s1" style="color: #a9b7c6;">main(String[] args) </span><span class="s0" style="color: #cc7832;">throws </span><span class="s1" style="color: #a9b7c6;">Exception<br>    {<br>        </span><span class="s4" style="color: #808080;">// Executor that will be used to construct new threads for consumers</span><span class="s1" style="color: #a9b7c6;"><br>        Executor executor = Executors.newCachedThreadPool()</span><span class="s0" style="color: #cc7832;">;<br></span><span class="s4" style="color: #808080;">        // Specify the size of the ring buffer, must be power of 2.<br></span><span class="s0" style="color: #cc7832;">        int </span><span class="s1" style="color: #a9b7c6;">bufferSize = </span><span class="s3" style="color: #6897bb;">1024</span><span class="s0" style="color: #cc7832;">;<br></span><span class="s4" style="color: #808080;">        // Construct the Disruptor</span><span class="s1" style="color: #a9b7c6;"><br>        Disruptor&lt;LongEvent&gt; disruptor = </span><span class="s0" style="color: #cc7832;">new </span><span class="s1" style="color: #a9b7c6;">Disruptor&lt;&gt;(LongEvent::</span><span class="s0" style="color: #cc7832;">new, </span><span class="s1" style="color: #a9b7c6;">bufferSize</span><span class="s0" style="color: #cc7832;">, </span><span class="s1" style="color: #a9b7c6;">executor)</span><span class="s0" style="color: #cc7832;">;<br></span><span class="s4" style="color: #808080;">        // Connect the handler</span><span class="s1" style="color: #a9b7c6;"><br>        disruptor.handleEventsWith(LongEventWithMethodRef::handleEvent)</span><span class="s0" style="color: #cc7832;">;<br></span><span class="s4" style="color: #808080;">        // Start the Disruptor, starts all threads running</span><span class="s1" style="color: #a9b7c6;"><br>        disruptor.start()</span><span class="s0" style="color: #cc7832;">;<br></span><span class="s4" style="color: #808080;">        // Get the ring buffer from the Disruptor to be used for publishing.</span><span class="s1" style="color: #a9b7c6;"><br>        RingBuffer&lt;LongEvent&gt; ringBuffer = disruptor.getRingBuffer()</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br><br>        LongEventProducer producer = </span><span class="s0" style="color: #cc7832;">new </span><span class="s1" style="color: #a9b7c6;">LongEventProducer(ringBuffer)</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br><br>        ByteBuffer bb = ByteBuffer.allocate(</span><span class="s3" style="color: #6897bb;">8</span><span class="s1" style="color: #a9b7c6;">)</span><span class="s0" style="color: #cc7832;">;<br></span><span class="s0" style="color: #cc7832;">        for </span><span class="s1" style="color: #a9b7c6;">(</span><span class="s0" style="color: #cc7832;">long </span><span class="s1" style="color: #a9b7c6;">l = </span><span class="s3" style="color: #6897bb;">0</span><span class="s0" style="color: #cc7832;">; true; </span><span class="s1" style="color: #a9b7c6;">l++)<br>        {<br>            bb.putLong(</span><span class="s3" style="color: #6897bb;">0</span><span class="s0" style="color: #cc7832;">, </span><span class="s1" style="color: #a9b7c6;">l)</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br>            ringBuffer.publishEvent(LongEventWithMethodRef::translate</span><span class="s0" style="color: #cc7832;">, </span><span class="s1" style="color: #a9b7c6;">bb)</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br>            Thread.sleep(</span><span class="s3" style="color: #6897bb;">1000</span><span class="s1" style="color: #a9b7c6;">)</span><span class="s0" style="color: #cc7832;">;</span><span class="s1" style="color: #a9b7c6;"><br>        }<br>    }<br>} </span></pre><br><p>&nbsp;</p><br><h2 style="color: #000000;">基本调整选项</h2><br><p style="color: #000000;">上面的代码已经可以处理大多数的情况了，但是在有的时候还是会需要根据不同的软件或者硬件来调整选项以获得更高的性能。基本的选项有两个：单或者多生产者模式和可选的等待策略。</p><br><h3>单或多 事件生产者</h3><br><p>在并发系统中提高性能最好的方式之一就是<a href="http://mechanical-sympathy.blogspot.co.nz/2011/09/single-writer-principle.html" target="_blank" rel="external">单一写者原则</a>，对Disruptor也是适用的。如果在你的代码中仅仅有一个事件生产者，那么可以设置为单一生产者模式来提高系统的性能。</p><br><p>&nbsp;</p><br><pre style="color: #000000;"><span class="s0" style="color: #cc7832;">public class </span><span class="s1" style="color: #a9b7c6;">singleProductorLongEventMain {<br>    </span><span class="s0" style="color: #cc7832;">public static void </span><span class="s1" style="color: #a9b7c6;">main(String[] args) </span><span class="s0" style="color: #cc7832;">throws </span><span class="s1" style="color: #a9b7c6;">Exception {<br>        </span><span class="s3" style="color: #808080;">//…..</span><span class="s3" style="color: #808080;">// Construct the Disruptor with a SingleProducerSequencer</span><span class="s1" style="color: #a9b7c6;"><br><br>        Disruptor&lt;LongEvent&gt; disruptor = </span><span class="s0" style="color: #cc7832;">new </span><span class="s1" style="color: #a9b7c6;">Disruptor(factory</span><span class="s0" style="color: #cc7832;">,</span><span class="s1" style="color: #a9b7c6;"><br>                bufferSize</span><span class="s0" style="color: #cc7832;">,</span><span class="s1" style="color: #a9b7c6;"><br>                ProducerType.SINGLE</span><span class="s0" style="color: #cc7832;">, </span><span class="s3" style="color: #808080;">// Single producer</span><span class="s0" style="color: #cc7832;">new </span><span class="s1" style="color: #a9b7c6;">BlockingWaitStrategy()</span><span class="s0" style="color: #cc7832;">,</span><span class="s1" style="color: #a9b7c6;"><br>                executor)</span><span class="s0" style="color: #cc7832;">;</span><span class="s3" style="color: #808080;">//…..</span><span class="s1" style="color: #a9b7c6;"><br>    }<br>}<br></span></pre><br><p>为了证明，下面的数据是从Mac Air i7上面测试的结果：</p><br><h3>多生产者：</h3><br><p>&nbsp;</p><br><pre><code>Run 0, Disruptor=26,553,372 ops/sec<br>Run 1, Disruptor=28,727,377 ops/sec<br>Run 2, Disruptor=29,806,259 ops/sec<br>Run 3, Disruptor=29,717,682 ops/sec<br>Run 4, Disruptor=28,818,443 ops/sec<br>Run 5, Disruptor=29,103,608 ops/sec<br>Run 6, Disruptor=29,239,766 ops/sec</code></pre><br><h3>单生产者：</h3><br><pre><code>Run 0, Disruptor=89,365,504 ops/sec<br>Run 1, Disruptor=77,579,519 ops/sec<br>Run 2, Disruptor=78,678,206 ops/sec<br>Run 3, Disruptor=80,840,743 ops/sec<br>Run 4, Disruptor=81,037,277 ops/sec<br>Run 5, Disruptor=81,168,831 ops/sec<br>Run 6, Disruptor=81,699,346 ops/sec</code></pre><br><p>&nbsp;</p><br><h2><strong> 可选的等待策略</strong></h2><br><p>Disruptor默认的等待策略是BlockingWaitStrategy。这个策略的内部适用一个锁和条件变量来控制线程的执行和等待（Java基本的同步方法）。BlockingWaitStrategy是最慢的等待策略，但也是CPU使用率最低和最稳定的选项。然而，可以根据不同的部署环境调整选项以提高性能。</p><br><h3>SleepingWaitStrategy</h3><br><p>和BlockingWaitStrategy一样，SpleepingWaitStrategy的CPU使用率也比较低。它的方式是循环等待并且在循环中间调用LockSupport.parkNanos(1)来睡眠，（在Linux系统上面睡眠时间60µs）.然而，它的优点在于生产线程只需要计数，而不执行任何指令。并且没有条件变量的消耗。但是，事件对象从生产者到消费者传递的延迟变大了。SleepingWaitStrategy最好用在不需要低延迟，而且事件发布对于生产者的影响比较小的情况下。比如异步日志功能。</p><br><h3>YieldingWaitStrategy</h3><br><p>YieldingWaitStrategy是可以被用在低延迟系统中的两个策略之一，这种策略在减低系统延迟的同时也会增加CPU运算量。YieldingWaitStrategy策略会循环等待sequence增加到合适的值。循环中调用Thread.yield()允许其他准备好的线程执行。如果需要高性能而且事件消费者线程比逻辑内核少的时候，推荐使用YieldingWaitStrategy策略。例如：在开启超线程的时候。</p><br><h3>BusySpinWaitStrategy</h3><br><p>BusySpinWaitStrategy是性能最高的等待策略，同时也是对部署环境要求最高的策略。这个性能最好用在事件处理线程比物理内核数目还要小的时候。例如：在禁用超线程技术的时候。</p><br><h3></h3><br><p>&nbsp;</p><br><div style="margin-top: 15px; font-style: italic"><br><p><strong>原创文章，转载请注明：</strong> 转载自<a href="http://ifeve.com/" target="_blank" rel="external">并发编程网 &#8211; ifeve.com</a><strong>本文链接地址:</strong> <a href="http://ifeve.com/disruptor-getting-started/" target="_blank" rel="external">Disruptor入门</a></p><br></div>
</div>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://bloodorange2017.github.io/archives/2017/06/08/jvm-API/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XueCheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://bloodorange2017.github.io/images/img_head_001.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XueCheng Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/08/jvm-API/" itemprop="url">JVM Management API</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-06-08T16:05:27+08:00">
                2017-06-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div id="article_content" class="article_content tracking-ad" data-mod="popu_307" data-dsm="post"><br><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br>JVM本身提供了一组管理的API，通过该API，我们可以获取得到JVM内部主要运行信息，包括内存各代的数据、JVM当前所有线程及其栈相关信 息等等。各种JDK自带的剖析工具，包括jps、jstack、jinfo、jstat、jmap、jconsole等，都是基于此API开发的。本篇对 这部分内容进行一个详细的说明。</p><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 参考：<a target="_blank" href="http://java.sun.com/javase/6/docs/api/java/lang/management/package-summary.html" style="margin:0px; padding:0px; color:black">http://java.sun.com/javase/6/docs/api/java/lang/management/package-summary.html</a><br style="margin:0px; padding:0px"><br>一、Management API<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 我们先看一下从Sun JVM我们可以获取到哪些信息，如下图（来自于JConsole的MBean部分的截图）：<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="file:///C:/Documents%20and%20Settings/Administrator/Local%20Settings/Temp/CyberArticle/abc7ee61d958d83f5239799a7ceef2fe_397_files/1e07dd78_b6ba_3d05_be3b_94d0c4a75f5f[1].jpg" alt="" style="margin:0px; padding:0px; border:0px; max-width:900px"><br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1．HotSpotDiagnostic：非标准的监控JMX，这块是Sun JVM自带的，主要提供了两个功能</p><br><ul style="margin:0px 0px 0px 30px; padding:0px; word-break:break-all; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br><li style="margin:0px 0px 1em; padding:0px; list-style:disc">修改JVM的启动参数（譬如在不需要重启的情况下设置-XX:&#43;HeapDumpOnOutOfMemoryError参数使得JVM内存不足的时候自动dump出堆空间到文件提供后续分析）</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">Dump堆信息到文件，可以猜测jmap工具是基于此功能来完成的</li></ul><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br>&nbsp;&nbsp;&nbsp;&nbsp; 我们通过com.sun.management.HotSpotDiagnosticMXBean定义了解其主要功能<br style="margin:0px; padding:0px"><br></p><br><div class="dp-highlighter" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;HotSpotDiagnosticMXBean&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>{&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">void&nbsp;dumpHeap(String&nbsp;s,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;flag)&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">throws&nbsp;IOException;&nbsp;&nbsp;</span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;List&nbsp;getDiagnosticOptions();&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;VMOption&nbsp;getVMOption(String&nbsp;s);&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">void&nbsp;setVMOption(String&nbsp;s,&nbsp;String&nbsp;s1);&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>}&nbsp;&nbsp;</li></ol><br></div><br><div class="dp-highlighter bg_java" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" start="1" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;HotSpotDiagnosticMXBean&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>{&nbsp;&nbsp;</li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">void&nbsp;dumpHeap(String&nbsp;s,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;flag)&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">throws&nbsp;IOException;&nbsp;&nbsp;</span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;List&nbsp;getDiagnosticOptions();&nbsp;&nbsp;</li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;VMOption&nbsp;getVMOption(String&nbsp;s);&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">void&nbsp;setVMOption(String&nbsp;s,&nbsp;String&nbsp;s1);&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>}&nbsp;&nbsp;</li></ol><br></div><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br>&nbsp;&nbsp;&nbsp;&nbsp; 2．ClassLoading：加载的类的总体信息，我们可以通过此MBean获取到JVM加载的类定义的总体信息，可以猜测JConsole的类功能就 是通过此MBean来提供的。我们可以通过java.lang.management.ClassLoadingMXBean定义了解其提供的主要功能</p><br><div class="dp-highlighter" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;ClassLoadingMXBean&nbsp;{&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getTotalLoadedClassCount();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">int&nbsp;getLoadedClassCount();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getUnloadedClassCount();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isVerbose();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">void&nbsp;setVerbose(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;value);&nbsp;&nbsp;</span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>}&nbsp;&nbsp;</li></ol><br></div><br><div class="dp-highlighter bg_java" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" start="1" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;ClassLoadingMXBean&nbsp;{&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getTotalLoadedClassCount();&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">int&nbsp;getLoadedClassCount();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getUnloadedClassCount();&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isVerbose();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">void&nbsp;setVerbose(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;value);&nbsp;&nbsp;</span></span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>}&nbsp;&nbsp;</li></ol><br></div><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br>&nbsp;&nbsp;&nbsp;&nbsp; 3.Compilation：提供JVM的JIT(Just In Time)编译器(将bytecode编译成native code)的信息，我们可以通过java.lang.management.CompilationMXBean定义了解其提供的主要功能</p><br><div class="dp-highlighter" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;CompilationMXBean&nbsp;{&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;java.lang.String&nbsp;&nbsp;&nbsp;&nbsp;getName();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isCompilationTimeMonitoringSupported();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getTotalCompilationTime();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>}&nbsp;&nbsp;</li></ol><br></div><br><div class="dp-highlighter bg_java" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" start="1" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;CompilationMXBean&nbsp;{&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;java.lang.String&nbsp;&nbsp;&nbsp;&nbsp;getName();&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isCompilationTimeMonitoringSupported();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getTotalCompilationTime();&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>}&nbsp;&nbsp;</li></ol><br></div><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br>&nbsp;&nbsp;&nbsp;&nbsp; 4.GarbageCollector：垃圾回收器信息，譬如在如上图中，我们启动的JVM会包含一个Copy垃圾回收器(用于Young Gen垃圾回收)和一个MarkAndSweep垃圾回收器(用于Tenured Gen垃圾回收)。我们可以通过java.lang.management.GarbageCollectorMXBean定义了解其提供的主要功能</p><br><div class="dp-highlighter" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;GarbageCollectorMXBean&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">extends&nbsp;MemoryManagerMXBean&nbsp;{&nbsp;&nbsp;</span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getCollectionCount();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getCollectionTime();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>}&nbsp;&nbsp;</li></ol><br></div><br><div class="dp-highlighter bg_java" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" start="1" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;GarbageCollectorMXBean&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">extends&nbsp;MemoryManagerMXBean&nbsp;{&nbsp;&nbsp;</span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getCollectionCount();&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getCollectionTime();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>}&nbsp;&nbsp;</li></ol><br></div><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br>&nbsp;&nbsp;&nbsp; java.lang.management.MemoryManagerMXBean定义是</p><br><div class="dp-highlighter" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;MemoryManagerMXBean&nbsp;{&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getName();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isValid();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String[]&nbsp;getMemoryPoolNames();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>}&nbsp;&nbsp;</li></ol><br></div><br><div class="dp-highlighter bg_java" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" start="1" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;MemoryManagerMXBean&nbsp;{&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getName();&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isValid();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String[]&nbsp;getMemoryPoolNames();&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>}&nbsp;&nbsp;</li></ol><br></div><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br>&nbsp;&nbsp;&nbsp; 除了如上信息，Sun JVM在实现上还提供了一个额外的信息LastGCInfo，见com.sun.management.GarbageCollectorMXBean定义</p><br><div class="dp-highlighter" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;GarbageCollectorMXBean&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">extends&nbsp;java.lang.management.GarbageCollectorMXBean&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>{&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;GcInfo&nbsp;getLastGcInfo();&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>}&nbsp;&nbsp;</li></ol><br></div><br><div class="dp-highlighter bg_java" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" start="1" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;GarbageCollectorMXBean&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">extends&nbsp;java.lang.management.GarbageCollectorMXBean&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>{&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;GcInfo&nbsp;getLastGcInfo();&nbsp;&nbsp;</li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>}&nbsp;&nbsp;</li></ol><br></div><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br>&nbsp;&nbsp;&nbsp; 我们可以通过下面的截图了解GcInfo包含的主要信息<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp;&nbsp;<img src="file:///C:/Documents%20and%20Settings/Administrator/Local%20Settings/Temp/CyberArticle/abc7ee61d958d83f5239799a7ceef2fe_397_files/09ef4960_c6e2_35b0_abbc_fdf1dd3d282c[1].jpg" alt="" width="592" height="208" style="margin:0px; padding:0px; border:0px; max-width:900px"><br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 其中java.lang.management.MemoryUsage后续可以看说明<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5.内存相关<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 可以猜测，JConsole的内存部分的功能都是通过此部分的相关Bean来完成的。<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1)Memory/MemoryManager：内存块相关信息，通过这MBean我们可以获取到内存的总体信息，并可以通过提供的gc操作进行强制gc 的功能(System.gc())。我们可以通过java.lang.management.MemoryMXBean和 java.lang.management.MemoryManagerMXBean了解其主要提供的功能</p><br><div class="dp-highlighter" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;MemoryMXBean&nbsp;{&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">int&nbsp;getObjectPendingFinalizationCount();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;MemoryUsage&nbsp;getHeapMemoryUsage();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;MemoryUsage&nbsp;getNonHeapMemoryUsage();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isVerbose();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">void&nbsp;setVerbose(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;value);&nbsp;&nbsp;</span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">void&nbsp;gc();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>}&nbsp;&nbsp;</li></ol><br></div><br><div class="dp-highlighter bg_java" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" start="1" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;MemoryMXBean&nbsp;{&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">int&nbsp;getObjectPendingFinalizationCount();&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;MemoryUsage&nbsp;getHeapMemoryUsage();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;MemoryUsage&nbsp;getNonHeapMemoryUsage();&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isVerbose();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">void&nbsp;setVerbose(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;value);&nbsp;&nbsp;</span></span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">void&nbsp;gc();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>}&nbsp;&nbsp;</li></ol><br></div><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 其中java.lang.management.MemoryUsage我们可以通过下图来了解其提供的主要信息</p><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br><img src="file:///C:/Documents%20and%20Settings/Administrator/Local%20Settings/Temp/CyberArticle/abc7ee61d958d83f5239799a7ceef2fe_397_files/ae098db5_5693_3ea1_89cd_24ebc53b0ccd[1].jpg" alt="" width="439" height="209" style="margin:0px; padding:0px; border:0px; max-width:900px"></p><br><div class="dp-highlighter" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;MemoryManagerMXBean&nbsp;{&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getName();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isValid();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String[]&nbsp;getMemoryPoolNames();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>}&nbsp;&nbsp;</li></ol><br></div><br><div class="dp-highlighter bg_java" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" start="1" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;MemoryManagerMXBean&nbsp;{&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getName();&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isValid();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String[]&nbsp;getMemoryPoolNames();&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>}&nbsp;&nbsp;</li></ol><br></div><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br>&nbsp;&nbsp;&nbsp;&nbsp; 2)MemoryPool：通过该MBean可以了解JVM各内存块的信息，譬如对于Sun JVM，目前包括Eden Space、Suvivor Space、Tenured Gen、CodeCache、Perm Gen，可以猜测JConsole的内存监控功能就是通过此MBean来做到的。我们可以通过 java.lang.management.MemoryPoolMXBean了解其主要提供的功能</p><br><div class="dp-highlighter" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;MemoryPoolMXBean&nbsp;{&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getName();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;MemoryType&nbsp;getType();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;MemoryUsage&nbsp;getUsage();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;MemoryUsage&nbsp;getPeakUsage();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">void&nbsp;resetPeakUsage();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isValid();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String[]&nbsp;getMemoryManagerNames();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getUsageThreshold();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">void&nbsp;setUsageThreshold(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;threshold);&nbsp;&nbsp;</span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isUsageThresholdExceeded();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getUsageThresholdCount();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isUsageThresholdSupported();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getCollectionUsageThreshold();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">void&nbsp;setCollectionUsageThreshold(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;threhsold);&nbsp;&nbsp;</span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isCollectionUsageThresholdExceeded();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getCollectionUsageThresholdCount();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;MemoryUsage&nbsp;getCollectionUsage();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isCollectionUsageThresholdSupported();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>}&nbsp;&nbsp;</li></ol><br></div><br><div class="dp-highlighter bg_java" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" start="1" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;MemoryPoolMXBean&nbsp;{&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getName();&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;MemoryType&nbsp;getType();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;MemoryUsage&nbsp;getUsage();&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;MemoryUsage&nbsp;getPeakUsage();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">void&nbsp;resetPeakUsage();&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isValid();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String[]&nbsp;getMemoryManagerNames();&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getUsageThreshold();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">void&nbsp;setUsageThreshold(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;threshold);&nbsp;&nbsp;</span></span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isUsageThresholdExceeded();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getUsageThresholdCount();&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isUsageThresholdSupported();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getCollectionUsageThreshold();&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">void&nbsp;setCollectionUsageThreshold(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;threhsold);&nbsp;&nbsp;</span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isCollectionUsageThresholdExceeded();&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getCollectionUsageThresholdCount();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;MemoryUsage&nbsp;getCollectionUsage();&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isCollectionUsageThresholdSupported();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>}&nbsp;&nbsp;</li></ol><br></div><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br>&nbsp;&nbsp;&nbsp;&nbsp; 6.系统运行信息<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp;&nbsp; 1）OperatingSystem：通过该MBean我们可以了解到JVM所运行在的操作系统上的一些相关信息，通过java.lang.management.OperatingSystemMXBean定义我们可以了解到其主要提供的功能</p><br><div class="dp-highlighter" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;OperatingSystemMXBean&nbsp;{&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getName();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getArch();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getVersion();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">int&nbsp;getAvailableProcessors();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">double&nbsp;getSystemLoadAverage();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>}&nbsp;&nbsp;</li></ol><br></div><br><div class="dp-highlighter bg_java" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" start="1" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;OperatingSystemMXBean&nbsp;{&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getName();&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getArch();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getVersion();&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">int&nbsp;getAvailableProcessors();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">double&nbsp;getSystemLoadAverage();&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>}&nbsp;&nbsp;</li></ol><br></div><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SunJVM在此基础上提供更多的一些信息，可以通过com.sun.management.OperatingSystemMXBean了解一些额外可以获取到的信息</p><br><div class="dp-highlighter" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;OperatingSystemMXBean&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">extends&nbsp;java.lang.management.OperatingSystemMXBean&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>{&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">long&nbsp;getCommittedVirtualMemorySize();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">long&nbsp;getTotalSwapSpaceSize();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">long&nbsp;getFreeSwapSpaceSize();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">long&nbsp;getProcessCpuTime();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">long&nbsp;getFreePhysicalMemorySize();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">long&nbsp;getTotalPhysicalMemorySize();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>}&nbsp;&nbsp;</li></ol><br></div><br><div class="dp-highlighter bg_java" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" start="1" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;OperatingSystemMXBean&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">extends&nbsp;java.lang.management.OperatingSystemMXBean&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>{&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">long&nbsp;getCommittedVirtualMemorySize();&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">long&nbsp;getTotalSwapSpaceSize();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">long&nbsp;getFreeSwapSpaceSize();&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">long&nbsp;getProcessCpuTime();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">long&nbsp;getFreePhysicalMemorySize();&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">long&nbsp;getTotalPhysicalMemorySize();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>}&nbsp;&nbsp;</li></ol><br></div><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br>&nbsp;&nbsp;&nbsp; 2）Runtime：通过该MBean获取获取到JVM一些相关的信息，通过java.lang.management.RuntimeMXBean可以了解其主要提供的功能</p><br><div class="dp-highlighter" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;RuntimeMXBean&nbsp;{&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getName();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getVmName();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getVmVendor();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getVmVersion();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getSpecName();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getSpecVendor();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getSpecVersion();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getManagementSpecVersion();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getClassPath();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getLibraryPath();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isBootClassPathSupported();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getBootClassPath();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;java.util.List&lt;String&gt;&nbsp;getInputArguments();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getUptime();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getStartTime();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;java.util.Map&lt;String,&nbsp;String&gt;&nbsp;getSystemProperties();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>}&nbsp;&nbsp;</li></ol><br></div><br><div class="dp-highlighter bg_java" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" start="1" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;RuntimeMXBean&nbsp;{&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getName();&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getVmName();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getVmVendor();&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getVmVersion();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getSpecName();&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getSpecVendor();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getSpecVersion();&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getManagementSpecVersion();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getClassPath();&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getLibraryPath();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isBootClassPathSupported();&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;String&nbsp;getBootClassPath();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;java.util.List&lt;String&gt;&nbsp;getInputArguments();&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getUptime();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getStartTime();&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;java.util.Map&lt;String,&nbsp;String&gt;&nbsp;getSystemProperties();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>}&nbsp;&nbsp;</li></ol><br></div><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 可以通过RuntimeMXBean.getUptime()和OperatingSystemMXBean. getProcessCpuTime()来计算JVM占用的系统CPU比例的情况，JConsole的CPU视图就是通过这种方式计算的。<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7.Threading：可以通过该MBean获取线程信息，包括线程状态、执行栈等。可以通过java.lang.management.ThreadMXBean了解其提供的主要功能</p><br><div class="dp-highlighter" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;ThreadMXBean&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">int&nbsp;getThreadCount();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">int&nbsp;getPeakThreadCount();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getTotalStartedThreadCount();&nbsp;&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">int&nbsp;getDaemonThreadCount();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long[]&nbsp;getAllThreadIds();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;ThreadInfo&nbsp;getThreadInfo(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;id);&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;ThreadInfo[]&nbsp;getThreadInfo(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long[]&nbsp;ids);&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;ThreadInfo&nbsp;getThreadInfo(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;id,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">int&nbsp;maxDepth);&nbsp;&nbsp;</span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;ThreadInfo[]&nbsp;getThreadInfo(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long[]&nbsp;ids,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">int&nbsp;maxDepth);&nbsp;&nbsp;</span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isThreadContentionMonitoringSupported();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isThreadContentionMonitoringEnabled();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">void&nbsp;setThreadContentionMonitoringEnabled(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;enable);&nbsp;&nbsp;</span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getCurrentThreadCpuTime();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getCurrentThreadUserTime();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getThreadCpuTime(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;id);&nbsp;&nbsp;</span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getThreadUserTime(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;id);&nbsp;&nbsp;</span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isThreadCpuTimeSupported();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isCurrentThreadCpuTimeSupported();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isThreadCpuTimeEnabled();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">void&nbsp;setThreadCpuTimeEnabled(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;enable);&nbsp;&nbsp;</span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long[]&nbsp;findMonitorDeadlockedThreads();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">void&nbsp;resetPeakThreadCount();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long[]&nbsp;findDeadlockedThreads();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isObjectMonitorUsageSupported();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isSynchronizerUsageSupported();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;ThreadInfo[]&nbsp;getThreadInfo(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long[]&nbsp;ids,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;lockedMonitors,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;lockedSynchronizers);&nbsp;&nbsp;</span></span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;ThreadInfo[]&nbsp;dumpAllThreads(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;lockedMonitors,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;lockedSynchronizers);&nbsp;&nbsp;</span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>}&nbsp;&nbsp;</li></ol><br></div><br><div class="dp-highlighter bg_java" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" start="1" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">interface&nbsp;ThreadMXBean&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">int&nbsp;getThreadCount();&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">int&nbsp;getPeakThreadCount();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getTotalStartedThreadCount();&nbsp;&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">int&nbsp;getDaemonThreadCount();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long[]&nbsp;getAllThreadIds();&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;ThreadInfo&nbsp;getThreadInfo(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;id);&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;ThreadInfo[]&nbsp;getThreadInfo(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long[]&nbsp;ids);&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;ThreadInfo&nbsp;getThreadInfo(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;id,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">int&nbsp;maxDepth);&nbsp;&nbsp;</span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;ThreadInfo[]&nbsp;getThreadInfo(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long[]&nbsp;ids,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">int&nbsp;maxDepth);&nbsp;&nbsp;</span></span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isThreadContentionMonitoringSupported();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isThreadContentionMonitoringEnabled();&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">void&nbsp;setThreadContentionMonitoringEnabled(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;enable);&nbsp;&nbsp;</span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getCurrentThreadCpuTime();&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getCurrentThreadUserTime();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getThreadCpuTime(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;id);&nbsp;&nbsp;</span></span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;getThreadUserTime(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long&nbsp;id);&nbsp;&nbsp;</span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isThreadCpuTimeSupported();&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isCurrentThreadCpuTimeSupported();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isThreadCpuTimeEnabled();&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">void&nbsp;setThreadCpuTimeEnabled(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;enable);&nbsp;&nbsp;</span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long[]&nbsp;findMonitorDeadlockedThreads();&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">void&nbsp;resetPeakThreadCount();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long[]&nbsp;findDeadlockedThreads();&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isObjectMonitorUsageSupported();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;isSynchronizerUsageSupported();&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;ThreadInfo[]&nbsp;getThreadInfo(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">long[]&nbsp;ids,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;lockedMonitors,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;lockedSynchronizers);&nbsp;&nbsp;</span></span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;ThreadInfo[]&nbsp;dumpAllThreads(<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;lockedMonitors,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">boolean&nbsp;lockedSynchronizers);&nbsp;&nbsp;</span></span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>}&nbsp;&nbsp;</li></ol><br></div><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br>&nbsp;&nbsp;&nbsp;&nbsp; 二、编程获取到JVM Manage信息<br style="margin:0px; padding:0px"><br>我们可以通过JMX的方式读取到JVM Manage定义的MBean，如下是3种获取方法<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp;&nbsp; 1.监控应用与被监控应用位于同一JVM</p><br><div class="dp-highlighter" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>MBeanServer&nbsp;server&nbsp;=&nbsp;<span id="casearchresult" style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span style="margin:0px; padding:0px">ManagementFactory</span>.getPlatformMBeanServer();&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>RuntimeMXBean&nbsp;rmxb&nbsp;=&nbsp;<span id="casearchresult" style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span style="margin:0px; padding:0px">ManagementFactory</span>.newPlatformMXBeanProxy(server,&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;java.lang:type=Runtime&quot;,&nbsp;RuntimeMXBean.<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">class);&nbsp;&nbsp;</span></span></li></ol><br></div><br><div class="dp-highlighter bg_java" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" start="1" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>MBeanServer&nbsp;server&nbsp;=&nbsp;&lt;span&nbsp;style=<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;BACKGROUND-COLOR:&nbsp;#00ff40;&nbsp;COLOR:&nbsp;black;&nbsp;&quot;&nbsp;id=<span class="string" style="margin:0px; padding:0px; border:none; background-color:inherit">&quot;casearchresult&quot;&gt;&lt;strong&gt;ManagementFactory&lt;/strong&gt;&lt;/span&gt;.getPlatformMBeanServer();&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>RuntimeMXBean&nbsp;rmxb&nbsp;=&nbsp;&lt;span&nbsp;style=<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;BACKGROUND-COLOR:&nbsp;#00ff40;&nbsp;COLOR:&nbsp;black;&nbsp;&quot;&nbsp;id=<span class="string" style="margin:0px; padding:0px; border:none; background-color:inherit">&quot;casearchresult&quot;&gt;&lt;strong&gt;ManagementFactory&lt;/strong&gt;&lt;/span&gt;.newPlatformMXBeanProxy(server,&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;java.lang:type=Runtime&quot;,&nbsp;RuntimeMXBean.<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">class);&nbsp;&nbsp;</span></span></li></ol><br></div><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.监控应用与被监控应用不位于同一JVM<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1)首先在被监控的JVM的启动参数中加入如下的启动参数以启JVM代理</p><br><div class="quote_div" style="margin:0px; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br>-Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=127.0.0.1:8000 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false</div><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2)连接到代理上</p><br><div class="dp-highlighter" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>JMXServiceURL&nbsp;url&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new&nbsp;JMXServiceURL(&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;service:jmx:rmi:///jndi/rmi://127.0.0.1:8000/jmxrmi&quot;);&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>JMXConnector&nbsp;connector&nbsp;=&nbsp;JMXConnectorFactory.connect(url);&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>RuntimeMXBean&nbsp;rmxb&nbsp;=&nbsp;<span id="casearchresult" style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span style="margin:0px; padding:0px">ManagementFactory</span>.newPlatformMXBeanProxy(connector&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.getMBeanServerConnection(),<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;java.lang:type=Runtime&quot;,&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RuntimeMXBean.<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">class);&nbsp;&nbsp;</span></li></ol><br></div><br><div class="dp-highlighter bg_java" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" start="1" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>JMXServiceURL&nbsp;url&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new&nbsp;JMXServiceURL(&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;service:jmx:rmi:///jndi/rmi://127.0.0.1:8000/jmxrmi&quot;);&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>JMXConnector&nbsp;connector&nbsp;=&nbsp;JMXConnectorFactory.connect(url);&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>RuntimeMXBean&nbsp;rmxb&nbsp;=&nbsp;&lt;span&nbsp;style=<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;BACKGROUND-COLOR:&nbsp;#00ff40;&nbsp;COLOR:&nbsp;black;&nbsp;&quot;&nbsp;id=<span class="string" style="margin:0px; padding:0px; border:none; background-color:inherit">&quot;casearchresult&quot;&gt;&lt;strong&gt;ManagementFactory&lt;/strong&gt;&lt;/span&gt;.newPlatformMXBeanProxy(connector&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.getMBeanServerConnection(),<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;java.lang:type=Runtime&quot;,&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RuntimeMXBean.<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">class);&nbsp;&nbsp;</span></li></ol><br></div><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br>&nbsp;&nbsp;&nbsp;&nbsp; 3.监控应用与被监控应用不位于同一JVM但在同一物理主机上(2的特化情况，通过进程Attach)<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 我们使用JDK工具，如jmap、jstack等的时候，工具所在的JVM当然与被监控的JVM不是同一个，所以不能使用方式1，被监控的JVM一般也不 会在启动参数中增加JMX的支持，所以方式2也没有办法。还好Sun JVM给我们提供了第3种非标准的方式，就是通过Attach到被监控的JVM进程，并在被监控的JVM中启动一个JMX代理，然后使用该代理通过2的方 式连接到被监控的JVM的JMX上。下面是一个使用范例，由于里面使用到的知识涉及到Java Instrutment(JVMTI的一个技术的Java实现)和Attach<br> API，因此此处不做详细解析，在后续看完Java Instrutment和Attach API自然就会明白。（注意，仅在JDK6&#43;中支持，另外，运行需要jdk的tools.jar包）</p><br><div class="dp-highlighter" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//Attach&nbsp;到5656的JVM进程上，后续Attach&nbsp;API再讲解&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>VirtualMachine&nbsp;virtualmachine&nbsp;=&nbsp;VirtualMachine.attach(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;5656&quot;);&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//让JVM加载jmx&nbsp;Agent，后续讲到Java&nbsp;Instrutment再讲解&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>String&nbsp;javaHome&nbsp;=&nbsp;virtualmachine.getSystemProperties().getProperty(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;java.home&quot;);&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>String&nbsp;jmxAgent&nbsp;=&nbsp;javaHome&nbsp;&#43;&nbsp;File.separator&nbsp;&#43;&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;lib&quot;&nbsp;&#43;&nbsp;File.separator&nbsp;&#43;&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; background-color:inherit">&quot;management-agent.jar&quot;;&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>virtualmachine.loadAgent(jmxAgent,&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;com.sun.management.jmxremote&quot;);&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//获得连接地址&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>Properties&nbsp;properties&nbsp;=&nbsp;virtualmachine.getAgentProperties();&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>String&nbsp;address&nbsp;=&nbsp;(String)properties.get(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;com.sun.management.jmxremote.localConnectorAddress&quot;);&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//Detach&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>virtualmachine.detach();&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>JMXServiceURL&nbsp;url&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new&nbsp;JMXServiceURL(address);&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>JMXConnector&nbsp;connector&nbsp;=&nbsp;JMXConnectorFactory.connect(url);&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>RuntimeMXBean&nbsp;rmxb&nbsp;=&nbsp;<span id="casearchresult" style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span style="margin:0px; padding:0px">ManagementFactory</span>.newPlatformMXBeanProxy(connector&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.getMBeanServerConnection(),&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;java.lang:type=Runtime&quot;,RuntimeMXBean.<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">class);&nbsp;&nbsp;</span></span></li></ol><br></div><br><div class="dp-highlighter bg_java" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" start="1" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//Attach&nbsp;到5656的JVM进程上，后续Attach&nbsp;API再讲解&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>VirtualMachine&nbsp;virtualmachine&nbsp;=&nbsp;VirtualMachine.attach(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;5656&quot;);&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//让JVM加载jmx&nbsp;Agent，后续讲到Java&nbsp;Instrutment再讲解&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>String&nbsp;javaHome&nbsp;=&nbsp;virtualmachine.getSystemProperties().getProperty(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;java.home&quot;);&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>String&nbsp;jmxAgent&nbsp;=&nbsp;javaHome&nbsp;&#43;&nbsp;File.separator&nbsp;&#43;&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;lib&quot;&nbsp;&#43;&nbsp;File.separator&nbsp;&#43;&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; background-color:inherit">&quot;management-agent.jar&quot;;&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>virtualmachine.loadAgent(jmxAgent,&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;com.sun.management.jmxremote&quot;);&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;</li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//获得连接地址&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>Properties&nbsp;properties&nbsp;=&nbsp;virtualmachine.getAgentProperties();&nbsp;&nbsp;</li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>String&nbsp;address&nbsp;=&nbsp;(String)properties.get(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;com.sun.management.jmxremote.localConnectorAddress&quot;);&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//Detach&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>virtualmachine.detach();&nbsp;&nbsp;</li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>JMXServiceURL&nbsp;url&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new&nbsp;JMXServiceURL(address);&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>JMXConnector&nbsp;connector&nbsp;=&nbsp;JMXConnectorFactory.connect(url);&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>RuntimeMXBean&nbsp;rmxb&nbsp;=&nbsp;&lt;span&nbsp;style=<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;BACKGROUND-COLOR:&nbsp;#00ff40;&nbsp;COLOR:&nbsp;black;&nbsp;&quot;&nbsp;id=<span class="string" style="margin:0px; padding:0px; border:none; background-color:inherit">&quot;casearchresult&quot;&gt;&lt;strong&gt;ManagementFactory&lt;/strong&gt;&lt;/span&gt;.newPlatformMXBeanProxy(connector&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.getMBeanServerConnection(),&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;java.lang:type=Runtime&quot;,RuntimeMXBean.<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">class);&nbsp;&nbsp;</span></span></li></ol><br></div><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 三、结束语<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 可以看到，通过标准的接口，我们已经可以获得运行的JVM很详细的信息，从运行JVM、操作系统，到内存、GC和线程，通过这些标准的接口我们已经可以对 JVM进行功能完善的监控。但是仅此是不够的，这部分接口描述的主要是JVM的总体性的信息，而无法提供更多的细节。在下一部分，我们将使用JPDA来更 深入地了解JVM内部信息更细节的信息，并了解我们如何通过JVM TI实现自动的性能监控<br style="margin:0px; padding:0px"><br></p><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br><br style="margin:0px; padding:0px"><br></p><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br><span style="margin:0px; padding:0px">软件包 java.lang.management 提供管理接口，用于监视和管理 Java 虚拟机以及 Java 虚拟机在其上运行的操作系统。<br style="margin:0px; padding:0px"><br>它同时允许从本地和远程对正在运行的 Java 虚拟机进行监视和管理。&nbsp;</span><br style="margin:0px; padding:0px"><br><br style="margin:0px; padding:0px"><br>管理接口<br style="margin:0px; padding:0px"><br><span style="margin:0px; padding:0px; background-color:rgb(204,255,255)"><span style="margin:0px; padding:0px; color:rgb(255,0,255)">ClassLoadingMXBean&nbsp; Java 虚拟机的类加载系统。<br style="margin:0px; padding:0px"><br>CompilationMXBean&nbsp; Java 虚拟机的编译系统。&nbsp;<br style="margin:0px; padding:0px"><br>MemoryMXBean&nbsp; Java 虚拟机的内存系统。&nbsp;<br style="margin:0px; padding:0px"><br>ThreadMXBean&nbsp; Java 虚拟机的线程系统。&nbsp;<br style="margin:0px; padding:0px"><br>RuntimeMXBean&nbsp; Java 虚拟机的运行时系统。&nbsp;<br style="margin:0px; padding:0px"><br>OperatingSystemMXBean&nbsp; Java 虚拟机在其上运行的操作系统。&nbsp;<br style="margin:0px; padding:0px"><br>GarbageCollectorMXBean&nbsp; Java 虚拟机中的垃圾回收器。&nbsp;<br style="margin:0px; padding:0px"><br>MemoryManagerMXBean&nbsp; Java 虚拟机中的内存管理器。&nbsp;<br style="margin:0px; padding:0px"><br>MemoryPoolMXBean&nbsp; Java 虚拟机中的内存池。&nbsp;<br style="margin:0px; padding:0px"><br>示例如下：<br style="margin:0px; padding:0px"><br>import java.lang.management.ClassLoadingMXBean;<br style="margin:0px; padding:0px"><br>import java.lang.management.CompilationMXBean;<br style="margin:0px; padding:0px"><br>import java.lang.management.<span id="casearchresult" style="margin:0px; padding:0px; color:black"><span style="margin:0px; padding:0px">ManagementFactory</span>;<br style="margin:0px; padding:0px"><br>import java.lang.management.MemoryMXBean;<br style="margin:0px; padding:0px"><br>import java.lang.management.ThreadMXBean;<br style="margin:0px; padding:0px"><br>import java.lang.management.RuntimeMXBean;<br style="margin:0px; padding:0px"><br>import java.lang.management.OperatingSystemMXBean;<br style="margin:0px; padding:0px"><br>import java.lang.management.MemoryPoolMXBean;<br style="margin:0px; padding:0px"><br>import java.util.List;<br style="margin:0px; padding:0px"><br><br style="margin:0px; padding:0px"><br>public class JVM {<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp;&nbsp;<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; public static void main(String[] args) {<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //Java 虚拟机线程系统的管理接口 ThreadMXBean<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ThreadMXBean th=(ThreadMXBean)<span id="casearchresult" style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">ManagementFactory</span>.getThreadMXBean() ;<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println(&quot;活动线程的当前数目&quot;&#43;th.getThreadCount());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println(&quot;返回活动守护线程的当前数目&quot;&#43;th.getDaemonThreadCount());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println(&quot;Java 虚拟机启动或峰&#20540;重置以来峰&#20540;活动线程计数&quot;&#43;th.getPeakThreadCount());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println(&quot;返回当前线程的总 CPU 时间&quot;&#43;th.getCurrentThreadUserTime());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println(&quot;当前线程在用户模式中执行的 CPU 时间&quot;&#43;th.getCurrentThreadUserTime());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //Java 虚拟机的运行时系统的管理接口。 RuntimeMXBean<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; RuntimeMXBean run=(RuntimeMXBean)<span id="casearchresult" style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">ManagementFactory</span>.getRuntimeMXBean();<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println(&quot;正在运行的 Java 虚拟机的名称&quot;&#43;run.getName());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println(&quot;Java 虚拟机规范名称&quot;&#43;run.getSpecName());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println(&quot;返回 Java 库路径&quot;&#43;run.getLibraryPath());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println(&quot;系统类加载器用于搜索类文件的 Java 类路径&quot;&#43;run.getClassPath());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //用于操作系统的管理接口，Java 虚拟机在此操作系统上运行 OperatingSystemMXBean<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; OperatingSystemMXBean op=(OperatingSystemMXBean)<span id="casearchresult" style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">ManagementFactory</span>.getOperatingSystemMXBean();<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println(&quot;返回操作系统的架构&quot;&#43;op.getArch());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println(&quot;返回操作系统名称&quot;&#43;op.getName());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println(&quot;返回操作系统的版本&quot;&#43;op.getVersion());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println(&quot;Java 虚拟机可以使用的处理器数目&quot;&#43;op.getAvailableProcessors());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp;&nbsp;<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //内存池的管理接口。内存池表示由 Java 虚拟机管理的内存资源，<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //由一个或多个内存管理器对内存池进行管理 MemoryPoolMXBean<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;List&lt;MemoryPoolMXBean&gt; list=<span id="casearchresult" style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">ManagementFactory</span>.getMemoryPoolMXBeans();<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for(MemoryPoolMXBean mem:list){<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; System.out.println(&quot;Java 虚拟机启动以来或自峰&#20540;重置以来此内存池的峰&#20540;内存使用量&quot;&#43;mem.getPeakUsage());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(&quot;返回此内存池的类型&quot;&#43;mem.getType());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; System.out.println(&quot;内存使用量超过其阈&#20540;的次数&quot;&#43; mem.getUsage());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//Java 虚拟机内存系统的管理接口。 MemoryMXBean<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;MemoryMXBean mem=(MemoryMXBean)<span id="casearchresult" style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">ManagementFactory</span>.getMemoryMXBean();<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.println(&quot; 返回用于对象分配的堆的当前内存使用量&quot;&#43;mem.getHeapMemoryUsage());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.println(&quot;Java 虚拟机使用的非堆内存的当前内存使用量&quot;&#43;mem.getNonHeapMemoryUsage());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// Java 虚拟机的编译系统的管理接口 CompilationMXBean<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;CompilationMXBean com=(CompilationMXBean)<span id="casearchresult" style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">ManagementFactory</span>.getCompilationMXBean();<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.println(&quot;即时 (JIT) 编译器的名称&quot;&#43;com.getName());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.println(&quot;在编译上花费的累积耗费时间的近&#20284;&#20540;(毫秒)&quot;&#43;com.getTotalCompilationTime());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//Java 虚拟机的类加载系统的管理接口 ClassLoadingMXBean<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;ClassLoadingMXBean cl=(ClassLoadingMXBean)<span id="casearchresult" style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">ManagementFactory</span>.getClassLoadingMXBean();<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.println(&quot;当前加载到 Java 虚拟机中的类的数量&quot;&#43;cl.getLoadedClassCount());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.println(&quot;Java 虚拟机开始执行到目前已经加载的类的总数&quot;&#43;cl.getTotalLoadedClassCount());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.println(&quot;Java 虚拟机开始执行到目前已经卸载的类的总数&quot;&#43;cl.getUnloadedClassCount());<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<br style="margin:0px; padding:0px"><br>&nbsp;&nbsp;&nbsp; }<br style="margin:0px; padding:0px"><br><br style="margin:0px; padding:0px"><br>}</span></span></span></span></span></span></span></span></span></span></p><br><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(199,237,204)"><br><br style="margin:0px; padding:0px"><br></p><br><div class="dp-highlighter bg_java" style="padding:0px; font-family:Consolas,'Courier New',Courier,mono,serif; overflow:auto; word-break:break-word; margin:18px 0px!important; background-color:rgb(199,237,204)"><br><ol class="dp-j" start="1" style="padding-left:40px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; padding-top:0px!important; padding-right:0px!important; padding-bottom:0px!important; background-color:rgb(255,255,255)"><br><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">class&nbsp;TestExcho&nbsp;{&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">/<em>*&nbsp;</em></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">&nbsp;&nbsp;@param&nbsp;args&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">&nbsp;*/&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">static&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">void&nbsp;main(String[]&nbsp;args)&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">throws&nbsp;Exception{&nbsp;&nbsp;</span></span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MBeanServer&nbsp;server&nbsp;=&nbsp;ManagementFactory.getPlatformMBeanServer();&nbsp;&nbsp;</li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ObjectName&nbsp;name&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new&nbsp;ObjectName(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;com.demo.mbean:type=Excho&quot;);&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Echo&nbsp;ei&nbsp;=<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new&nbsp;Echo();&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server.registerMBean(ei,name);&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server.invoke(name,&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;setName&quot;,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new&nbsp;Object[]&nbsp;{&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;jack&quot;},&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit">new&nbsp;String[]&nbsp;{<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;java.lang.String&quot;});&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server.invoke(name,&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;showName&quot;,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">null,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">null);&nbsp;&nbsp;</span></span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;yourName&nbsp;=&nbsp;(String)server.invoke(name,&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;fetchName&quot;,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new&nbsp;Object[]&nbsp;{&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;mimi&quot;,<span class="number" style="margin:0px; padding:0px; border:none; color:rgb(0,0,0); background-color:inherit">10},&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit">new&nbsp;String[]&nbsp;{<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;java.lang.String&quot;,<span class="string" style="margin:0px; padding:0px; border:none; background-color:inherit">&quot;int&quot;});&nbsp;&nbsp;</span></span></span></span></span></span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;<del>~&quot;&#43;yourName);&nbsp;&nbsp;</del></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CompositeData&nbsp;d&nbsp;=&nbsp;&nbsp;(CompositeData)&nbsp;server.invoke(name,&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;fetchConfig&quot;,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">null,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; background-color:inherit">null);&nbsp;&nbsp;</span></span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;fn&nbsp;=&nbsp;(String)d.get(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;firstName&quot;);&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;ln&nbsp;=&nbsp;(String)d.get(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;lastName&quot;);&nbsp;&nbsp;</span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;~@@@&quot;&#43;fn&#43;<span class="string" style="margin:0px; padding:0px; border:none; background-color:inherit">&quot;@@&quot;&#43;ln);&nbsp;&nbsp;</span></span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">int&nbsp;num&nbsp;=&nbsp;(Integer)server.getAttribute(name,&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;Num&quot;);&nbsp;&nbsp;</span></span></li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;~OOOOO~~&quot;&#43;num);&nbsp;&nbsp;</span></li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>&nbsp;&nbsp;&nbsp;&nbsp;Thread.currentThread().sleep(Integer.MAX_VALUE);&nbsp;&nbsp;</li><li class="alt" style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); color:inherit; line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important"><br>}&nbsp;&nbsp;</li><li style="list-style:decimal outside; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); line-height:1.6; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"><br>}&nbsp;</li></ol><br></div>

<p></p></div><p></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://bloodorange2017.github.io/images/img_head_001.jpg"
               alt="XueCheng" />
          <p class="site-author-name" itemprop="name">XueCheng</p>
           
              <p class="site-description motion-element" itemprop="description">Do one thing at a time, and do well.</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">37</span>
                <span class="site-state-item-name">Artikel</span>
              </a>
            </div>
          

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">XueCheng</span>
</div>


<div class="powered-by">
  Erstellt mit  <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

<script type="text/javascript"
color="160,160,233" opacity='0.4' zIndex="-2" count="16" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
</body>
</html>
